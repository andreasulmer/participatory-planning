(function(){(this||window).webpackJsonp.registerAbsMids({"esri/views/3d/layers/TileLayerView3D":1593,"esri/views/layers/LayerView":1633,"esri/views/3d/layers/LayerView3D":1640,"esri/views/3d/layers/support/layerViewUpdatingProperties":1645,"esri/renderers/support/clickToleranceUtils":1656,"esri/views/3d/layers/support/tiledLayerUtils":1676,"esri/views/3d/layers/TiledLayerView3D":1693,"esri/views/support/drapedUtils":1706,"esri/views/layers/TileLayerView":1826})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{1593:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(2),r(1),r(10),r(11),r(0),r(1640),r(1693),r(1676),r(169),r(1633),r(640),r(1826),r(1706)],void 0===(n=function(e,t,r,i,n,a,o,l,s,p,u,c,y,d,f){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"imageFormatIsOpaque",{get:function(){return"jpg"===this.get("layer.tileInfo.format")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dataLevelRange",{get:function(){var e=this.tileInfo.lods,t=e[0].scale,r=e[e.length-1].scale,i=this.levelRangeFromScaleRange(t,r);return i.maxLevel=Math.min(i.maxLevel,u.getKnownTiledServiceLevelCap(this.layer.url)),i},enumerable:!0,configurable:!0}),t.prototype.initialize=function(){this._addTilingSchemeMatchPromise(),"version"in this.layer&&this.addResolvingPromise(p.checkArcGISServiceVersionCompatibility(this.layer))},t.prototype.createFetchPopupFeaturesQueryGeometry=function(e,t){return f.createQueryGeometry(e,t,this.view)},t.prototype.doRefresh=function(e){return a(this,void 0,void 0,function(){return n(this,function(e){return this.suspended?[2]:(this.emit("data-changed"),[2])})})},i([o.property({readOnly:!0,dependsOn:["layer.tileInfo.format"]})],t.prototype,"imageFormatIsOpaque",null),i([o.property({aliasOf:"layer.fullExtent"})],t.prototype,"fullExtent",void 0),i([o.property()],t.prototype,"layer",void 0),i([o.property({aliasOf:"layer.tileInfo"})],t.prototype,"tileInfo",void 0),i([o.property({readOnly:!0,dependsOn:["tileInfo","view.basemapTerrain.tilingScheme","layer.url"]})],t.prototype,"dataLevelRange",null),i([o.subclass("esri.views.3d.layers.TileLayerView3D")],t)}(o.declared(y.RefreshableLayerView(s.TiledLayerView3D(d.TileLayerView(l.LayerView3D(c))))))}.apply(null,i))||(e.exports=n)},1633:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(2),r(1),r(16),r(49),r(282),r(284),r(6),r(225),r(7),r(0)],void 0===(n=function(e,t,r,i,n,a,o,l,s,p,u,c){return function(e){function t(t){var r=e.call(this)||this;return r.layer=null,r.parent=null,r}return r(t,e),t.prototype.initialize=function(){var e=this;this.addResolvingPromise(this.layer),this.when().catch(function(t){if("layerview:create-error"!==t.name){var r=e.layer&&e.layer.id||"no id",i=e.layer&&e.layer.title||"no title";return s.getLogger(e.declaredClass).error("#resolve()","Failed to resolve layer view (layer title: '"+i+"', id: '"+r+"')",t),u.reject(t)}})},t.prototype.destroy=function(){this.layer=this.parent=null},Object.defineProperty(t.prototype,"fullOpacity",{get:function(){var e=function(e){return null==e?1:e};return e(this.get("layer.opacity"))*e(this.get("parent.fullOpacity"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"suspended",{get:function(){return!this.canResume()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"updating",{get:function(){return!!(this.updatingHandles&&this.updatingHandles.updating||this.isUpdating())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visible",{get:function(){return!0===this.get("layer.visible")},set:function(e){void 0!==e?this._override("visible",e):this._clearOverride("visible")},enumerable:!0,configurable:!0}),t.prototype.canResume=function(){return!this.get("parent.suspended")&&this.get("view.ready")&&this.get("layer.loaded")&&this.visible||!1},t.prototype.isUpdating=function(){return!1},i([c.property({dependsOn:["layer.opacity","parent.fullOpacity"]})],t.prototype,"fullOpacity",null),i([c.property()],t.prototype,"layer",void 0),i([c.property()],t.prototype,"parent",void 0),i([c.property({readOnly:!0,dependsOn:["visible","layer.loaded","parent.suspended"]})],t.prototype,"suspended",null),i([c.property({type:Boolean,dependsOn:["updatingHandles.updating"],readOnly:!0})],t.prototype,"updating",null),i([c.property({dependsOn:["layer.visible"]})],t.prototype,"visible",null),i([c.subclass("esri.views.layers.LayerView")],t)}(c.declared(o.HandleOwnerMixin(l.IdentifiableMixin(p.EsriPromiseMixin(a.EventedMixin(n))))))}.apply(null,i))||(e.exports=n)},1640:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(2),r(1),r(7),r(25),r(0),r(408)],void 0===(n=function(e,t,r,i,n,a,o,l){Object.defineProperty(t,"__esModule",{value:!0}),t.LayerView3D=function(e){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.slicePlaneEnabled=!1,t.supportsHeightUnitConversion=!1,t}return r(t,e),t.prototype.destroy=function(){this.view=null},t.prototype.postscript=function(e){this.inherited(arguments),l.mayHaveHeightModelInfo(this.layer)&&this.addResolvingPromise(this._validateHeightModelInfo())},t.prototype._validateHeightModelInfo=function(){var e=this;return n.create(function(t,r){a.whenFalseOnce(e.view.defaultsFromMap,"isHeightModelInfoSearching",function(){var i=l.rejectLayerError(e.layer,e.view.heightModelInfo,e.supportsHeightUnitConversion);i?r(i):t()})})},i([o.property()],t.prototype,"view",void 0),i([o.property()],t.prototype,"slicePlaneEnabled",void 0),i([o.subclass("esri.views.3d.layers.LayerView3D")],t)}(o.declared(e))}}.apply(null,i))||(e.exports=n)},1645:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.updatingPercentageValue={value:100,readOnly:!0},t.updatingPercentage={dependsOn:["updating","updatingPercentageValue"],readOnly:!0,value:0,get:function(){return this.updating?this.updatingPercentageValue:0}}}.apply(null,i))||(e.exports=n)},1656:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){function r(e,t){return t&&t.xoffset?Math.max(e,Math.abs(t.xoffset)):t&&t.yoffset?Math.max(e,Math.abs(t.yoffset)):e}function i(e,t){return"number"==typeof e?e:e&&e.stops&&e.stops.length?function(e){for(var t=0,r=0,i=0;i<e.length;i++){var n=e[i].size;"number"==typeof n&&(t+=n,r++)}return t/r}(e.stops):t}function n(e,t){if(!t)return e;var r=t.filter(function(e){return"size"===e.type}).map(function(t){var r=t.maxSize,n=t.minSize;return(i(r,e)+i(n,e))/2}),n=0,a=r.length;if(0===a)return e;for(var o=0;o<a;o++)n+=r[o];var l=Math.floor(n/a);return Math.max(l,e)}Object.defineProperty(t,"__esModule",{value:!0}),t.calculateTolerance=function(e){if(!e)return 6;var t="visualVariables"in e?n(6,e.visualVariables):6;if("simple"===e.type)return r(t,e.symbol);if("unique-value"===e.type){var i=t;return e.uniqueValueInfos.forEach(function(e){i=r(i,e.symbol)}),i}if("class-breaks"===e.type){var a=t;return e.classBreakInfos.forEach(function(e){a=r(a,e.symbol)}),a}return e.type,t}}.apply(null,i))||(e.exports=n)},1676:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(650),r(14),r(7),r(228)],void 0===(n=function(e,t,r,i,n,a){Object.defineProperty(t,"__esModule",{value:!0}),t.checkArcGISServiceVersionCompatibility=function(e){if(!a.isHostedAgolService(e.url)){if(e.version<10.22){var t=new i("layerview:service-version-too-old","Tiled Map Layers on servers prior to 10.2.2 are not supported. Detected version: "+e.version,{minVersion:10.22,detectedVersion:e.version});return n.reject(t)}if(10.22===e.version&&!a.isHostedSecuredProxyService(e.url,e.get("portalItem.id"))){var o=function(e){var t=null,r=e.search(/\/rest\/services\//i);return r>0&&(t=e.substring(0,r+6)),t}(e.url),l=new i("tiledlayerview3d:service-missing-cors-patch","Tiled Map Layers from 10.2.2 servers are only supported if all server updates have been applied.");return r(o+"self?f=json",{headers:{"X-Requested-With":null},timeout:1e4,handleAs:"json"}).then(function(e){if(!e||e.error)throw l}).catch(function(){throw l})}return n.resolve()}},t.throwIfError=function(e){if(e)throw e}}.apply(null,i))||(e.exports=n)},1693:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(2),r(1),r(4),r(14),r(7),r(25),r(0),r(1645),r(1676),r(169)],void 0===(n=function(e,t,r,i,n,a,o,l,s,p,u,c){Object.defineProperty(t,"__esModule",{value:!0}),t.TiledLayerView3D=function(e){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"imageFormatIsOpaque",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isOpaque",{get:function(){return this.fullOpacity>=1&&this.imageFormatIsOpaque},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dataLevelRange",{get:function(){var e=this.tileInfo.lods,t=e[0].scale,r=e[e.length-1].scale;return this.levelRangeFromScaleRange(t,r)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"displayLevelRange",{get:function(){var e=this.tileInfo.lods,t=this.layer.minScale||e[0].scale,r=this.layer.maxScale||e[e.length-1].scale,i=this.levelRangeFromScaleRange(t,r);return this.layer.maxScale&&i.maxLevel++,i},enumerable:!0,configurable:!0}),t.prototype.getTileUrl=function(e,t,r){return this.layer.getTileUrl(e,t,r)},t.prototype._addTilingSchemeMatchPromise=function(){var e=this,t=this._getTileInfoSupportError(this.tileInfo,this.layer.fullExtent);if(t)this.addResolvingPromise(o.reject(t));else{var r=l.whenTrueOnce(this.view,"basemapTerrain.tilingSchemeLocked").then(function(){var t=e.view.basemapTerrain.tilingScheme;u.throwIfError(e._getTileInfoCompatibilityError(e.tileInfo,t))});this.addResolvingPromise(r)}},t.prototype._getTileInfoSupportError=function(e,t){var r=c.checkIfTileInfoSupportedForView(e,t,this.view.spatialReference,this.view.basemapTerrain.manifold);if(r){var i={layer:this.layer,error:r},n=void 0;switch(r.name){case"tilingscheme:local-gcs-not-supported":n=new a("layerview:local-gcs-not-supported","Geographic coordinate systems are not supported in local scenes",i);break;case"tilingscheme:spatial-reference-mismatch":case"tilingscheme:global-unsupported-spatial-reference":n=new a("layerview:spatial-reference-incompatible","The spatial reference of this layer does not meet the requirements of the view",i);break;default:n=new a("layerview:tiling-scheme-unsupported","The tiling scheme of this layer is not supported by SceneView",i)}return n}return null},t.prototype._getTileInfoCompatibilityError=function(e,t){return t.compatibleWith(e)?null:new a("layerview:tiling-scheme-incompatible","The tiling scheme of this layer is incompatible with the tiling scheme of the surface")},t.prototype.levelRangeFromScaleRange=function(e,t){var r={minLevel:0,maxLevel:1/0},i=this.view.basemapTerrain&&this.view.basemapTerrain.tilingScheme;if(!i)return r;var n=i.levels[0],a=function(e){var t=Math.log(n.scale/e)/Math.LN2;return.5-Math.abs(.5-t%1)<1e-9?Math.round(t):Math.ceil(t)};return null!=e&&e>0&&(r.minLevel=Math.max(0,a(e))),null!=t&&t>0&&(r.maxLevel=Math.max(0,a(t))),r},t.prototype.isUpdating=function(){return!!(this.view&&this.view.basemapTerrain&&this.view.basemapTerrain.updating)},i([s.property({readOnly:!0})],t.prototype,"imageFormatIsOpaque",null),i([s.property({readOnly:!0,dependsOn:["view.basemapTerrain.updating"]})],t.prototype,"updating",void 0),i([s.property(p.updatingPercentage)],t.prototype,"updatingPercentage",void 0),i([s.property(p.updatingPercentageValue)],t.prototype,"updatingPercentageValue",void 0),i([s.property({readOnly:!0})],t.prototype,"fullExtent",void 0),i([s.property({readOnly:!0,dependsOn:["fullOpacity","imageFormatIsOpaque"]})],t.prototype,"isOpaque",null),i([s.property({readOnly:!0,dependsOn:["tileInfo","view.basemapTerrain.tilingScheme"]})],t.prototype,"dataLevelRange",null),i([s.property({readOnly:!0,dependsOn:["tileInfo","view.basemapTerrain.tilingScheme","layer.minScale","layer.maxScale"]})],t.prototype,"displayLevelRange",null),i([s.property()],t.prototype,"layer",void 0),i([s.property({readOnly:!0})],t.prototype,"tileInfo",void 0),i([s.subclass("esri.views.3d.layers.TiledLayerView3D")],t)}(s.declared(e))}}.apply(null,i))||(e.exports=n)},1706:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(36),r(9),r(71),r(1656)],void 0===(n=function(e,t,r,i,n,a){function o(e,t,i,a){var o;if(void 0===a&&(a=new r.Extent),"2d"===i.type)o=t*i.resolution;else if("3d"===i.type){var l=i.basemapTerrain,s=l.overlayManager,p=s?s.overlayPixelSizeInMapUnits(e):1;o=l&&!l.spatialReference.equals(i.spatialReference)?n.getMetersPerUnitForSR(l.spatialReference)/n.getMetersPerUnitForSR(i.spatialReference):t*p}var u=e.x-o,c=e.y-o,y=e.x+o,d=e.y+o,f=i.spatialReference;return a.xmin=Math.min(u,y),a.ymin=Math.min(c,d),a.xmax=Math.max(u,y),a.ymax=Math.max(c,d),a.spatialReference=f,a}Object.defineProperty(t,"__esModule",{value:!0}),t.createQueryGeometry=o,t.intersectsDrapedGeometry=function(e,t,r){var n=r.toMap(e);return i.isNone(n)?null:o(n,a.calculateTolerance(),r,l).intersects(t)?n:null};var l=new r.Extent}.apply(null,i))||(e.exports=n)},1826:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(2),r(1),r(10),r(11),r(14),r(7),r(0),r(1656)],void 0===(n=function(e,t,r,i,n,a,o,l,s,p){Object.defineProperty(t,"__esModule",{value:!0}),t.TileLayerView=function(e){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.fetchPopupFeatures=function(e){return a(this,void 0,void 0,function(){var t,r,i,s=this;return n(this,function(u){return t=this.layer,e?"tile"!==t.type?[2,l.reject(new o("tilelayerview:fetchPopupFeatures","Layer type should be 'tile'",{type:t.type}))]:(r=this.get("view.scale"),i=t.allSublayers.toArray().filter(function(e){var t=0===e.minScale||r<=e.minScale,i=0===e.maxScale||r>=e.maxScale;return e.popupTemplate&&e.popupEnabled&&e.visible&&t&&i}),[2,l.eachAlways(i.map(function(t){return a(s,void 0,void 0,function(){var r,i,a;return n(this,function(n){switch(n.label){case 0:return r=t.createQuery(),i=p.calculateTolerance(t.renderer),r.geometry=this.createFetchPopupFeaturesQueryGeometry(e,i),a=r,[4,t.popupTemplate.getRequiredFields()];case 1:return a.outFields=n.sent(),[4,t.queryFeatures(r)];case 2:return[2,n.sent().features]}})})})).then(function(e){return[].concat.apply([],e.map(function(e){return e.value}).filter(Boolean))})]):[2,l.reject(new o("tilelayerview:fetchPopupFeatures","Nothing to fetch without area",{layer:t}))]})})},i([s.property()],t.prototype,"layer",void 0),i([s.subclass("esri.layers.mixins.TileLayerView")],t)}(s.declared(e))}}.apply(null,i))||(e.exports=n)}}]);