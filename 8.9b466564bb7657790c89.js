(function(){(this||window).webpackJsonp.registerAbsMids({"esri/views/3d/interactive/editingTools":464,"esri/renderers/support/clickToleranceUtils":1656,"esri/views/draw/support/drawUtils":1672,"esri/views/support/drapedUtils":1706,"esri/views/interactive/InteractiveToolBase":1827,"esri/views/interactive/Manipulator3D":1828,"esri/views/3d/interactive/editingTools/graphicReshape3D/reshapeUtils":2026,"esri/views/interactive/manipulatorUtils":2027,"esri/views/3d/interactive/editingTools/graphicMove3D/GraphicMove3DTool":2503,"esri/views/interactive/GraphicManipulator":2504,"esri/views/interactive/ManipulatorCollection":2505,"esri/views/3d/interactive/editingTools/graphicReshape3D/GraphicReshape3DTool":2506,"esri/views/3d/interactive/editingTools/graphicReshape3D/ReshapeOperation":2507,"esri/views/3d/interactive/editingTools/graphicReshape3D/ReshapeMoveManipulator":2508,"esri/views/3d/interactive/editingTools/graphicTransform3D/GraphicTransform3DTool":2509,"esri/views/3d/interactive/editingTools/graphicTransform3D/graphicTransform3DToolConfig":2510})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{1656:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){function r(e,t){return t&&t.xoffset?Math.max(e,Math.abs(t.xoffset)):t&&t.yoffset?Math.max(e,Math.abs(t.yoffset)):e}function i(e,t){return"number"==typeof e?e:e&&e.stops&&e.stops.length?function(e){for(var t=0,r=0,i=0;i<e.length;i++){var n=e[i].size;"number"==typeof n&&(t+=n,r++)}return t/r}(e.stops):t}function n(e,t){if(!t)return e;var r=t.filter(function(e){return"size"===e.type}).map(function(t){var r=t.maxSize,n=t.minSize;return(i(r,e)+i(n,e))/2}),n=0,a=r.length;if(0===a)return e;for(var o=0;o<a;o++)n+=r[o];var s=Math.floor(n/a);return Math.max(s,e)}Object.defineProperty(t,"__esModule",{value:!0}),t.calculateTolerance=function(e){if(!e)return 6;var t="visualVariables"in e?n(6,e.visualVariables):6;if("simple"===e.type)return r(t,e.symbol);if("unique-value"===e.type){var i=t;return e.uniqueValueInfos.forEach(function(e){i=r(i,e.symbol)}),i}if("class-breaks"===e.type){var a=t;return e.classBreakInfos.forEach(function(e){a=r(a,e.symbol)}),a}return e.type,t}}.apply(null,i))||(e.exports=n)},1672:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(33),r(645),r(118)],void 0===(n=function(e,t,r,i,n){function a(e,t,r){if("point"===e.type)return e.x=e.x+t,e.y=e.y+r,e;if("multipoint"===e.type){for(var i=e.points,a=0;a<i.length;a++){var o=i[a],s=o[0],c=o[1];i[a]=[s+t,c+r]}return e}if("extent"===e.type)return e.xmin=e.xmin+t,e.xmax=e.xmax+t,e.ymin=e.ymin+r,e.ymax=e.ymax+r,e;for(var l=n.geometryToCoordinates(e),p="polyline"===e.type?e.paths:e.rings,u=0;u<l.length;u++){var h=l[u];for(a=0;a<h.length;a++){var d=h[a];s=d[0],c=d[1];p[u][a]=[s+t,c+r]}}return"paths"in e?e.paths=p:e.rings=p,e}Object.defineProperty(t,"__esModule",{value:!0}),t.move=a,t.cloneMove=function(e,t,r,i,o){var s=e.clone(),c=i.resolution;if("point"===s.type){if(o)a(s,t*c,-r*c);else{var l=i.state.transform,p=i.state.inverseTransform,u=l[0]*s.x+l[2]*s.y+l[4],h=l[1]*s.x+l[3]*s.y+l[5];s.x=p[0]*(u+t)+p[2]*(h+r)+p[4],s.y=p[1]*(u+t)+p[3]*(h+r)+p[5]}return s}if("multipoint"===s.type){if(o)a(s,t*c,-r*c);else for(var d=s.points,f=(l=i.state.transform,p=i.state.inverseTransform,0);f<d.length;f++){var m=d[f],g=l[0]*m[0]+l[2]*m[1]+l[4],y=l[1]*m[0]+l[3]*m[1]+l[5];u=p[0]*(g+t)+p[2]*(y+r)+p[4],h=p[1]*(g+t)+p[3]*(y+r)+p[5],d[f]=[u,h]}return s}if("extent"===s.type){if(o)a(s,t*c,-r*c);else{l=i.state.transform,p=i.state.inverseTransform;var v=l[0]*s.xmin+l[2]*s.ymin+l[4],_=l[1]*s.xmin+l[3]*s.ymin+l[5],b=l[0]*s.xmax+l[2]*s.ymax+l[4],S=l[1]*s.xmax+l[3]*s.ymax+l[5];s.xmin=p[0]*(v+t)+p[2]*(_+r)+p[4],s.ymin=p[1]*(v+t)+p[3]*(_+r)+p[5],s.xmax=p[0]*(b+t)+p[2]*(S+r)+p[4],s.ymax=p[1]*(b+t)+p[3]*(S+r)+p[5]}return s}if(o)a(s,t*c,-r*c);else{for(var M=n.geometryToCoordinates(s),R=(d="polyline"===s.type?s.paths:s.rings,l=i.state.transform,p=i.state.inverseTransform,0);R<M.length;R++){var T=M[R];for(f=0;f<T.length;f++)m=T[f],g=l[0]*m[0]+l[2]*m[1]+l[4],y=l[1]*m[0]+l[3]*m[1]+l[5],u=p[0]*(g+t)+p[2]*(y+r)+p[4],h=p[1]*(g+t)+p[3]*(y+r)+p[5],d[R][f]=[u,h]}"paths"in s?s.paths=d:s.rings=d}return s},t.scale=function(e,t,a,o,s){if("point"===e.type){var c=e.x,l=e.y,p=s?s[0]:c,u=s?s[1]:l,h=e.clone(),d=(c-p)*t+p,f=(l-u)*a+u;return h.x=d,h.y=f,h}if("multipoint"===e.type){for(var m=n.geometryToCoordinates(e),g=r.create(),y=i.getRingsOrPathsBounds(g,[m]),v=y[0],_=y[1],b=y[2],S=y[3],M=s?s[0]:(v+b)/2,R=s?s[1]:(S+_)/2,T=e.clone(),P=T.points,D=0;D<P.length;D++){var O=P[D];d=((c=O[0])-M)*t+M,f=((l=O[1])-R)*a+R,P[D]=[d,f]}return T}if("extent"===e.type){var I=e.xmin,E=e.xmax,A=e.ymin,w=e.ymax,x=s?s[0]:(I+E)/2,C=s?s[1]:(w+A)/2,N=e.clone();if(N.xmin=(I-x)*t+x,N.ymax=(w-C)*a+C,N.xmax=(E-x)*t+x,N.ymin=(A-C)*a+C,N.xmin>N.xmax){var j=N.xmin,G=N.xmax;N.xmin=G,N.xmax=j}if(N.ymin>N.ymax){var k=N.ymin,F=N.ymax;N.ymin=F,N.ymax=k}return N}for(var H=n.geometryToCoordinates(e),L=r.create(),U=i.getRingsOrPathsBounds(L,H),z=U[0],V=U[1],B=U[2],W=U[3],q=s?s[0]:(z+B)/2,K=s?s[1]:(W+V)/2,Z=e.clone(),Y="polyline"===Z.type?Z.paths:Z.rings,X=0;X<H.length;X++){var J=H[X];for(D=0;D<J.length;D++){var Q=J[D];d=((c=Q[0])-q)*t+q,f=((l=Q[1])-K)*a+K,Y[X][D]=[d,f]}}return"paths"in Z?Z.paths=Y:Z.rings=Y,Z},t.getScaleRatio=function(e,t,r,i,n,a){var o=Math.sqrt((r-e)*(r-e)+(i-t)*(i-t));return Math.sqrt((n-e)*(n-e)+(a-t)*(a-t))/o},t.getRotationAngle=function(e,t,r,i,n,a){var o=180*Math.atan2(t-i,e-r)/Math.PI;return 180*Math.atan2(t-a,e-n)/Math.PI-o}}.apply(null,i))||(e.exports=n)},1706:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(36),r(9),r(71),r(1656)],void 0===(n=function(e,t,r,i,n,a){function o(e,t,i,a){var o;if(void 0===a&&(a=new r.Extent),"2d"===i.type)o=t*i.resolution;else if("3d"===i.type){var s=i.basemapTerrain,c=s.overlayManager,l=c?c.overlayPixelSizeInMapUnits(e):1;o=s&&!s.spatialReference.equals(i.spatialReference)?n.getMetersPerUnitForSR(s.spatialReference)/n.getMetersPerUnitForSR(i.spatialReference):t*l}var p=e.x-o,u=e.y-o,h=e.x+o,d=e.y+o,f=i.spatialReference;return a.xmin=Math.min(p,h),a.ymin=Math.min(u,d),a.xmax=Math.max(p,h),a.ymax=Math.max(u,d),a.spatialReference=f,a}Object.defineProperty(t,"__esModule",{value:!0}),t.createQueryGeometry=o,t.intersectsDrapedGeometry=function(e,t,r){var n=r.toMap(e);return i.isNone(n)?null:o(n,a.calculateTolerance(),r,s).intersects(t)?n:null};var s=new r.Extent}.apply(null,i))||(e.exports=n)},1827:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(2),r(1),r(16),r(22),r(0),r(692),r(2505)],void 0===(n=function(e,t,r,i,n,a,o,s,c){Object.defineProperty(t,"__esModule",{value:!0});var l=function(e){function t(t){var r=e.call(this,t)||this;return r.manipulators=new c.ManipulatorCollection,r._attached=!1,r._editableFlags=[],r._manipulatorHandles=new a,r}return r(t,e),Object.defineProperty(t.prototype,"active",{get:function(){return null!=this.view&&this.view.activeTool===this},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSupported",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visible",{set:function(e){this._set("visible",e),this._attached&&(e?this._show():this._hide())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"editable",{get:function(){return this.hasEditableFlag(0)},set:function(e){this.setEditableFlag(0,e)},enumerable:!0,configurable:!0}),t.prototype.attach=function(){!this._attached&&this.isSupported&&(this.manipulators.attach(),this.onAttach(),this.visible&&this.onShow(),this._attached=!0)},t.prototype.detach=function(){this._attached&&(this.onHide(),this.onDetach(),this.manipulators.detach(),this._manipulatorHandles.removeAll(),this._attached=!1)},t.prototype.handleInputEvent=function(e){this._attached&&this.onInputEvent(e)},t.prototype.destroy=function(){this.manipulators.destroy(),this._manipulatorHandles.removeAll(),this._manipulatorHandles=null,this._set("view",null)},t.prototype.setEditableFlag=function(e,t){this._editableFlags[e]=t,this.manipulators.isToolEditable=this._editableFlags.every(function(e){return null==e||e}),this._updateManipulatorAttachment(),0===e&&this.notifyChange("editable"),this.onEditableChange()},t.prototype.hasEditableFlag=function(e){var t=this._editableFlags[e];return null==t||t},t.prototype.onAttach=function(){},t.prototype.onDetach=function(){},t.prototype.onShow=function(){},t.prototype.onHide=function(){},t.prototype.onEditableChange=function(){},t.prototype.onInputEvent=function(e){},Object.defineProperty(t.prototype,"internallyEditable",{get:function(){return this.hasEditableFlag(0)&&this.hasEditableFlag(1)},enumerable:!0,configurable:!0}),t.prototype._show=function(){this._updateManipulatorAttachment(),this.onShow()},t.prototype._hide=function(){s.setActive(this,!1),this._updateManipulatorAttachment(),this.onHide()},t.prototype._updateManipulatorAttachment=function(){this.visible?this.manipulators.attach():this.manipulators.detach()},i([o.property({constructOnly:!0})],t.prototype,"view",void 0),i([o.property({dependsOn:["view.activeTool"],readOnly:!0})],t.prototype,"active",null),i([o.property({value:!0})],t.prototype,"visible",null),i([o.property({value:!0})],t.prototype,"editable",null),i([o.property({readOnly:!0})],t.prototype,"manipulators",void 0),i([o.subclass("esri.views.interactive.InteractiveToolBase")],t)}(o.declared(n));t.InteractiveToolBase=l}.apply(null,i))||(e.exports=n)},1828:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(1),r(2),r(16),r(29),r(24),r(9),r(17),r(0),r(26),r(87),r(81),r(21),r(19),r(28),r(85),r(8),r(5),r(33),r(103),r(30),r(41),r(80),r(191),r(151),r(420),r(124)],void 0===(n=function(e,t,r,i,n,a,o,s,c,l,p,u,h,d,f,m,g,y,v,_,b,S,M,R,T,P,D,O){function I(e){return 0!==e[12]||0!==e[13]||0!==e[14]}Object.defineProperty(t,"__esModule",{value:!0});var E=function(e){function t(t){var r=e.call(this)||this;return r.hideOnGrab=!1,r.moveOnDrag=!0,r.snapToPointer=!0,r.collisionType={type:"point"},r.collisionPriority=0,r.renderObjects=[],r.autoScaleRenderObjects=!0,r._radius=10,r._worldSized=!1,r._focusMultiplier=2,r._touchMultiplier=2.5,r.interactive=!0,r.selectable=!1,r.dragging=!1,r._areAnyEngineObjectsVisible=!1,r._position=v.vec3f64.create(),r._modelTransform=f.mat4f64.create(),r._dragOffset=null,r._dirtyScreenPoint=c.createScreenPoint(),r._dirtyScreenPointArray=c.createScreenPointArray(),r._dirtyRenderScreenPointArray=c.createRenderScreenPointArray3(),r._dirtyOriginScreenPointArray=c.createScreenPointArray(),r._dirtyScreenPixelSize=1,r._screenPositionDirty=!0,r._engineResourcesAddedToStage=!1,r._engineResources=null,r._attached=!1,r._engineLayerId=null,r._materialIdReferences=null,r._hitResult={onSurface:!1,surfaceType:"ground"},r._handlers=new a,r}return i(t,e),t.prototype.initialize=function(){this._intersector=new T(this.view.viewingMode),this._mapPoint=b.makeDehydratedPoint(0,0,0,this.view.spatialReference)},t.prototype.destroy=function(){this._handlers.removeAll(),this._handlers=null,this._removeResourcesFromStage(),this._engineResources=null,this._set("view",null),this._camera=null},Object.defineProperty(t.prototype,"alignment",{get:function(){return this._get("alignment")},set:function(e){this._set("alignment",e),this.constructed&&this._refreshMapPoint()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visible",{set:function(e){e!==this._get("visible")&&(this._set("visible",e),this._updateEngineObject())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"radius",{get:function(){return this._radius},set:function(e){e!==this._radius&&(this._radius=e,this._updateEngineObject())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"worldSized",{get:function(){return this._worldSized},set:function(e){e!==this._worldSized&&(this._worldSized=e,this._updateEngineObject())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"focusMultiplier",{get:function(){return this._focusMultiplier},set:function(e){this._focusMultiplier=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"touchMultiplier",{get:function(){return this._touchMultiplier},set:function(e){this._touchMultiplier=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"modelTransform",{get:function(){return this._modelTransform},set:function(e){I(e)&&(this._screenPositionDirty=!0),d.mat4.copy(this._modelTransform,e),this._updateEngineObject()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this._position},set:function(e){this.view.renderCoordsHelper.fromRenderCoords(e,this._mapPoint,this._mapPoint.spatialReference),this._refreshMapPoint()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mapPoint",{get:function(){return this._mapPoint},set:function(e){b.clonePoint(e,this._mapPoint),this._refreshMapPoint()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"grabbing",{set:function(e){e!==this._get("grabbing")&&(this._set("grabbing",e),this._updateEngineObject()),e||(this._dragOffset=null)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hovering",{set:function(e){e!==this._get("hovering")&&(this._set("hovering",e),this._updateEngineObject())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selected",{set:function(e){e!==this._get("selected")&&(this._set("selected",e),this._updateEngineObject())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"state",{set:function(e){e!==this._get("state")&&(this._set("state",e),this._updateEngineObject())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"areAnyEngineObjectsVisible",{get:function(){return this._areAnyEngineObjectsVisible},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"surfaceType",{get:function(){return this._hitResult.onSurface?this._hitResult.surfaceType:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"focused",{get:function(){return this._focused},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_focused",{get:function(){return this._get("hovering")||this._get("grabbing")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"screenPoint",{get:function(){return this._updateScreenSpaceProperties(),this._dirtyScreenPoint},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_screenPointArray",{get:function(){return this._updateScreenSpaceProperties(),this._dirtyScreenPointArray},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_renderScreenPointArray",{get:function(){return this._updateScreenSpaceProperties(),this._dirtyRenderScreenPointArray},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_originScreenPointArray",{get:function(){return this._updateScreenSpaceProperties(),this._dirtyOriginScreenPointArray},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_screenPixelSize",{get:function(){return this._updateScreenSpaceProperties(),this._dirtyScreenPixelSize},enumerable:!0,configurable:!0}),t.prototype._updateScreenSpaceProperties=function(){if(this._screenPositionDirty){this._screenPositionDirty=!1,this._dirtyScreenPixelSize=this._camera.computeScreenPixelSizeAt(this._position);var e,t=I(this._modelTransform);if(t){var r=this._calculateModelTransformOffset(B);e=y.vec3.add(r,r,this._position)}else e=this._position;this._camera.projectPoint(e,this._dirtyRenderScreenPointArray),this._camera.renderToScreen(this._dirtyRenderScreenPointArray,this._dirtyScreenPointArray),c.screenPointArrayToObject(this._dirtyScreenPointArray,this._dirtyScreenPoint),t?(this._camera.projectPoint(this._position,x),this._camera.renderToScreen(x,this._dirtyOriginScreenPointArray)):m.vec2.copy(this._dirtyOriginScreenPointArray,this._dirtyScreenPointArray)}},t.prototype.intersectionDistance=function(e,t){if(!this._get("visible"))return null;var r=c.screenPointObjectToArray(e,w),i=this._getCollisionRadius(t),n=-1*this._get("collisionPriority");switch(this.collisionType.type){case"point":if(m.vec2.squaredDistance(this._screenPointArray,r)<i*i)return this._renderScreenPointArray[2]+n;break;case"line":for(var a=this.collisionType.paths,s=this._getWorldToScreenObjectScale(),l=this._calculateObjectTransform(s,k),p=i*this._screenPixelSize,h=S.ray.fromScreen(this._camera,r,N),d=0,f=a;d<f.length;d++){if(0!==(G=f[d]).length)for(var g=y.vec3.transformMat4(H,G[0],l),v=1;v<G.length;v++){var _=y.vec3.transformMat4(L,G[v],l);if(null!=(B=S.lineSegment.closestRayDistance2(S.lineSegment.fromPoints(g,_,C),h))&&B<p*p){var b=y.vec3.add(R.sv3d.get(),g,_);y.vec3.scale(b,b,.5);var M=c.castRenderScreenPointArray(R.sv3d.get());return this._camera.projectPoint(b,M),M[2]+n}y.vec3.copy(g,_)}}break;case"disc":var T=this.collisionType.direction,P=(s=this._getWorldToScreenObjectScale(),l=this._calculateObjectTransform(s,k),p=i*this._screenPixelSize,h=S.ray.fromScreen(this._camera,r,N),u.mat3.fromMat4(j,l)),D=y.vec3.transformMat3(z,T,P),O=this._calculateModelTransformPosition(V);S.plane.fromPositionAndNormal(O,D,F);var I=U;if(S.plane.intersectRay(F,h,I)&&y.vec3.squaredDistance(I,O)<p*p)return this._renderScreenPointArray[2]+n;break;case"ribbon":var E=this.collisionType;a=E.paths,T=E.direction,s=this._getWorldToScreenObjectScale(),l=this._calculateObjectTransform(s,k),p=i*this._camera.computeScreenPixelSizeAt(this._position),h=S.ray.fromScreen(this._camera,r,N),P=u.mat3.fromMat4(j,l),D=y.vec3.transformMat3(z,T,P),O=this._calculateModelTransformPosition(V);S.plane.fromPositionAndNormal(O,D,F);I=U;if(!S.plane.intersectRay(F,h,I))break;for(var A=0,x=a;A<x.length;A++){var G;if(0!==(G=x[A]).length)for(g=y.vec3.transformMat4(H,G[0],l),v=1;v<G.length;v++){var B;_=y.vec3.transformMat4(L,G[v],l);if(null!=(B=S.lineSegment.distance2(S.lineSegment.fromPoints(g,_,C),I))&&B<p*p){b=y.vec3.add(R.sv3d.get(),g,_);y.vec3.scale(b,b,.5);M=c.castRenderScreenPointArray(R.sv3d.get());return this._camera.projectPoint(b,M),M[2]+n}y.vec3.copy(g,_)}}break;default:o.neverReached(this.collisionType)}return null},t.prototype.attemptDragTo=function(e){if(!this.moveOnDrag)return this._handlers.forEach(function(t){var r=t.type,i=t.handler;"drag"===r&&i(e)}),!1;var t=c.screenPointObjectToArray(e.screenPoint,w);s.isNone(this._dragOffset)&&this.grabbing&&!this.snapToPointer&&(this._dragOffset=m.vec2.subtract(g.vec2f32.create(),t,this._originScreenPointArray)),s.isSome(this._dragOffset)&&m.vec2.subtract(t,t,this._dragOffset);var r=this.view.sceneIntersectionHelper.intersectToolIntersectorScreen(t,this._intersector,"on-the-ground"===this.alignment?A:null).results.min,i=U;return r.getIntersectionPoint(i)?(this.position=i,this._hitResult.onSurface=!0,this._hitResult.surfaceType="TerrainRenderer"===r.intersector?"ground":"feature",this._handlers.forEach(function(t){var r=t.type,i=t.handler;"drag"===r&&i(e)})):this._hitResult.onSurface=!1,this._hitResult.onSurface},t.prototype.grab=function(e){this._handlers.forEach(function(t){var r=t.type,i=t.handler;"grab"===r&&i(e)})},t.prototype.click=function(e){this._handlers.forEach(function(t){var r=t.type,i=t.handler;"click"===r&&i(e)})},t.prototype.on=function(e,t){this._handlers.push({type:e,handler:t})},t.prototype.attach=function(e){if(void 0===e&&(e={manipulator3D:{}}),this.view._stage){var t=e.manipulator3D;if(this._engineLayerId=t.engineLayerId,s.isNone(this._engineLayerId)){var r=new D("manipulator-3d",{isPickable:!1});this.view._stage.add(0,r),this.view._stage.addToViewContent([r.id]),this._engineLayerId=r.id,t.engineLayerId=r.id}t.engineLayerReferences=(t.engineLayerReferences||0)+1,this._materialIdReferences=t.materialIdReferences,s.isNone(this._materialIdReferences)&&(this._materialIdReferences=new Map,t.materialIdReferences=this._materialIdReferences),this._camera=this.view.state.camera,this._attached=!0,this._updateEngineObject(),M.canProject(this._mapPoint.spatialReference,this.view.spatialReference)||(this.mapPoint=b.makeDehydratedPoint(0,0,0,this.view.spatialReference))}},t.prototype.detach=function(e){void 0===e&&(e={manipulator3D:{}});var t=e.manipulator3D;t.engineLayerReferences--;var r=0===t.engineLayerReferences;r&&(t.engineLayerId=null),this._removeResourcesFromStage(r),this._engineResources=null,this._engineLayerId=null,this._materialIdReferences=null,this._camera=null,this._attached=!1},t.prototype.onCameraChange=function(e){this._camera=e,this._screenPositionDirty=!0,this._updateEngineObject()},t.prototype.onElevationChange=function(e){this.view.renderCoordsHelper.fromRenderCoords(this.position,W,e.spatialReference)&&_.containsPoint(e.extent,W)&&this._refreshMapPoint(!0)},t.prototype._refreshMapPoint=function(e){switch(void 0===e&&(e=!1),this.alignment){case"none":break;case"on-the-ground":var t=this.view.elevationProvider.getElevation(this.mapPoint,"ground");if(t===this._mapPoint.z&&e)return;this._mapPoint.z=t;break;default:o.neverReached(this.alignment)}this._screenPositionDirty=!0,this._hitResult.onSurface=!1,this.view.renderCoordsHelper.toRenderCoords(this._mapPoint,this._position),this._updateEngineObject()},t.prototype._updateEngineObject=function(){if(this._areAnyEngineObjectsVisible=!1,this._attached){if(!1===this._get("visible"))return void this._removeResourcesFromStage();var e=this._getWorldToScreenObjectScale(),t=k;if(!0===this._get("autoScaleRenderObjects")){var r=this._getFocusedSize(this._radius,this._focused)*e;this._calculateObjectTransform(r,t)}else this._calculateObjectTransform(e,t);for(var i=this._ensureEngineResources().objectsByState,n=(this._focused?2:1)|(this._get("selected")?8:4),a=this._get("hideOnGrab")&&this._get("grabbing"),o=0,s=i;o<s.length;o++){var c=s[o],l=c.stateMask,p=c.objects;if(a)for(var u=0,h=p;u<h.length;u++){(_=h[u]).hideAllComponents()}else{var d=!(0!=(15&l))||(n&l)==(15&l),f=!(0!=(65520&l))||(this._get("state")&l)==(65520&l);if(d&&f)for(var m=0,g=p;m<g.length;m++){(_=g[m]).unhideAllComponents(),_.objectTransformation=t,this._areAnyEngineObjectsVisible=!0}else for(var y=0,v=p;y<v.length;y++){var _;(_=v[y]).hideAllComponents()}}}}},t.prototype._ensureEngineResources=function(){if(s.isNone(this._engineResources)){var e=this.view._stage.getContent(0,s.expect(this._engineLayerId)),t=[],r=new Set;this.renderObjects.forEach(function(e){var i=e.material;r.has(i)||(t.push(i),r.add(i))});var i=new Map;this.renderObjects.forEach(function(e){var t=new O({idHint:"manipulator"});!function(e,t){var r=t.geometry,i=t.material,n=t.transform;Array.isArray(r)?r.forEach(function(t){return e.addGeometry(t,i,n)}):e.addGeometry(r,i,n)}(t,e);var r=e.stateMask||0,n=i.get(r)||[];n.push(t),i.set(r,n)});var n=[];i.forEach(function(e,t){n.push({stateMask:t,objects:e})}),this._engineResources={objectsByState:n,layer:e,materials:t}}return this._addResourcesToStage(),this._engineResources},t.prototype._addResourcesToStage=function(){var e=this;if(!this._engineResourcesAddedToStage&&!s.isNone(this._engineResources)){var t=this._engineResources,r=t.objectsByState,i=t.layer;t.materials.forEach(function(t){var r=s.expect(e._materialIdReferences),i=r.get(t.id)||0;0===i&&e.view._stage.add(3,t),r.set(t.id,i+1)}),r.forEach(function(t){t.objects.forEach(function(t){i.addObject(t),e.view._stage.add(1,t)})}),this._engineResourcesAddedToStage=!0}},t.prototype._removeResourcesFromStage=function(e){var t=this;if(void 0===e&&(e=!1),this._engineResourcesAddedToStage&&!s.isNone(this._engineResources)){var r=this._engineResources,i=r.objectsByState,n=r.layer,a=r.materials;i.forEach(function(e){e.objects.forEach(function(e){n.removeObject(e),t.view._stage.remove(1,e.id)})}),a.forEach(function(e){var r=s.expect(t._materialIdReferences),i=r.get(e.id);1===i?(t.view._stage.remove(3,e.id),r.delete(e.id)):r.set(e.id,i-1)}),e&&this.view._stage.remove(0,n.id),this._engineResourcesAddedToStage=!1}},t.prototype._getCollisionRadius=function(e){return this._getFocusedSize(this._radius,!0)*("touch"===e?this._touchMultiplier:1)},t.prototype._getFocusedSize=function(e,t){return e*(t?this._focusMultiplier:1)},t.prototype._getWorldToScreenObjectScale=function(){return this._worldSized?1:this._screenPixelSize},t.prototype._calculateModelTransformPosition=function(e){var t=this._getWorldToScreenObjectScale(),r=this._calculateObjectTransform(t,G);return y.vec3.set(e,r[12],r[13],r[14])},t.prototype._calculateModelTransformOffset=function(e){var t=this._calculateModelTransformPosition(e);return y.vec3.subtract(e,t,this._position)},t.prototype._calculateObjectTransform=function(e,t){return d.mat4.set(t,e,0,0,0,0,e,0,0,0,0,e,0,0,0,0,1),d.mat4.multiply(t,t,this._modelTransform),t[12]+=this._position[0],t[13]+=this._position[1],t[14]+=this._position[2],t[15]=1,t},r([l.property({constructOnly:!0,nonNullable:!0})],t.prototype,"view",void 0),r([l.property({value:"none",nonNullable:!0})],t.prototype,"alignment",null),r([l.property()],t.prototype,"hideOnGrab",void 0),r([l.property()],t.prototype,"moveOnDrag",void 0),r([l.property()],t.prototype,"snapToPointer",void 0),r([l.property()],t.prototype,"collisionType",void 0),r([l.property({type:p.Integer})],t.prototype,"collisionPriority",void 0),r([l.property({constructOnly:!0})],t.prototype,"renderObjects",void 0),r([l.property()],t.prototype,"autoScaleRenderObjects",void 0),r([l.property({value:!0})],t.prototype,"visible",null),r([l.property()],t.prototype,"radius",null),r([l.property()],t.prototype,"worldSized",null),r([l.property()],t.prototype,"focusMultiplier",null),r([l.property()],t.prototype,"touchMultiplier",null),r([l.property()],t.prototype,"interactive",void 0),r([l.property()],t.prototype,"selectable",void 0),r([l.property({value:!1})],t.prototype,"grabbing",null),r([l.property()],t.prototype,"dragging",void 0),r([l.property({value:!1})],t.prototype,"hovering",null),r([l.property({value:!1})],t.prototype,"selected",null),r([l.property({value:0})],t.prototype,"state",null),r([l.property({dependsOn:["hovering","grabbing"]})],t.prototype,"focused",null),r([l.subclass("esri.views.interactive.Manipulator3D")],t)}(l.declared(n));t.Manipulator3D=E;var A={include:new Set};A.include.add(P.TERRAIN_ID);var w=c.createScreenPointArray(),x=c.createRenderScreenPointArray3(),C=S.lineSegment.create(),N=S.ray.create(),j=h.mat3f64.create(),G=f.mat4f64.create(),k=f.mat4f64.create(),F=S.plane.create(),H=v.vec3f64.create(),L=v.vec3f64.create(),U=v.vec3f64.create(),z=v.vec3f64.create(),V=v.vec3f64.create(),B=v.vec3f64.create(),W=v.vec3f64.create()}.apply(null,i))||(e.exports=n)},2026:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(1),r(3),r(9),r(28),r(32),r(118),r(90)],void 0===(n=function(e,t,r,i,n,a,o,s,c){function l(){return new u}function p(e,t,r){return void 0===r&&(r=o.vec2f64.create()),a.vec2.set(r,e,t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(){this.vertices=[],this.edges=[]}return e.prototype.makeVertex=function(e,t,r){void 0===t&&(t=null),void 0===r&&(r=null);var i={pos:e,unnormalizedPos:e,left:t,right:r,type:"vertex",component:this};return this.vertices.push(i),i},e.prototype.makeEdge=function(e,t){var r={v0:e,v1:t,type:"edge",component:this};return e.right=r,t.left=r,this.edges.push(r),r},e.prototype.removeVertex=function(e){this.vertices.splice(this.vertices.indexOf(e),1),e.left&&this.removeEdge(e.left),e.right&&this.removeEdge(e.right)},e.prototype.removeEdge=function(e){this.edges.splice(this.edges.indexOf(e),1),e.v0.right=null,e.v1.left=null},e}();t.Component=u,t.makeMapPoint=p;var h=function(){function e(e,t){this.geometry=e,this.doUnnormalization=t,this.components=[];var r=c.getInfo(this.geometry.spatialReference);r?(this._spanMin=r.valid[0],this._spanMax=r.valid[1],this._span=this._spanMax-this._spanMin):this.doUnnormalization=!1}return e.prototype.getVertexPositionAsPoint=function(e,t){return t.x=e.pos[0],t.y=e.pos[1],t.z=null,t.spatialReference=this.geometry.spatialReference,t},e.prototype.getEdgePosition=function(e,t,r){return void 0===r&&(r=o.vec2f64.create()),p((e.v1.unnormalizedPos[0]-e.v0.unnormalizedPos[0])*t+e.v0.unnormalizedPos[0],(e.v1.unnormalizedPos[1]-e.v0.unnormalizedPos[1])*t+e.v0.unnormalizedPos[1],r)},e.prototype.getEdgePositionAsPoint=function(e,t,r){var i=this.getEdgePosition(e,t,m);return r.x=i[0],r.y=i[1],r.z=null,r.spatialReference=this.geometry.spatialReference,r},e.prototype.canRemoveVertex=function(e){return!0},e.prototype.removeVertex=function(e){var t=e.component,r=e.left,i=e.right;return t.removeVertex(e),r&&i?t.makeEdge(r.v0,i.v1):null},e.prototype.splitEdge=function(e,t){var r=e.component,i=r.makeVertex(this.getEdgePosition(e,t)),n=e.v0,a=e.v1;return r.removeEdge(e),r.makeEdge(n,i),r.makeEdge(i,a),i},e}();t.ReshapeHelper=h;var d=function(e){function t(t,r){var i=e.call(this,t,r)||this;i.geometry=t;for(var n=i.geometry.rings,a=0;a<n.length;++a){for(var o=n[a],c=l(),u=o.length-1,h=0;h<u;++h){var d=p(o[h][0],o[h][1]);c.makeVertex(d)}for(var f=c.vertices.length-1,m=0;m<f;++m){var g=c.vertices[m],y=c.vertices[m+1];c.makeEdge(g,y)}c.makeEdge(c.vertices[c.vertices.length-1],c.vertices[0]),i.doUnnormalization&&s.computeUnnormalizedVertexPositionsOnDateLineCrossing(c.vertices,i._spanMin,i._spanMax,i._span),i.components.push(c)}return i}return i(t,e),t.prototype.canRemoveVertex=function(e){return e.component.vertices.length>3},t.prototype.commit=function(){var e=this,t=[];return this.components.forEach(function(r){var i=[];e.doUnnormalization&&s.computeUnnormalizedVertexPositionsOnDateLineCrossing(r.vertices,e._spanMin,e._spanMax,e._span);var n=r.vertices[0],a=n;do{i.push(n.unnormalizedPos),n=n.right.v1}while(n&&n!==a);i.push(r.vertices[0].unnormalizedPos),t.push(i)}),this.geometry.rings=t,this.geometry},t}(h),f=function(e){function t(t,r){var i=e.call(this,t,r)||this;i.geometry=t;for(var n=i.geometry.paths,a=0;a<n.length;++a){for(var o=n[a],c=l(),u=o.length,h=0;h<u;++h){var d=p(o[h][0],o[h][1]);c.makeVertex(d)}for(var f=c.vertices.length-1,m=0;m<f;++m){var g=c.vertices[m],y=c.vertices[m+1];c.makeEdge(g,y)}i.doUnnormalization&&s.computeUnnormalizedVertexPositionsOnDateLineCrossing(c.vertices,i._spanMin,i._spanMax,i._span),i.components.push(c)}return i}return i(t,e),t.prototype.canRemoveVertex=function(e){return e.component.vertices.length>2},t.prototype.commit=function(){var e=this,t=[];return this.components.forEach(function(r){var i=[];e.doUnnormalization&&s.computeUnnormalizedVertexPositionsOnDateLineCrossing(r.vertices,e._spanMin,e._spanMax,e._span);var n=r.vertices[0],a=n;do{i.push(n.unnormalizedPos),n=n.right?n.right.v1:null}while(n&&n!==a);t.push(i)}),this.geometry.paths=t,this.geometry},t}(h);t.isReshapeGeometry=function(e){return n.isSome(e)&&("polygon"===e.type||"polyline"===e.type)},t.createReshapeHelper=function(e,t){return e?"polygon"===e.type?new d(e,t):new f(e,t):null};var m=o.vec2f64.create()}.apply(null,i))||(e.exports=n)},2027:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(21),r(8),r(80),r(86),r(188),r(149),r(1828)],void 0===(n=function(e,t,r,i,n,a,o,s,c){function l(e,t){var r=1!==t,i=new s({diffuse:e,transparent:r,writeDepth:!r,cullFace:"back",opacity:t,castShadows:!1,softwareInstanced:!0},"manipulator");return i.renderOccluded=4,i}function p(e,t,r,a){var o=i.vec3.normalize(n.sv3d.get(),e),s=i.vec3.normalize(n.sv3d.get(),t),c=i.vec3.cross(n.sv3d.get(),o,s);return a[0]=o[0],a[1]=o[1],a[2]=o[2],a[3]=0,a[4]=s[0],a[5]=s[1],a[6]=s[2],a[7]=0,a[8]=c[0],a[9]=c[1],a[10]=c[2],a[11]=0,a[12]=r[0],a[13]=r[1],a[14]=r[2],a[15]=1,a}Object.defineProperty(t,"__esModule",{value:!0}),t.createManipulatorMaterial=l,t.createSphereManipulator=function(e,t,r){return new c.Manipulator3D({view:e,renderObjects:[{geometry:new a(o.createSphereGeometry(1,32,32),"manipulator"),material:l(t,r)}]})},t.calculateInputRotationTransform=function(e,t,a,o){var s=i.vec3.subtract(n.sv3d.get(),e,a),c=p(s,i.vec3.cross(n.sv3d.get(),o,s),a,n.sm4d.get());r.mat4.invert(c,c);var l=i.vec3.transformMat4(n.sv3d.get(),t,c);return Math.atan2(l[1],l[0])},t.calculateTranslateRotateFromBases=p}.apply(null,i))||(e.exports=n)},2503:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(1),r(2),r(29),r(49),r(22),r(9),r(0),r(1672),r(2504),r(1827)],void 0===(n=function(e,t,r,i,n,a,o,s,c,l,p,u){Object.defineProperty(t,"__esModule",{value:!0});var h=function(){return function(e){this.allGraphics=e,this.type="graphic-move-start"}}();t.GraphicMoveStartEvent=h;var d=function(){return function(e,t,r){this.dx=e,this.dy=t,this.allGraphics=r,this.type="graphic-move"}}();t.GraphicMoveEvent=d;var f=function(){return function(e){this.allGraphics=e,this.type="graphic-move-stop"}}();t.GraphicMoveStopEvent=f;var m=function(e){function t(t){var r=e.call(this,t)||this;return r.graphics=new n,r.type="move-3d",r._handles=new o,r}return i(t,e),t.prototype.initialize=function(){var e=this;this._handles.add(this.graphics.on("change",function(){e._refreshGraphicManipulators()})),this._refreshGraphicManipulators()},t.prototype.destroy=function(){this._handles.destroy(),this._handles=null,this.graphics.removeAll(),this._set("view",null)},t.prototype.reset=function(){this.graphics.removeAll()},t.prototype._refreshGraphicManipulators=function(){var e=this;this._handles.remove("graphics"),this.manipulators.removeAll();var t=this.graphics.toArray().map(function(t){var r=new p.GraphicManipulator({graphic:t,view:e.view,selectable:!0});return e.manipulators.add(r),r}),r=0;t.forEach(function(i){i.on("drag",function(r){t.forEach(function(e){var t=s.expect(e.graphic.geometry);"mesh"!==t.type&&e!==i&&(e.graphic.geometry=l.move(t.clone(),r.dxMap,r.dyMap))}),e.emit("graphic-move",new d(r.dx,r.dy,e.graphics.toArray()))}),i.on("click",function(){return e.emit("click")});var n=i.watch("dragging",function(n){n?1==++r&&(e.emit("graphic-move-start",new h(e.graphics.toArray())),t.forEach(function(e){e!==i&&(e.interactive=!1)})):0==--r&&(e.emit("graphic-move-stop",new f(e.graphics.toArray())),t.forEach(function(e){e.interactive=!0}))},!0),a=i.watch("hovering",function(t){e.cursor=t?"move":null},!0);e._handles.add(n,"graphics"),e._handles.add(a,"graphics")})},r([c.property({constructOnly:!0,nonNullable:!0})],t.prototype,"view",void 0),r([c.property({readOnly:!0})],t.prototype,"graphics",void 0),r([c.property({value:null})],t.prototype,"cursor",void 0),r([c.property({readOnly:!0})],t.prototype,"type",void 0),r([c.subclass("esri.views.3d.interactive.editingTools.graphicMove3D.GraphicMove3DTool")],t)}(c.declared(a.EventedMixin(u.InteractiveToolBase)));t.GraphicMove3DTool=m}.apply(null,i))||(e.exports=n)},2504:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(1),r(2),r(16),r(29),r(6),r(9),r(17),r(0),r(28),r(8),r(5),r(63),r(421),r(41),r(1672),r(1706)],void 0===(n=function(e,t,r,i,n,a,o,s,c,l,p,u,h,d,f,m,g,y){Object.defineProperty(t,"__esModule",{value:!0});var v=o.getLogger("esri.views.interactive.GraphicManipulator"),_=function(e){function t(t){var r=e.call(this)||this;return r.layer=null,r.interactive=!0,r.selectable=!1,r.dragging=!1,r._handlers=new a,r._circleCollisionCache=null,r._originalSymbol=null,r}return i(t,e),Object.defineProperty(t.prototype,"graphic",{get:function(){return this._get("graphic")},set:function(e){"mesh"!==s.get(e.geometry,"type")?(this._circleCollisionCache=null,this._originalSymbol=e.symbol,this._set("graphic",e)):v.error("Mesh geometries are not supported")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"focusedSymbol",{set:function(e){e!==this._get("focusedSymbol")&&(this._set("focusedSymbol",e),this._updateGraphicSymbol(),this._circleCollisionCache=null)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"grabbing",{set:function(e){if(e!==this._get("grabbing")){var t=this._focused;this._set("grabbing",e),this._updateGraphicSymbol(t)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hovering",{set:function(e){if(e!==this._get("hovering")){var t=this._focused;this._set("hovering",e),this._updateGraphicSymbol(t)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selected",{set:function(e){e!==this._get("selected")&&(this._set("selected",e),this._updateGraphicSymbol())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_focused",{get:function(){return this._get("hovering")||this._get("grabbing")},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){this._resetGraphicSymbol(),this._handlers.removeAll(),this._handlers=null,this._set("view",null)},t.prototype.intersectionDistance=function(e){var t=this._get("graphic"),r=this._get("focusedSymbol"),i=s.isSome(r)?r:t.symbol,n=t.geometry;if(s.isNone(n))return null;var a=this._get("view");return"2d"===a.type?this._intersect2D(e,a,n,i):this._intersect3D(e,a,t)},t.prototype.attemptDragTo=function(e,t){if(s.isNone(this.graphic.geometry))return!1;if("mesh"===this.graphic.geometry.type)return!1;var r,i,n=this.view.toMap(t.previous),a=this.view.toMap(e.screenPoint),o=e.screenPoint.x-t.previous.x,c=e.screenPoint.y-t.previous.y;if(!n||!a)return!1;var l=[0,0,0,0,0,0];if(m.bufferToBuffer([n.x,n.y,0,a.x,a.y,0],n.spatialReference,0,l,this.graphic.geometry.spatialReference,0,2),i=l[4]-l[1],0===(r=l[3]-l[0])&&0===i)return!0;this.graphic.geometry=g.move(this.graphic.geometry.clone(),r,i);var p={screenPoint:e.screenPoint,dxMap:r,dyMap:i,dx:o,dy:c};return this._handlers.forEach(function(e){var t=e.type,r=e.handler;"drag"===t&&r(p)}),!0},t.prototype.click=function(e){this._handlers.forEach(function(t){"click"===t.type&&t.handler(e)})},t.prototype.on=function(e,t){this._handlers.push({type:e,handler:t})},t.prototype.attach=function(){s.isNone(this.layer)||this.layer.add(this.graphic)},t.prototype.detach=function(){this._resetGraphicSymbol(),s.isNone(this.layer)||this.layer.remove(this.graphic)},t.prototype._updateGraphicSymbol=function(e){if(void 0===e&&(e=this._focused),e!==this._focused){var t=this.graphic.symbol;t!==this._originalSymbol&&t!==this.focusedSymbol&&(this._originalSymbol=t)}this.graphic.symbol=this._focused&&s.isSome(this.focusedSymbol)?this.focusedSymbol:this._originalSymbol},t.prototype._resetGraphicSymbol=function(){this.graphic.symbol=this._originalSymbol},t.prototype._intersect2D=function(e,t,r,i){if(i=i||f.getDefaultSymbol2D(r),s.isNone(i))return null;var n=this._circleCollisionCache;if("point"!==r.type||"simple-marker"!==i.type){var a=y.intersectsDrapedGeometry(e,r,t);return s.isSome(a)?1:null}if(s.isNone(n)||!n.originalPoint.equals(r)){var o=r,l=t.spatialReference;if(d.canProject(o,l)){a=d.project(o,l);n={originalPoint:o.clone(),mapPoint:a,radiusPx:c.pt2px(i.size)},this._circleCollisionCache=n}}if(s.isSome(n)){var u=c.screenPointObjectToArray(e,S),h=t.state.toScreen(M,n.mapPoint.x,n.mapPoint.y),m=n.radiusPx;return p.vec2.squaredDistance(u,h)<m*m?1:null}return null},t.prototype._intersect3D=function(e,t,r){var i=t.toMap(e,{include:[r]});if(!i)return null;var n=b;return t.renderCoordsHelper.toRenderCoords(i,n)?u.vec3.distance(n,t.state.camera.eye):null},r([l.property({constructOnly:!0,nonNullable:!0})],t.prototype,"graphic",null),r([l.property({constructOnly:!0,nonNullable:!0})],t.prototype,"view",void 0),r([l.property({value:null})],t.prototype,"focusedSymbol",null),r([l.property({constructOnly:!0})],t.prototype,"layer",void 0),r([l.property()],t.prototype,"interactive",void 0),r([l.property()],t.prototype,"selectable",void 0),r([l.property({value:!1})],t.prototype,"grabbing",null),r([l.property()],t.prototype,"dragging",void 0),r([l.property()],t.prototype,"hovering",null),r([l.property({value:!1})],t.prototype,"selected",null),r([l.subclass("esri.views.interactive.GraphicManipulator")],t)}(l.declared(n));t.GraphicManipulator=_;var b=h.vec3f64.create(),S=c.createScreenPointArray(),M=c.createScreenPointArray()}.apply(null,i))||(e.exports=n)},2505:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(1),r(29),r(9)],void 0===(n=function(e,t,r,i,n){Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(){this._isToolEditable=!0,this._manipulators=new i,this._nextManipulatorId=0,this._resourceContexts={manipulator3D:{}},this._attached=!1}return Object.defineProperty(e.prototype,"isToolEditable",{set:function(e){this._isToolEditable=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._manipulators.length},enumerable:!0,configurable:!0}),e.prototype.add=function(e,t){return void 0===t&&(t=0),this.addMany([e],t)[0]},e.prototype.addMany=function(e,t){var r=this;return void 0===t&&(t=0),e.map(function(e){var i=r._nextManipulatorId++,n={id:i,manipulator:e,visibilityPredicate:t,attached:!1};return r._manipulators.add(n),r._attached&&r._updateManipulatorAttachment(n),i})},e.prototype.remove=function(e){if("number"==typeof e){for(var t=e,r=0;r<this._manipulators.length;r++)if(this._manipulators.getItemAt(r).id===t){var i=this._manipulators.splice(r,1)[0];return this._detachManipulator(i),i.id}return null}var n=e;for(r=0;r<this._manipulators.length;r++)if(this._manipulators.getItemAt(r).manipulator===n){i=this._manipulators.splice(r,1)[0];return this._detachManipulator(i),i.id}return null},e.prototype.removeAll=function(){var e=this;this._manipulators.forEach(function(t){e._detachManipulator(t)}),this._manipulators.removeAll()},e.prototype.attach=function(){var e=this;this._manipulators.forEach(function(t){e._updateManipulatorAttachment(t)}),this._attached=!0},e.prototype.detach=function(){var e=this;this._manipulators.forEach(function(t){e._detachManipulator(t)}),this._attached=!1},e.prototype.destroy=function(){this._manipulators.forEach(function(e){var t=e.manipulator;t.destroy&&t.destroy()}),this._manipulators.destroy(),this._resourceContexts=null},e.prototype.on=function(e,t){return this._manipulators.on("change",function(e){t(e)})},e.prototype.forEach=function(e){for(var t=0,r=this._manipulators.items;t<r.length;t++)e(r[t])},e.prototype.intersect=function(e,t){var r=null,i=Number.MAX_VALUE;return this._manipulators.forEach(function(a){var o=a.id,s=a.manipulator;if(a.attached&&s.interactive){var c=s.intersectionDistance(e,t);n.isSome(c)&&c<i&&(i=c,r=o)}}),r},e.prototype.findById=function(e){if(n.isNone(e))return null;for(var t=0,r=this._manipulators.items;t<r.length;t++){var i=r[t];if(e===i.id)return i.manipulator}return null},e.prototype._updateManipulatorAttachment=function(e){this._isManipulatorItemVisible(e)?this._attachManipulator(e):this._detachManipulator(e)},e.prototype._attachManipulator=function(e){e.attached||(e.manipulator.attach(this._resourceContexts),e.attached=!0)},e.prototype._detachManipulator=function(e){if(e.attached){var t=e.manipulator;t.grabbing=!1,t.dragging=!1,t.hovering=!1,t.selected=!1,t.detach(this._resourceContexts),e.attached=!1}},e.prototype._isManipulatorItemVisible=function(e){return 2===e.visibilityPredicate||(this._isToolEditable?0===e.visibilityPredicate:1===e.visibilityPredicate)},e}();t.ManipulatorCollection=a}.apply(null,i))||(e.exports=n)},2506:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(1),r(2),r(49),r(22),r(6),r(9),r(25),r(0),r(711),r(2507),r(2026),r(1827)],void 0===(n=function(e,t,r,i,n,a,o,s,c,l,p,u,h,d){Object.defineProperty(t,"__esModule",{value:!0});var f=o.getLogger("esri.views.3d.interactive.editingTools.graphicReshape3D.GraphicReshape3DTool"),m=function(e){function t(t){var r=e.call(this,t)||this;return r._handles=new a,r._reshapeOperation=null,r._internalGeometryUpdate=!1,r.type="reshape-3d",r}return i(t,e),t.prototype.destroy=function(){this._handles.removeAll(),this._set("view",null),this._set("graphic",null)},Object.defineProperty(t.prototype,"graphic",{set:function(e){!s.isSome(e)||p.isSupportedGraphic(e)?this._set("graphic",e):f.error("Only polyline and polygon geometries are supported")},enumerable:!0,configurable:!0}),t.prototype._updateGeometry=function(){s.isSome(this.graphic)&&h.isReshapeGeometry(this.graphic.geometry)?this._reshapeOperation.inputGeometry=this.graphic.geometry.clone():this._reshapeOperation.inputGeometry=null},t.prototype._updateGraphic=function(){var e=this;this._handles.remove("onGraphicGeometryChange"),this._updateGeometry();var t=this.watch("graphic.geometry",function(){!1===e._internalGeometryUpdate&&e._updateGeometry()},!0);this._handles.add(t,"onGraphicGeometryChange")},t.prototype._onReshapeGeometryChanged=function(){s.isNone(this.graphic)||(this._internalGeometryUpdate=!0,this.graphic.geometry=this._reshapeOperation.outputGeometry.clone(),this._internalGeometryUpdate=!1)},t.prototype.initialize=function(){var e=this;this._reshapeOperation=new u.ReshapeOperation({view:this.view,manipulators:this.manipulators}),this._handles.add([this._reshapeOperation.watch("cursor",function(){e.cursor=e._reshapeOperation.cursor}),this._reshapeOperation.on("reshape-operation-start",function(t){s.isNone(e.graphic)||(t.graphic=e.graphic,e.emit("reshape-start",t))}),this._reshapeOperation.on("vertex-move",function(t){e._onReshapeGeometryChanged(),s.isSome(e.graphic)&&(t.graphic=e.graphic,e.emit("vertex-move",t))}),this._reshapeOperation.on("translate",function(t){e._onReshapeGeometryChanged(),s.isSome(e.graphic)&&(t.graphic=e.graphic,e.emit("translate",t))}),this._reshapeOperation.on("vertex-add",function(t){e._onReshapeGeometryChanged(),s.isSome(e.graphic)&&(t.graphic=e.graphic,e.emit("vertex-add",t))}),this._reshapeOperation.on("vertex-remove",function(t){e._onReshapeGeometryChanged(),s.isSome(e.graphic)&&(t.graphic=e.graphic,e.emit("vertex-remove",t))}),this._reshapeOperation.on("reshape-operation-stop",function(t){s.isNone(e.graphic)||(t.graphic=e.graphic,e.emit("reshape-stop",t))}),this._reshapeOperation.on("click",function(){return e.emit("click")}),c.init(this,"graphic",function(){e._updateGraphic()},!0)])},t.prototype.handleInputEvent=function(e){"key-down"!==e.type||"Delete"!==e.key&&"Backspace"!==e.key||this._reshapeOperation.removeSelectedVertices()},t.prototype.reset=function(){this.graphic=null},r([l.property({constructOnly:!0,nonNullable:!0})],t.prototype,"view",void 0),r([l.property({value:null})],t.prototype,"graphic",null),r([l.property({readOnly:!0})],t.prototype,"type",void 0),r([l.property({value:null})],t.prototype,"cursor",void 0),r([l.subclass("esri.views.3d.interactive.editingTools.graphicReshape3D.GraphicReshape3DTool")],t)}(l.declared(n.EventedMixin(d.InteractiveToolBase)));t.GraphicReshape3DTool=m}.apply(null,i))||(e.exports=n)},2507:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(1),r(2),r(49),r(22),r(0),r(103),r(2508),r(2026),r(86),r(188),r(1828),r(2027)],void 0===(n=function(e,t,r,i,n,a,o,s,c,l,p,u,h,d){Object.defineProperty(t,"__esModule",{value:!0});var f=function(){return function(e,t){void 0===e&&(e=!1),void 0===t&&(t=!1),this.isDragging=e,this.fromTranslation=t,this.graphic=null,this.type="reshape-start"}}();t.ReshapeStartEvent=f;var m=function(){return function(e){this.coords=e,this.graphic=null,this.type="vertex-move"}}();t.VertexMoveEvent=m;var g=function(){return function(e,t){this.dxScreen=e,this.dyScreen=t,this.graphic=null,this.type="translate"}}();t.TranslateEvent=g;var y=function(){return function(e){this.coords=e,this.graphic=null,this.type="vertex-add"}}();t.VertexAddEvent=y;var v=function(){return function(e){this.coords=e,this.graphic=null,this.type="vertex-remove"}}();t.VertexRemoveEvent=v;var _=function(){return function(e,t){void 0===e&&(e=!1),void 0===t&&(t=!1),this.isDragging=e,this.fromTranslation=t,this.graphic=null,this.type="reshape-stop"}}();t.ReshapeStopEvent=_;var b=function(e){function t(t){var r=e.call(this,t)||this;return r._vertexManipulatorMaterial=d.createManipulatorMaterial([1,.5,0],1),r._edgeManipulatorMaterial=d.createManipulatorMaterial([.5,.5,.5],1),r._selectedManipulatorMaterial=d.createManipulatorMaterial([1,1,1],1),r._manipulatorGeometry=new p(u.createSphereGeometry(1,16,16),"reshape-manipulator"),r._handles=new a,r._manipulatorInfos=[],r._reshapeHelper=null,r._moveManipulator=null,r._numDragging=0,r.manipulators=null,r}return i(t,e),t.prototype.destroy=function(){this._clear()},Object.defineProperty(t.prototype,"inputGeometry",{get:function(){return this._reshapeHelper?this._reshapeHelper.geometry:null},set:function(e){this._recreateManipulators(e)},enumerable:!0,configurable:!0}),t.prototype.removeSelectedVertices=function(){var e=this._manipulatorInfos.filter(function(e){return e.manipulator.selected&&"vertex"===e.handle.type});this._removeVertices(e)},t.prototype._clear=function(){this._handles.removeAll(),this.manipulators.removeAll(),this._manipulatorInfos=[],this._moveManipulator=null,this._reshapeHelper=null,this._numDragging=0},t.prototype._recreateManipulators=function(e){var t=this;if(this._clear(),this._reshapeHelper=l.createReshapeHelper(e,"global"===this.view.viewingMode),!this._reshapeHelper)return null;this._reshapeHelper.components.forEach(function(e){e.vertices.forEach(function(e){return t._createManipulator(e)}),e.edges.forEach(function(e){return t._createManipulator(e)})}),this._moveManipulator=new c.ReshapeMoveManipulator({view:this.view,reshapeHelper:this._reshapeHelper,selectable:!1}),this._handles.add(this._moveManipulator.watch("grabbing",function(e){t._manipulatorInfos.forEach(function(t){t.manipulator.interactive=!e})},!0),this._moveManipulator),this._handles.add(this._moveManipulator.watch("dragging",function(e){!0===e?1==++t._numDragging&&t.emit("reshape-operation-start",new f(!0,!0)):0==--t._numDragging&&t.emit("reshape-operation-stop",new _(!0,!0))},!0),this._moveManipulator),this._handles.add(this._moveManipulator.watch("hovering",function(e){t.cursor=e?"move":null},!0),this._moveManipulator),this._moveManipulator.on("drag",function(e){return t._moveManipulatorDragCallback(e)}),this._moveManipulator.on("click",function(){return t.emit("click")}),this.manipulators.add(this._moveManipulator)},t.prototype._clearManipulatorSelection=function(){this._manipulatorInfos.forEach(function(e){e.manipulator.selected=!1})},t.prototype._createManipulator=function(e){var t=this,r=new h.Manipulator3D({view:this.view,renderObjects:[{geometry:this._manipulatorGeometry,material:this._vertexManipulatorMaterial,stateMask:4|S.Vertex},{geometry:this._manipulatorGeometry,material:this._edgeManipulatorMaterial,stateMask:4|S.Edge},{geometry:this._manipulatorGeometry,material:this._selectedManipulatorMaterial,stateMask:8}],radius:5});r.alignment="on-the-ground","vertex"===e.type?(r.state=S.Vertex,r.selectable=!0):(r.state=S.Edge,r.selectable=!1);var i={manipulator:r,handle:e};return this._manipulatorInfos.push(i),this.manipulators.add(r),this._setManipulatorPosition(i),this._handles.add(r.watch("grabbing",function(e){t._moveManipulator.interactive=!e},!0),r),this._handles.add(r.watch("dragging",function(e){!0===e?1==++t._numDragging&&t.emit("reshape-operation-start",new f(!0)):0==--t._numDragging&&t.emit("reshape-operation-stop",new _(!0))},!0),r),this._handles.add(r.watch("hovering",function(e){t.cursor=e?"vertex"===i.handle.type?"move":"copy":null},!0),r),r.on("drag",function(){return t._manipulatorMoveCallback(i)}),r.on("click",function(e){return t._manipulatorClickCallback(e,i)}),r},t.prototype._removeManipulator=function(e){e&&(this._handles.remove(e.manipulator),this._manipulatorInfos.splice(this._manipulatorInfos.indexOf(e),1),this.manipulators.remove(e.manipulator))},t.prototype._getManipulatorInfoFromHandle=function(e){if(e)for(var t=0,r=this._manipulatorInfos;t<r.length;t++){var i=r[t];if(e===i.handle)return i}return null},t.prototype._setManipulatorPosition=function(e){e&&("vertex"===e.handle.type?e.manipulator.mapPoint=this._reshapeHelper.getVertexPositionAsPoint(e.handle,M):"edge"===e.handle.type&&(e.manipulator.mapPoint=this._reshapeHelper.getEdgePositionAsPoint(e.handle,.5,M)))},t.prototype._splitEdgeManipulator=function(e){if("edge"===e.handle.type){var t=this._reshapeHelper.splitEdge(e.handle,.5);return e.handle=t,e.manipulator.state=S.Vertex,e.manipulator.selectable=!0,t.left&&this._createManipulator(t.left),t.right&&this._createManipulator(t.right),t}return null},t.prototype._manipulatorMoveCallback=function(e){var t=this;if("edge"===e.handle.type&&this._splitEdgeManipulator(e),e.handle&&"vertex"===e.handle.type){!1===e.manipulator.selected&&(this._clearManipulatorSelection(),e.manipulator.selected=!0);var r=e.handle.pos,i=e.manipulator.mapPoint.x-r[0],n=e.manipulator.mapPoint.y-r[1],a=this._manipulatorInfos.filter(function(e){return e.manipulator.selected&&"vertex"===e.handle.type});a.forEach(function(r){var a=r.handle;a.pos[0]+=i,a.pos[1]+=n,e!==r&&(M.x=a.pos[0],M.y=a.pos[1],M.spatialReference=t._reshapeHelper.geometry.spatialReference,r.manipulator.mapPoint=M)}),this.outputGeometry=this._reshapeHelper.commit(),a.forEach(function(e){var r=e.handle;t._setManipulatorPosition(t._getManipulatorInfoFromHandle(r.left)),t._setManipulatorPosition(t._getManipulatorInfoFromHandle(r.right))});var o=a.map(function(e){return e.handle.unnormalizedPos}),s=new m(o);this.emit("vertex-move",s)}},t.prototype._removeVertices=function(e){var t=this,r=[];if(e.forEach(function(e){if("vertex"===e.handle.type&&t._reshapeHelper.canRemoveVertex(e.handle)){0===r.length&&t.emit("reshape-operation-start",new f),r.push(e.handle.unnormalizedPos),t._removeManipulator(e),t._removeManipulator(t._getManipulatorInfoFromHandle(e.handle.left)),t._removeManipulator(t._getManipulatorInfoFromHandle(e.handle.right));var i=t._reshapeHelper.removeVertex(e.handle);i&&t._createManipulator(i)}}),r.length>0){this.outputGeometry=this._reshapeHelper.commit();var i=new v(r);this.emit("vertex-remove",i),this.emit("reshape-operation-stop",new _)}},t.prototype._manipulatorClickCallback=function(e,t){if("vertex"===t.handle.type&&2===e.button&&this._removeVertices([t]),"edge"===t.handle.type&&0===e.button){this.emit("reshape-operation-start",new f);var r=this._splitEdgeManipulator(t);this.outputGeometry=this._reshapeHelper.commit();var i=new y([r.unnormalizedPos]);this.emit("vertex-add",i),this.emit("reshape-operation-stop",new _)}},t.prototype._moveManipulatorDragCallback=function(e){var t=this,r=[],i=!0;if(this._manipulatorInfos.forEach(function(n){"vertex"===n.handle.type&&(n.manipulator.grabbing?i=!1:"vertex"===n.handle.type&&(n.handle.pos[0]+=e.dxGeometry,n.handle.pos[1]+=e.dyGeometry,r.push(n.handle.pos),t._setManipulatorPosition(n)))}),this._manipulatorInfos.forEach(function(e){"vertex"!==e.handle.type&&t._setManipulatorPosition(e)}),this.outputGeometry=this._reshapeHelper.commit(),i)this.emit("translate",new g(e.dxScreen,e.dyScreen));else{var n=new m(r);this.emit("vertex-move",n)}},r([o.property({value:null,nonNullable:!0})],t.prototype,"view",void 0),r([o.property({value:null})],t.prototype,"inputGeometry",null),r([o.property({value:null})],t.prototype,"cursor",void 0),r([o.property({value:null})],t.prototype,"outputGeometry",void 0),r([o.property({constructOnly:!0})],t.prototype,"manipulators",void 0),r([o.subclass("esri.views.3d.interactive.editingTools.graphicReshape3D.ReshapeOperation")],t)}(o.declared(n.EventedAccessor));t.ReshapeOperation=b;var S,M=s.makeDehydratedPoint(0,0,null,null);!function(e){e.Vertex=16,e.Edge=32}(S||(S={}))}.apply(null,i))||(e.exports=n)},2508:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(1),r(2),r(16),r(29),r(9),r(0),r(8),r(5),r(41),r(80),r(1706)],void 0===(n=function(e,t,r,i,n,a,o,s,c,l,p,u,h){Object.defineProperty(t,"__esModule",{value:!0});var d=function(e){function t(t){var r=e.call(this)||this;return r._handlers=new a,r.interactive=!0,r.selectable=!1,r.grabbing=!1,r.dragging=!1,r.hovering=!1,r.selected=!1,r}return i(t,e),t.prototype.initialize=function(){},t.prototype.destroy=function(){this._handlers.removeAll(),this._handlers=null,this._set("view",null)},t.prototype.intersectionDistance=function(e){if(!this.reshapeHelper.geometry)return null;var t=h.intersectsDrapedGeometry(e,this.reshapeHelper.geometry,this.view);if(o.isNone(t))return null;var r=u.sv3d.get();return this.view.renderCoordsHelper.toRenderCoords(t,r)?c.vec3.distance(f,this.view.state.camera.eye):null},t.prototype.attemptDragTo=function(e,t){if(null==this.reshapeHelper.geometry)return!1;var r=this.view.toMap(t.previous),i=this.view.toMap(e.screenPoint),n=0,a=0,o=0,s=0,c=0,l=0;if(r&&i){var u=[0,0,0,0,0,0];p.bufferToBuffer([r.x,r.y,0,i.x,i.y,0],r.spatialReference,0,u,this.reshapeHelper.geometry.spatialReference,0,2),o=u[3]-u[0],s=u[4]-u[1],n=i.x-r.x,a=i.y-r.y,c=e.screenPoint.x-t.previous.x,l=e.screenPoint.y-t.previous.y}var h={screenPoint:e.screenPoint,dxMap:n,dyMap:a,dxGeometry:o,dyGeometry:s,dxScreen:c,dyScreen:l,toMS:i};return this._handlers.forEach(function(e){"drag"===e.type&&e.handler(h)}),!0},t.prototype.click=function(e){this._handlers.forEach(function(t){"click"===t.type&&t.handler(e)})},t.prototype.on=function(e,t){this._handlers.push({type:e,handler:t})},t.prototype.attach=function(){},t.prototype.detach=function(){},r([s.property()],t.prototype,"reshapeHelper",void 0),r([s.property({constructOnly:!0,nonNullable:!0})],t.prototype,"view",void 0),r([s.property()],t.prototype,"interactive",void 0),r([s.property()],t.prototype,"selectable",void 0),r([s.property()],t.prototype,"grabbing",void 0),r([s.property()],t.prototype,"dragging",void 0),r([s.property()],t.prototype,"hovering",void 0),r([s.property()],t.prototype,"selected",void 0),r([s.subclass("esri.views.interactive.GeometryManipulator")],t)}(s.declared(n));t.ReshapeMoveManipulator=d;var f=l.vec3f64.create()}.apply(null,i))||(e.exports=n)},2509:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(1),r(2),r(10),r(11),r(49),r(22),r(6),r(13),r(9),r(7),r(52),r(17),r(71),r(25),r(0),r(21),r(19),r(8),r(5),r(111),r(34),r(103),r(2510),r(712),r(30),r(39),r(41),r(80),r(86),r(188),r(457),r(1827),r(1828),r(2027)],void 0===(n=function(e,t,r,i,n,a,o,s,c,l,p,u,h,d,f,m,g,y,v,_,b,S,M,R,T,P,D,O,I,E,A,w,x,C,N,j){function G(e){for(var t=function(e,t,r){for(var i=[],n=Math.ceil(T.GEOMETRY_SEGMENTS*(t-e)/(2*Math.PI)),a=0;a<n+1;a++){var o=e+a*(t-e)/n;i.push(b.vec3f64.fromValues(r*Math.cos(o),r*Math.sin(o),0))}return i},r=function(e){return t(0,2*Math.PI,e)},i=function(e,t){return new A(w.createPathExtrusionGeometry(function(e){return[[-e/2,0],[e/2,0],[e/2,T.RING_HEIGHT/2],[-e/2,T.RING_HEIGHT/2]]}(t),e,[],[],!1),"graphic-transform-ring")},n=r(T.RING_RADIUS),a=i(n,T.RING_THICKNESS),o={left:[],right:[]},s=[],c=0;c<2;c++){var l=(M=c*Math.PI-Math.PI/4)+(R=Math.PI/2-T.ROTATE_INDICATOR_ARC_LENGTH),p=M+Math.PI/2-R,u=i(P=t(l,p,T.INNER_INDICATOR_RADIUS),T.INDICATOR_THICKNESS);s.push(P),o.left.push(u),o.right.push(u);for(var h=0;h<2;h++){var d=0===h,f=v.mat4f64.create();if(d){y.mat4.scale(f,f,[1,-1,1]),y.mat4.rotate(f,f,-l,[0,0,1]);var m=Math.round(T.ROTATE_INDICATOR_ARROW_PLACEMENT_PERCENTAGE*(P.length-1));f[12]=P[m][0],f[13]=P[m][1],f[14]=P[m][2]}else{y.mat4.rotate(f,f,p,[0,0,1]);m=Math.round((1-T.ROTATE_INDICATOR_ARROW_PLACEMENT_PERCENTAGE)*(P.length-1));f[12]=P[m][0],f[13]=P[m][1],f[14]=P[m][2]}var g=w.createExtrudedTriangle(T.ROTATE_INDICATOR_ARROW_TIP_LENGTH,0,T.ROTATE_INDICATOR_ARROW_TIP_RADIUS,T.RING_HEIGHT);w.transformInPlace(g,f);var _=new A(g,"graphic-transform-ring-rotate");(d?o.left:o.right).push(_)}}var S=[];for(c=0;c<2;c++){l=(M=c*Math.PI-Math.PI/4)+(R=Math.PI/2-T.SCALE_INDICATOR_ARC_LENGTH),p=M+Math.PI/2-R;var M,R,P=t(l,p,T.OUTER_INDICATOR_RADIUS);S.push(i(P,T.INDICATOR_THICKNESS))}var D=r(T.RING_RADIUS+T.SCALE_INDICATOR_OFFSET1),O=r(T.RING_RADIUS+T.SCALE_INDICATOR_OFFSET2),I=i(D,T.INDICATOR_THICKNESS),E=i(O,T.INDICATOR_THICKNESS),x=r(T.RING_RADIUS-T.SCALE_INDICATOR_OFFSET1),C=r(T.RING_RADIUS-T.SCALE_INDICATOR_OFFSET2),j=i(x,T.INDICATOR_THICKNESS),G=i(C,T.INDICATOR_THICKNESS),k=L(),F=L(.66),H=L(.5),U=L(.33),z=[{geometry:a,material:k,stateMask:ee.DiscUnfocused|ee.ArrowUnfocused},{geometry:a,material:H},{geometry:S,material:k,stateMask:ee.Unlocked|ee.RingFocused},{geometry:I,material:F,stateMask:2|ee.ScaleIn},{geometry:E,material:U,stateMask:2|ee.ScaleIn},{geometry:j,material:F,stateMask:2|ee.ScaleOut},{geometry:G,material:U,stateMask:2|ee.ScaleOut},{geometry:o.left,material:k,stateMask:ee.Unlocked|ee.RingFocused},{geometry:o.left,material:k,stateMask:2|ee.RotateLeft},{geometry:o.right,material:k,stateMask:2|ee.RotateRight}],V=[n].concat(s);return new N.Manipulator3D({view:e,renderObjects:z,autoScaleRenderObjects:!1,radius:T.RING_THICKNESS,focusMultiplier:1,touchMultiplier:1.5,moveOnDrag:!1,alignment:"on-the-ground",collisionType:{type:"ribbon",paths:V,direction:b.vec3f64.fromValues(0,0,1)}})}function k(e){var t=Math.sqrt(T.DISC_TRANSLATE_ARROW_SIZE*T.DISC_TRANSLATE_ARROW_SIZE*3/4),r=w.createExtrudedTriangle(t,T.DISC_TRANSLATE_ARROW_SIZE/2,T.DISC_TRANSLATE_ARROW_SIZE/2,T.DISC_HEIGHT);w.transformInPlace(r,y.mat4.fromTranslation(E.sm4d.get(),_.vec3.set(E.sv3d.get(),0,-t/3,0)));var i=new A(r,"graphic-transform-disc-arrow"),n=L(),a=L(.5),o=new N.Manipulator3D({view:e,renderObjects:[{geometry:i,material:a,stateMask:1|ee.DiscFocused},{geometry:i,material:a,stateMask:1|ee.ArrowFocused},{geometry:i,material:n,stateMask:ee.TouchInput|ee.ArrowUnfocused|ee.DiscUnfocused|ee.RingUnfocused},{geometry:i,material:n,stateMask:2}],autoScaleRenderObjects:!1,radius:t,focusMultiplier:1,touchMultiplier:1,snapToPointer:!1,alignment:"on-the-ground",collisionType:{type:"disc",direction:b.vec3f64.fromValues(0,0,1)}});return o.visible=!1,o}function F(e,t){var r=this,i=e.allLayerViews.find(function(e){return e.layer===t.layer}),o=t.symbol;return u.all(o.symbolLayers.map(function(e){return a(r,void 0,void 0,function(){var t,r;return n(this,function(n){switch(n.label){case 0:t=null,r=null,"object"===e.type&&(t=e.heading),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,i.whenSymbolLayerSize(o,e)];case 2:return r=n.sent(),[3,4];case 3:return n.sent(),r=null,[3,4];case 4:return[2,{heading:t,size:r}]}})})}).toArray()).then(function(e){return{symbolLayers:e}})}function H(e){var t=_.vec3.subtract(E.sv3d.get(),e.startPoint,e.origin),r=_.vec3.subtract(E.sv3d.get(),e.endPoint,e.origin),i=_.vec3.length(t),n=_.vec3.length(r);return 0===i?0:n/i}function L(e){void 0===e&&(e=1);var t=T.HANDLE_COLOR.concat([e]),r=new x({color:t,transparent:1!==e,cullFace:"back"},"graphic-transform");return r.renderOccluded=2,r}function U(e,t,r){var i=t.projectPoint(e,d.castRenderScreenPointArray(te)),n=t.renderToScreen(i,re);return _.vec3.set(r,n[0],n[1],0)}function z(e){return"local"===e.viewingMode||e.scale<T.ALIGN_ARROWS_SCALE_THRESHOLD}Object.defineProperty(t,"__esModule",{value:!0});var V=c.getLogger("esri.views.3d.interactive.editingTools.graphicTransform3D.GraphicTransform3DTool"),B=function(){return function(e){this.graphic=e}}();t.GraphicTranslateStartEvent=B;var W=function(){return function(e){this.graphic=e}}();t.GraphicTranslateStopEvent=W;var q=function(){return function(e){this.graphic=e}}();t.GraphicRotateStartEvent=q;var K=function(){return function(e){this.graphic=e}}();t.GraphicRotateStopEvent=K;var Z=function(){return function(e){this.graphic=e}}();t.GraphicScaleStartEvent=Z;var Y=function(){return function(e){this.graphic=e}}();t.GraphicScaleStopEvent=Y;var X=function(){return function(e,t,r){this.graphic=e,this.dx=t,this.dy=r,this.type="translate"}}();t.GraphicTranslateEvent=X;var J=function(){return function(e,t){this.graphic=e,this.angle=t,this.type="rotate"}}();t.GraphicRotateEvent=J;var Q=function(){return function(e,t){this.graphic=e,this.scale=t,this.type="scale"}}();t.GraphicScaleEvent=Q;var $=function(e){function t(t){var r=e.call(this,t)||this;return r.enableRotation=!0,r.enableScaling=!0,r.discManipulator=null,r.ringManipulator=null,r.arrowManipulators=null,r.type="transform-3d",r._handles=new s,r._arrowDragData=null,r._ringDragData=null,r._startSymbolDataPromise=null,r._startSymbolData=null,r._ringDelayedFocusFrameTask=null,r._ringManipulatorHasDelayedFocused=!1,r._scaleAnimationFrameTask=null,r._lastPointerEventType=null,r}return i(t,e),t.prototype.destroy=function(){this._removeFrameTasks(),this.graphic=null,this._handles.destroy(),this._handles=null,this._set("view",null)},Object.defineProperty(t.prototype,"graphic",{set:function(e){!p.isSome(e)||P.isSupportedGraphic(e)?this._set("graphic",e):V.error("Only graphics from a graphics layer with point geometries and object symbology are supported")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_ringMode",{get:function(){return p.isSome(this._ringDragData)&&this._ringDragData.mode||this._ringModeFromOptions},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_ringModeFromOptions",{get:function(){var e=this._shouldAllowModeType("scale"),t=this._shouldAllowModeType("rotate");return e||t?t?e?null:{type:"rotate",startAngle:0}:{type:"scale"}:{type:"disabled"}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_manipulatorState",{get:function(){var e=this._ringMode,t="touch"===this._lastPointerEventType?ee.TouchInput:0;return p.isNone(e)?t|=ee.Unlocked:"rotate"===e.type?t|=p.isSome(this._ringDragData)&&this._ringDragData.angleDir<0?ee.RotateLeft:ee.RotateRight:t|=p.isSome(this._ringDragData)&&this._ringDragData.scaleDir<0?ee.ScaleIn:ee.ScaleOut,t|=this.discManipulator.focused?ee.DiscFocused:ee.DiscUnfocused,(t|=this._ringManipulatorHasDelayedFocused?ee.RingFocused:ee.RingUnfocused)|(this.arrowManipulators.some(function(e){return e.manipulator.focused})?ee.ArrowFocused:ee.ArrowUnfocused)},enumerable:!0,configurable:!0}),t.prototype.reset=function(){this.graphic=null},t.prototype.handleInputEvent=function(e){"pointer-move"!==e.type&&"pointer-down"!==e.type&&"pointer-up"!==e.type||e.pointerType!==this._lastPointerEventType&&(this._lastPointerEventType=e.pointerType,this._updateManipulators())},t.prototype.initialize=function(){for(var e=this,t=function(e){var t=new A(w.createCylinderGeometry(T.DISC_HEIGHT,1,T.GEOMETRY_SEGMENTS,b.vec3f64.fromValues(0,0,1),b.vec3f64.fromValues(0,0,0)),"graphic-transform-disc"),r=L(),i=L(.5),n=y.mat4.fromScaling(v.mat4f64.create(),b.vec3f64.fromValues(T.DISC_RADIUS,T.DISC_RADIUS,T.DISC_RADIUS)),a=new N.Manipulator3D({view:e,renderObjects:[{geometry:t,material:r,stateMask:ee.RingUnfocused|ee.ArrowUnfocused,transform:n},{geometry:t,material:i,transform:n}],autoScaleRenderObjects:!1,radius:T.DISC_COLLISION_RADIUS,focusMultiplier:1,touchMultiplier:1,snapToPointer:!1,alignment:"on-the-ground",collisionType:{type:"disc",direction:b.vec3f64.fromValues(0,0,1)}});return a.visible=!1,a}(this.view),r=G(this.view),i=[],n=0;n<4;n++){var a=k(this.view),o=v.mat4f64.create();this._calculateArrowManipulatorTransform(n,o),i.push({manipulator:a,transform:o})}this.discManipulator=t,this.ringManipulator=r,this.arrowManipulators=i,this._handles.add([t.watch("grabbing",function(r){e._setSingleManipulatorInteractive(t,r)},!0),t.watch("dragging",function(t){p.isSome(e.graphic)&&(t?e.emit("graphic-translate-start",new B(e.graphic)):e.emit("graphic-translate-stop",new W(e.graphic)))},!0),m.watch(t,"focused",function(){p.isNone(e._scaleAnimationFrameTask)&&e._updateManipulators()}),m.init(this,"graphic.geometry",function(){p.isSome(e.graphic)&&p.isSome(e.graphic.geometry)&&"point"===e.graphic.geometry.type&&(t.mapPoint=R.clonePoint(e.graphic.geometry,ne)),e._updateManipulators()},!0)]),i.forEach(function(t,r){var i=t.manipulator;i.on("drag",function(t){e._handleArrowDrag(r)}),e._handles.add([m.watch(i,"focused",function(){e._updateManipulators()}),m.watch(i,"grabbing",function(t){e._setSingleManipulatorInteractive(i,t)}),m.watch(i,"dragging",function(t){p.isNone(e.graphic)||(t?e.emit("graphic-translate-start",new B(e.graphic)):(e._arrowDragData=null,e.emit("graphic-translate-stop",new W(e.graphic))))})])}),t.on("drag",function(r){if(!p.isNone(e.graphic)&&!p.isNone(e.graphic.geometry)&&"point"===e.graphic.geometry.type){var i=e.graphic.geometry.z,n=e.graphic.geometry,a=R.clonePoint(t.mapPoint,new M);a.z=i,e.graphic.geometry=a;var o=a.x-n.x,s=a.y-n.y;e.emit("graphic-translate",new X(e.graphic,o,s))}}),this._handles.add([r.watch("grabbing",function(t){e._setSingleManipulatorInteractive(r,t)},!0),r.watch("dragging",function(t){if(!1===t){var r=e._ringDragData;if(e._ringDragData=null,e._startSymbolDataPromise=null,e._startSymbolData=null,p.isSome(r)){var i=r.mode;if(p.isNone(i)||p.isSome(i)&&"scale"===i.type){var n=H(r);e._startScaleResetAnimation(n)}else e._updateManipulators();if(p.isSome(e.graphic)&&p.isSome(r.mode))switch(r.mode.type){case"rotate":e.emit("graphic-rotate-stop",new K(e.graphic));break;case"scale":e.emit("graphic-scale-stop",new Y(e.graphic))}}}else if(p.isSome(e.graphic)&&p.isSome(e._ringMode)&&"disabled"!==e._ringMode.type)switch(e._ringMode.type){case"rotate":e.emit("graphic-rotate-start",new q(e.graphic));break;case"scale":e.emit("graphic-scale-start",new Z(e.graphic))}},!0),m.watch(r,"focused",function(){p.isNone(e._scaleAnimationFrameTask)&&e._startRingFocusFrameTask()})]),r.on("drag",function(t){e._handleRingDrag(t.screenPoint)}),this.manipulators.add(t),this.manipulators.add(r),i.forEach(function(t){var r=t.manipulator;return e.manipulators.add(r)})},t.prototype.onHide=function(){this._removeFrameTasks()},t.prototype._handleArrowDrag=function(e){if(!p.isNone(this.graphic)&&!p.isNone(this.graphic.geometry)&&"point"===this.graphic.geometry.type){var t=this.arrowManipulators[e].manipulator,r=this.graphic.geometry,i=this.graphic.geometry.spatialReference,n=t.mapPoint,a=I.vectorToPoint(_.vec3.set(E.sv3d.get(),n.x,n.y,n.z),n.spatialReference,i),o=_.vec3.subtract(E.sv3d.get(),t.position,this.discManipulator.position);if(t.position=this.discManipulator.position,function(e,t){var r=e.longitude,i=t.longitude;if(null==r||null==i)return!1;var n=O.cyclicalDeg.shortestSignedDiff(r,i);return Math.abs(n)<90}(r,a)){var s=1/f.getMetersPerUnitForSR(i)*1e-4;if(p.isNone(this._arrowDragData)){if(z(this.view)){var c=this._calculateArrowManipulatorDirection(e,E.sv3d.get());D.vector.projectPoint(c,o,o);var l=_.vec3.add(o,o,this.discManipulator.position);if(!this.view.renderCoordsHelper.fromRenderCoords(l,a,i))return}else 0===e||2===e?a.x=r.x:a.y=r.y;var u=R.clonePoint(r,new M),h=a.x-r.x,d=a.y-r.y;if(Math.abs(h)>s||Math.abs(d)>s){var m=b.vec3f64.fromValues(h,d,0);_.vec3.normalize(m,m),this._arrowDragData={startPoint:u,dxDyMapConstrained:m}}}if(p.isSome(this._arrowDragData)){var g=this._arrowDragData;m=g.dxDyMapConstrained,u=g.startPoint;if(Math.abs(m[0])<s)a.x=u.x;else if(Math.abs(m[1])<s)a.y=u.y;else{var y=a.x-u.x,v=a.y-u.y,S=D.vector.projectPoint(m,_.vec3.set(E.sv3d.get(),y,v,0),E.sv3d.get());a.x=u.x+S[0],a.y=u.y+S[1]}var T=a.x-r.x,P=a.y-r.y;a.z=r.z,this.graphic.geometry=a,this.emit("graphic-translate",new X(this.graphic,T,P))}}}},t.prototype._handleRingDrag=function(e){var t=this,r=this.graphic;if(!p.isNone(r)&&!p.isNone(r.symbol)&&!p.isSome(this._startSymbolDataPromise)){var i=this._ringDragData,n=this._startSymbolData,a=d.screenPointObjectToArray(e,d.castScreenPointArray(E.sv2d.get())),o=D.ray.fromScreen(this.view.state.camera,a,ie),s=this.discManipulator.modelTransform;if(p.isNone(i)||p.isNone(n)){var c=b.vec3f64.fromValues(0,0,1);_.vec3.transformMat4(c,c,s);var u=b.vec3f64.clone(this.ringManipulator.position),h=D.plane.fromPositionAndNormal(u,c),f=b.vec3f64.create();D.plane.intersectRay(h,o,f)&&(this._ringDragData={origin:u,plane:h,angle:0,angleDir:0,scale:1,scaleDir:0,startPoint:f,endPoint:b.vec3f64.clone(f),mode:null},this._startSymbolDataPromise=F(this.view,r),this._startSymbolDataPromise.then(function(e){t._startSymbolData=e,t._startSymbolDataPromise=null},function(){t._startSymbolDataPromise=null}))}else{h=i.plane;if(D.plane.intersectRay(h,o,i.endPoint)){var m=H(i),g=(c=h,j.calculateInputRotationTransform(i.startPoint,i.endPoint,i.origin,c)),y=O.cyclicalPI.shortestSignedDiff(i.angle,g);i.angleDir=l.clamp(i.angleDir+y,-T.ROTATE_INDICATOR_DIRECTION_BUFFER,T.ROTATE_INDICATOR_DIRECTION_BUFFER),i.angle=g;var v=m-i.scale;i.scaleDir=l.clamp(i.scaleDir+v,-T.SCALE_INDICATOR_DIRECTION_BUFFER,T.SCALE_INDICATOR_DIRECTION_BUFFER),i.scale=m;var M=null,R=this._ringMode;if(p.isSome(R))M=R;else{var P=function(e,t){var r=e.origin,i=e.startPoint,n=e.endPoint,a=e.plane,o=U(i,t,E.sv3d.get()),s=U(n,t,E.sv3d.get());if(_.vec3.squaredDistance(o,s)<T.DRAG_THRESHOLD_PX*T.DRAG_THRESHOLD_PX)return null;var c=_.vec3.subtract(E.sv3d.get(),i,r),l=_.vec3.cross(E.sv3d.get(),c,a),p=i,u=_.vec3.add(E.sv3d.get(),p,l),h=U(r,t,E.sv3d.get()),d=o,f=U(u,t,E.sv3d.get()),m=_.vec3.subtract(E.sv3d.get(),f,d),g=_.vec3.subtract(E.sv3d.get(),o,h),y=D.ray.wrap(d,m),v=D.ray.wrap(h,g);return D.ray.distance2(y,s)<D.ray.distance2(v,s)?"rotate":"scale"}(i,this.view.state.camera);if(p.isSome(P)){switch(P){case"rotate":this.emit("graphic-rotate-start",new q(r));break;case"scale":this.emit("graphic-scale-start",new Z(r))}M="scale"===P?{type:"scale"}:{type:"rotate",startAngle:g}}}if(i.mode=M,this._updateManipulators(),p.isSome(M)&&"disabled"!==M.type){var I=r.symbol.clone();switch(function(e,t,r,i){e.symbolLayers.forEach(function(e,n){var a=t.symbolLayers[n],o=a.heading,s=a.size;"object"===e.type&&(e.heading=(p.isSome(o)?o:0)-S.toDegree(r),p.isSome(s)&&"width"in s&&(e.width=s.width*i,e.depth=s.depth*i,e.height=s.height*i))})}(I,n,this._calculateSymbolRotateAngle(M),this._calculateSymbolScaleFactor(M)),r.symbol=I,M.type){case"rotate":this.emit("graphic-rotate",new J(r,S.toDegree(g)));break;case"scale":this.emit("graphic-scale",new Q(r,m))}}}}}},t.prototype._calculateSymbolRotateAngle=function(e){return void 0===e&&(e=this._ringMode),p.isNone(e)||"rotate"!==e.type||p.isNone(this._ringDragData)?0:this._ringDragData.angle-e.startAngle},t.prototype._calculateSymbolScaleFactor=function(e){return void 0===e&&(e=this._ringMode),p.isNone(e)||"scale"!==e.type||p.isNone(this._ringDragData)?1:this._ringDragData.scale},t.prototype._shouldAllowModeType=function(e){return"scale"===e?this.enableScaling:!(p.isNone(this.graphic)||!this.enableRotation)&&this.graphic.symbol.symbolLayers.some(function(e){return"object"===e.type})},t.prototype._updateManipulators=function(e){if(!e){var t=this._calculateSymbolScaleFactor();e=y.mat4.fromScaling(E.sm4d.get(),_.vec3.set(E.sv3d.get(),t,t,1))}var r=this._manipulatorState,i=this._getManipulatorRotationAngle(),n=y.mat4.identity(E.sm4d.get());0!==i&&y.mat4.rotate(n,n,i,b.vec3f64.fromValues(0,0,1));var a=this.discManipulator.position,o=this.view.renderCoordsHelper.basisMatrixAtPosition(a,E.sm4d.get()),s=e?y.mat4.multiply(E.sm4d.get(),o,e):o,c=p.isSome(this.graphic)&&null!=this.graphic.geometry,l=z(this.view)?y.mat4.multiply(E.sm4d.get(),s,n):s;this.discManipulator.state=r,this.discManipulator.modelTransform=l,this.discManipulator.visible=c,this.arrowManipulators.forEach(function(e){var t=e.manipulator,i=e.transform,n=y.mat4.multiply(E.sm4d.get(),l,i);t.state=r,t.position=a,t.modelTransform=n,t.visible=c});var u=y.mat4.multiply(E.sm4d.get(),s,n);this.ringManipulator.state=r,this.ringManipulator.position=this.discManipulator.position,this.ringManipulator.modelTransform=u;var h=this._ringMode,d=p.isSome(h)&&"disabled"===h.type;this.ringManipulator.visible=c&&!d},t.prototype._setSingleManipulatorInteractive=function(e,t){if(!t)return this.discManipulator.interactive=!0,this.ringManipulator.interactive=!0,void this.arrowManipulators.forEach(function(e){e.manipulator.interactive=!0});this.discManipulator.interactive=this.discManipulator===e,this.ringManipulator.interactive=this.ringManipulator===e,this.arrowManipulators.forEach(function(t){var r=t.manipulator;r.interactive=r===e})},t.prototype._startRingFocusFrameTask=function(){var e=this;this._removeFrameTasks();var t=0;this._ringDelayedFocusFrameTask=h.addFrameTask({update:function(r){var i=r.deltaTime;if(t+=i,!e.ringManipulator.focused)return e._ringManipulatorHasDelayedFocused=!1,e._removeFrameTasks(),void e._updateManipulators();t>T.RING_INDICATOR_DELAY_MS&&(e._ringManipulatorHasDelayedFocused=!0,e._removeFrameTasks(),e._updateManipulators())}})},t.prototype._startScaleResetAnimation=function(e){var t=this;this._removeFrameTasks();var r=e;this._scaleAnimationFrameTask=h.addFrameTask({update:function(e){var i=e.deltaTime;if(r+=((r+1)/2-r)*Math.min(i*T.RING_RESET_ANIMATION_SPEED_FACTOR,1),Math.abs(r-1)<.01)return t._removeFrameTasks(),void t._updateManipulators();t._ringManipulatorHasDelayedFocused=!1;var n=y.mat4.fromScaling(E.sm4d.get(),_.vec3.set(E.sv3d.get(),r,r,1));t._updateManipulators(n)}})},t.prototype._getManipulatorRotationAngle=function(){var e=p.isSome(this.graphic)?function(e){var t=e.symbol.symbolLayers.find(function(e){return"object"===e.type});return t&&t.heading||0}(this.graphic):0,t=S.toRadian(-e);if(p.isNone(this._ringDragData)||p.isSome(this._ringDragData.mode))return t;var r=this._ringDragData,i=r.origin,n=r.plane,a=r.startPoint,o=r.endPoint,s=n;return t+j.calculateInputRotationTransform(a,o,i,s)},t.prototype._calculateArrowManipulatorTransform=function(e,t){var r=y.mat4.identity(E.sm4d.get());y.mat4.fromZRotation(r,e*Math.PI/2);var i=y.mat4.identity(E.sm4d.get());return y.mat4.fromTranslation(i,_.vec3.set(E.sv3d.get(),0,T.DISC_TRANSLATE_ARROW_OFFSET,0)),y.mat4.multiply(t,r,i)},t.prototype._calculateArrowManipulatorDirection=function(e,t){var r=this.discManipulator.modelTransform;return 0===e||2===e?_.vec3.set(t,r[4],r[5],r[6]):_.vec3.set(t,r[0],r[1],r[2])},t.prototype._removeFrameTasks=function(){this.ringManipulator&&(this._ringManipulatorHasDelayedFocused=this.ringManipulator.focused),p.isSome(this._ringDelayedFocusFrameTask)&&(this._ringDelayedFocusFrameTask.remove(),this._ringDelayedFocusFrameTask=null),p.isSome(this._scaleAnimationFrameTask)&&(this._scaleAnimationFrameTask.remove(),this._scaleAnimationFrameTask=null)},r([g.property({constructOnly:!0,nonNullable:!0})],t.prototype,"view",void 0),r([g.property({value:null})],t.prototype,"graphic",null),r([g.property()],t.prototype,"enableRotation",void 0),r([g.property()],t.prototype,"enableScaling",void 0),r([g.property({readOnly:!0})],t.prototype,"type",void 0),r([g.subclass("esri.views.3d.interactive.editingTools.graphicTransform3D.GraphicTransform3DTool")],t)}(g.declared(o.EventedMixin(C.InteractiveToolBase)));t.GraphicTransform3DTool=$;var ee,te=b.vec3f64.create(),re=d.createScreenPointArray();!function(e){e.Unlocked=16,e.ScaleIn=32,e.ScaleOut=64,e.RotateLeft=128,e.RotateRight=256,e.DiscFocused=512,e.DiscUnfocused=1024,e.RingFocused=2048,e.RingUnfocused=4096,e.ArrowFocused=8192,e.ArrowUnfocused=16384,e.TouchInput=32768}(ee||(ee={}));var ie=D.ray.create(),ne=R.makeDehydratedPoint(0,0,0,null)}.apply(null,i))||(e.exports=n)},2510:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.HANDLE_COLOR=[1,.5,0],t.GEOMETRY_SEGMENTS=128,t.DISC_RADIUS=70,t.DISC_COLLISION_RADIUS=80,t.DISC_HEIGHT=.02,t.DISC_TRANSLATE_ARROW_SIZE=54,t.DISC_TRANSLATE_ARROW_OFFSET=100,t.RING_RADIUS=160,t.RING_HEIGHT=.5,t.RING_THICKNESS=24,t.INDICATOR_THICKNESS=9,t.INNER_INDICATOR_RADIUS=t.RING_RADIUS+30,t.OUTER_INDICATOR_RADIUS=t.RING_RADIUS+53,t.ROTATE_INDICATOR_ARROW_TIP_LENGTH=60,t.ROTATE_INDICATOR_ARROW_TIP_RADIUS=23,t.ROTATE_INDICATOR_ARC_LENGTH=5*Math.PI/12,t.SCALE_INDICATOR_ARC_LENGTH=1*Math.PI/3,t.DRAG_THRESHOLD_PX=10,t.ROTATE_INDICATOR_ARROW_PLACEMENT_PERCENTAGE=.2,t.SCALE_INDICATOR_OFFSET1=30,t.SCALE_INDICATOR_OFFSET2=53,t.SCALE_INDICATOR_DIRECTION_BUFFER=.2,t.ROTATE_INDICATOR_DIRECTION_BUFFER=.3,t.RING_INDICATOR_DELAY_MS=200,t.RING_RESET_ANIMATION_SPEED_FACTOR=3,t.ALIGN_ARROWS_SCALE_THRESHOLD=1e6}.apply(null,i))||(e.exports=n)},464:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(2503),r(2506),r(2509)],void 0===(n=function(e,t,r,i,n){Object.defineProperty(t,"__esModule",{value:!0}),t.GraphicMove3DTool=r.GraphicMove3DTool,t.GraphicReshape3DTool=i.GraphicReshape3DTool,t.GraphicTransform3DTool=n.GraphicTransform3DTool}.apply(null,i))||(e.exports=n)}}]);