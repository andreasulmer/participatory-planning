(function(){(this||window).webpackJsonp.registerAbsMids({"esri/tasks/support/FeatureSet":1575,"esri/tasks/PrintTask":1606,"esri/geometry/support/normalizeUtils":1635,"esri/tasks/geometry/cut":1636,"esri/tasks/geometry/simplify":1637,"esri/tasks/support/GPMessage":1683,"dojox/gfx/_base":1691,"dojox/gfx/matrix":1712,"dojox/gfx/shape":1864,"dojox/gfx/canvas":2304,"dojox/gfx/path":2305,"dojox/gfx/arc":2306,"dojox/gfx/decompose":2307,"dojox/gfx/bezierutils":2308,"esri/tasks/Geoprocessor":2309,"esri/layers/support/MapImage":2310,"esri/tasks/support/DataFile":2311,"esri/tasks/support/JobInfo":2312,"esri/tasks/support/LinearUnit":2313,"esri/tasks/support/ParameterValue":2314,"esri/tasks/support/RasterData":2315,"esri/tasks/support/fileFormat":2316,"esri/tasks/support/layoutTemplate":2317,"esri/tasks/support/printTaskUtils":2318,"esri/tasks/support/PrintTemplate":2319})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[48,110],{1575:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(1),r(2),r(36),r(97),r(27),r(12),r(9),r(0),r(40),r(57),r(633)],void 0===(n=function(e,t,r,i,n,a,s,o,l,u,h,c,p){var y=new s.default({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent"}),f=function(e){function t(t){var r=e.call(this,t)||this;return r.displayFieldName=null,r.exceededTransferLimit=!1,r.features=[],r.fields=null,r.geometryType=null,r.hasM=!1,r.hasZ=!1,r.queryGeometry=null,r.spatialReference=null,r}return i(t,e),t.prototype.readFeatures=function(e,t){for(var r=h.fromJSON(t.spatialReference),i=[],n=0;n<e.length;n++){var s=e[n],o=a.fromJSON(s),u=s.geometry&&s.geometry.spatialReference;l.isSome(o.geometry)&&!u&&(o.geometry.spatialReference=r),i.push(o)}return i},t.prototype.writeGeometryType=function(e,t,r,i){if(e)y.write(e,t,r,i);else{var n=this.features;if(n)for(var a=0,s=n;a<s.length;a++){var o=s[a];if(o&&l.isSome(o.geometry))return void y.write(o.geometry.type,t,r,i)}}},t.prototype.writeSpatialReference=function(e,t,r,i){if(e)t.spatialReference=e.toJSON();else{var n=this.features;if(n)for(var a=0,s=n;a<s.length;a++){var o=s[a];o&&l.isSome(o.geometry)&&o.geometry.spatialReference&&(t.spatialReference=o.geometry.spatialReference.toJSON())}}},t.prototype.toJSON=function(e){var t=this.write(null);if(t.features&&Array.isArray(e)&&e.length>0)for(var r=0;r<t.features.length;r++){var i=t.features[r];if(i.geometry){var n=e&&e[r];i.geometry=n&&n.toJSON()||i.geometry}}return t},t.prototype.quantize=function(e){for(var t=e.scale,r=t[0],i=t[1],n=e.translate,a=n[0],s=n[1],o=this.features,u=this._getQuantizationFunction(this.geometryType,function(e){return Math.round((e-a)/r)},function(e){return Math.round((s-e)/i)}),h=0,c=o.length;h<c;h++)u(l.expect(o[h].geometry))||(o.splice(h,1),h--,c--);return this.transform=e,this},t.prototype.unquantize=function(){var e=this,t=e.geometryType,r=e.features,i=e.transform;if(!i)return this;for(var n=i.translate,a=n[0],s=n[1],o=i.scale,u=o[0],h=o[1],c=this._getHydrationFunction(t,function(e){return e*u+a},function(e){return s-e*h}),p=0,y=r;p<y.length;p++){var f=y[p].geometry;l.isSome(f)&&c(f)}return this},t.prototype._quantizePoints=function(e,t,r){for(var i,n,a=[],s=0,o=e.length;s<o;s++){var l=e[s];if(s>0){var u=t(l[0]),h=r(l[1]);u===i&&h===n||(a.push([u-i,h-n]),i=u,n=h)}else i=t(l[0]),n=r(l[1]),a.push([i,n])}return a.length>0?a:null},t.prototype._getQuantizationFunction=function(e,t,r){var i=this;return"point"===e?function(e){return e.x=t(e.x),e.y=r(e.y),e}:"polyline"===e||"polygon"===e?function(e){for(var n=c.isPolygon(e)?e.rings:e.paths,a=[],s=0,o=n.length;s<o;s++){var l=n[s],u=i._quantizePoints(l,t,r);u&&a.push(u)}return a.length>0?(c.isPolygon(e)?e.rings=a:e.paths=a,e):null}:"multipoint"===e?function(e){var n;return(n=i._quantizePoints(e.points,t,r)).length>0?(e.points=n,e):null}:"extent"===e?function(e){return e}:null},t.prototype._getHydrationFunction=function(e,t,r){return"point"===e?function(e){e.x=t(e.x),e.y=r(e.y)}:"polyline"===e||"polygon"===e?function(e){for(var i,n,a=c.isPolygon(e)?e.rings:e.paths,s=0,o=a.length;s<o;s++)for(var l=a[s],u=0,h=l.length;u<h;u++){var p=l[u];u>0?(i+=p[0],n+=p[1]):(i=p[0],n=p[1]),p[0]=t(i),p[1]=r(n)}}:"extent"===e?function(e){e.xmin=t(e.xmin),e.ymin=r(e.ymin),e.xmax=t(e.xmax),e.ymax=r(e.ymax)}:"multipoint"===e?function(e){for(var i,n,a=e.points,s=0,o=a.length;s<o;s++){var l=a[s];s>0?(i+=l[0],n+=l[1]):(i=l[0],n=l[1]),l[0]=t(i),l[1]=r(n)}}:void 0},r([u.property({type:String,json:{write:!0}})],t.prototype,"displayFieldName",void 0),r([u.property({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],t.prototype,"exceededTransferLimit",void 0),r([u.property({type:[a],json:{write:!0}})],t.prototype,"features",void 0),r([u.reader("features")],t.prototype,"readFeatures",null),r([u.property({type:[p],json:{write:!0}})],t.prototype,"fields",void 0),r([u.property({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:y.read}}})],t.prototype,"geometryType",void 0),r([u.writer("geometryType")],t.prototype,"writeGeometryType",null),r([u.property({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],t.prototype,"hasM",void 0),r([u.property({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],t.prototype,"hasZ",void 0),r([u.property({types:n.geometryTypes,json:{read:c.fromJSON,write:!0}})],t.prototype,"queryGeometry",void 0),r([u.property({type:h,json:{write:!0}})],t.prototype,"spatialReference",void 0),r([u.writer("spatialReference")],t.prototype,"writeSpatialReference",null),r([u.property({json:{write:!0}})],t.prototype,"transform",void 0),r([u.subclass("esri.tasks.support.FeatureSet")],t)}(u.declared(o.JSONSupport));return f.prototype.toJSON.isDefaultToJSON=!0,f||(f={}),f}.apply(null,i))||(e.exports=n)},1606:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(4),r(11),r(2),r(1),r(10),r(2304),r(147),r(44),r(58),r(27),r(15),r(7),r(17),r(31),r(0),r(91),r(655),r(2309),r(636),r(2316),r(2317),r(2318),r(2319),r(402)],void 0===(n=function(e,t,r,i,n,a,s,o,l,u,h,c,p,y,f,d,g,x,m,v,b,_,S,w,T,P){function M(e){return e&&(e.path||"image/svg+xml"===e.contentType)}var L={Feet:"ft",Kilometers:"km",Meters:"m",Miles:"mi"},k=new c.default({esriFeet:"Feet",esriKilometers:"Kilometers",esriMeters:"Meters",esriMiles:"Miles"}),C=new c.default({esriExecutionTypeSynchronous:"sync",esriExecutionTypeAsynchronous:"async"}),R=new P({returnGeometry:!0});return function(e){function t(t){var r=e.call(this,t)||this;return r._ssExtent=null,r._legendLayers=[],r._legendLayerNameMap={},r._gpServerUrl=null,r._cimVersion=null,r._is11xService=!1,r._gpMetadata=null,r.updateDelay=1e3,r}return n(t,e),Object.defineProperty(t.prototype,"_geoprocessor",{get:function(){return new v({url:this.url})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mode",{get:function(){return this._gpMetadata&&this._gpMetadata.executionType?C.fromJSON(this._gpMetadata.executionType):"sync"},enumerable:!0,configurable:!0}),t.prototype.execute=function(e,t){var r=this,i=this.url,n=i.lastIndexOf("/GPServer/");return n>0&&(i=i.slice(0,n+9)),y.resolve().then(function(){return r._gpServerUrl===i?{data:r._gpMetadata}:(r._gpServerUrl=i,u(i,{query:{f:"json"}}))}).then(function(t){return r._gpMetadata=t.data,r._cimVersion=r._gpMetadata.cimVersion,r._is11xService=!!r._cimVersion,h.safeCast(r._getGpPrintParams(e))}).then(function(e){var i=function(e){return"sync"===r.mode?e.results&&e.results[0]&&e.results[0].value:r._geoprocessor.getResultData(e.jobId,"Output_File",t).then(function(e){return e.value})};return"async"===r.mode?r._geoprocessor.submitJob(e,t).then(function(e){return r._geoprocessor.waitForJobCompletion(e.jobId,{interval:r.updateDelay}).then(i)}):r._geoprocessor.execute(e,t).then(i)})},t.prototype._createOperationalLayers=function(e,t){return i(this,void 0,void 0,function(){var r,i,n,a,o,l,u,h,c;return s(this,function(s){switch(s.label){case 0:r=[],i={layerView:null,printTemplate:t,view:e},n=0,t.preserveScale&&(n=t.outScale||e.scale),a=w.getVisibleLayerViews(e,n),o=0,l=a,s.label=1;case 1:return o<l.length?(u=l[o],!(h=u.layer).loaded||w.isGroupLayer(h)?[3,26]:(c=void 0,i.layerView=u,w.isBingMapsLayer(h)?(c=this._createBingMapsLayerJSON(h,i),[3,25]):[3,2])):[3,27];case 2:return w.isCSVLayer(h)?[4,this._createCSVLayerJSON(h,i)]:[3,4];case 3:return c=s.sent(),[3,25];case 4:return w.isFeatureLayer(h)?[4,this._createFeatureLayerJSON(h,i)]:[3,6];case 5:return c=s.sent(),[3,25];case 6:return w.isGraphicsLayer(h)?[4,this._createGraphicsLayerJSON(h,i)]:[3,8];case 7:return c=s.sent(),[3,25];case 8:return w.isImageryLayer(h)?(c=this._createImageryLayerJSON(h,i),[3,25]):[3,9];case 9:return w.isKMLLayer(h)?[4,this._createKMLLayerJSON(h,i)]:[3,11];case 10:return c=s.sent(),[3,25];case 11:return w.isMapImageLayer(h)?(c=this._createMapImageLayerJSON(h,i),[3,25]):[3,12];case 12:return w.isMapNotesLayer(h)?[4,this._createMapNotesLayerJSON(h,i)]:[3,14];case 13:return c=s.sent(),[3,25];case 14:return w.isOpenStreetMapLayer(h)?(c=this._createOpenStreetMapLayerJSON(h,i),[3,25]):[3,15];case 15:return w.isStreamLayer(h)?[4,this._createStreamLayerJSON(h,i)]:[3,17];case 16:return c=s.sent(),[3,25];case 17:return w.isTileLayer(h)?(c=this._createTileLayerJSON(h,i),[3,25]):[3,18];case 18:return w.isVectorTileLayer(h)?[4,this._createVectorTileLayerJSON(h,i)]:[3,20];case 19:return c=s.sent(),[3,25];case 20:return w.isWebTileLayer(h)?(c=this._createWebTileLayerJSON(h,i),[3,25]):[3,21];case 21:return w.isWMSLayer(h)?(c=this._createWMSLayerJSON(h,i),[3,25]):[3,22];case 22:return w.isWMTSLayer(h)?(c=this._createWMTSLayerJSON(h,i),[3,25]):[3,23];case 23:return[4,this._createScreenshotJSON(h,i)];case 24:c=s.sent(),s.label=25;case 25:c&&(Array.isArray(c)?r.push.apply(r,c):(c.id=h.id,c.title=this._legendLayerNameMap[h.id]||h.title,c.opacity=h.opacity,c.minScale=h.minScale||0,c.maxScale=h.maxScale||0,r.push(c))),s.label=26;case 26:return o++,[3,1];case 27:return n&&r.forEach(function(e){e.minScale=0,e.maxScale=0}),e.graphics&&e.graphics.length?[4,this._createFeatureCollectionJSON(null,e.graphics,t)]:[3,29];case 28:(c=s.sent())&&r.push(c),s.label=29;case 29:return[2,r]}})})},t.prototype._createBingMapsLayerJSON=function(e,t){return{culture:e.culture,key:e.key,type:"BingMaps"+("aerial"===e.style?"Aerial":"hybrid"===e.style?"Hybrid":"Road")}},t.prototype._createCSVLayerJSON=function(e,t){var r=t.layerView,n=t.printTemplate;return i(this,void 0,void 0,function(){var t,i;return s(this,function(a){switch(a.label){case 0:return this._legendLayers&&this._legendLayers.push({id:e.id}),this._is11xService?(t={type:"CSV"},e.write(t,{origin:"web-map"}),delete t.popupInfo,delete t.layerType,t.showLabels=n.showLabels&&e.labelsVisible,[3,3]):[3,1];case 1:return[4,this._getGraphics(r)];case 2:return i=a.sent(),[2,this._createFeatureCollectionJSON(e,i,n)];case 3:return[2,t]}})})},t.prototype._createFeatureCollectionJSON=function(e,t,r){return i(this,void 0,void 0,function(){var i,n,a,o,l,u,h,c,p,y,f,d,g,m,v,b,_,S=this;return s(this,function(T){switch(T.label){case 0:i=e,n=w.createPolygonLayer(),a=w.createPolylineLayer(),o=w.createPointLayer(),l=w.createMultipointLayer(),(u=w.createPointLayer()).layerDefinition.name="textLayer",delete u.layerDefinition.drawingInfo,i&&("esri.layers.FeatureLayer"===i.declaredClass||"esri.layers.StreamLayer"===i.declaredClass?n.layerDefinition.name=a.layerDefinition.name=o.layerDefinition.name=l.layerDefinition.name=this._legendLayerNameMap[i.id]||i.get("arcgisProps.title")||i.title:"esri.layers.GraphicsLayer"===i.declaredClass&&(t=i.graphics.items)),h=i&&i.renderer&&"esri.renderer.SimpleRenderer"===i.renderer.declaredClass,i&&i.renderer&&"function"!=typeof i.get("renderer.field")?(c=i.renderer.toJSON(),n.layerDefinition.drawingInfo.renderer=c,a.layerDefinition.drawingInfo.renderer=c,o.layerDefinition.drawingInfo.renderer=c,l.layerDefinition.drawingInfo.renderer=c):(delete n.layerDefinition.drawingInfo,delete a.layerDefinition.drawingInfo,delete o.layerDefinition.drawingInfo,delete l.layerDefinition.drawingInfo),p=i&&i.fields,y=i&&i.renderer,f=[],y&&"function"!=typeof i.get("renderer.field")&&("class-breaks"===y.type?(p||(p=[{name:y.field,type:"esriFieldTypeDouble"}],y.normalizationField&&p.push({name:y.normalizationField,type:"esriFieldTypeDouble"})),y.field&&f.push(y.field),y.normalizationField&&f.push(y.normalizationField)):"unique-value"===y.type&&(p||(p=[{name:y.field,type:"esriFieldTypeString"}],y.field2&&p.push({name:y.field2,type:"esriFieldTypeString"}),y.field3&&p.push({name:y.field3,type:"esriFieldTypeString"})),y.field&&f.push(y.field),y.field2&&f.push(y.field2),y.field3&&f.push(y.field3))),p&&(n.layerDefinition.fields=p,a.layerDefinition.fields=p,o.layerDefinition.fields=p,l.layerDefinition.fields=p),d=t&&t.length,m=function(e){var h,c,p,y;return s(this,function(s){switch(s.label){case 0:return!1!==(h=t[e]||t.getItemAt(e)).visible&&h.geometry?((g=h.toJSON()).hasOwnProperty("popupTemplate")&&delete g.popupTemplate,g.geometry&&g.geometry.z&&delete g.geometry.z,g.symbol&&g.symbol.outline&&"esriCLS"===g.symbol.outline.type&&!v._is11xService?[2,"continue"]:(g.symbol&&g.symbol.outline&&g.symbol.outline.color&&g.symbol.outline.color[3]&&!v._is11xService&&(g.symbol.outline.color[3]=255),i&&i.renderer&&!g.symbol&&("function"==typeof i.renderer.field||i.renderer.compiledFunc||i.renderer.hasVisualVariables())?[4,(c=i.renderer).getSymbolAsync(h)]:[3,2])):[2,"continue"];case 1:if(!(p=s.sent()))return[2,"continue"];g.symbol=p.toJSON(),c.hasVisualVariables()&&w.applyVisualVariables(g.symbol,{renderer:c,graphic:h,symbol:p}),s.label=2;case 2:return g.symbol&&(g.symbol.angle||delete g.symbol.angle,M(g.symbol)?g.symbol=v._convertSvgToPictureMarkerSymbolJson(g.symbol):g.symbol.text&&delete g.attributes),r&&r.forceFeatureAttributes||(i&&i.renderer&&"simple"===i.renderer.type?delete g.attributes:f.length&&(y={},f.forEach(function(e){g.attributes&&g.attributes.hasOwnProperty(e)&&(y[e]=g.attributes[e])}),g.attributes=y)),"polygon"===h.geometry.type?n.featureSet.features.push(g):"polyline"===h.geometry.type?a.featureSet.features.push(g):"point"===h.geometry.type?g.symbol&&g.symbol.text?u.featureSet.features.push(g):o.featureSet.features.push(g):"multipoint"===h.geometry.type?l.featureSet.features.push(g):"extent"===h.geometry.type&&(g.geometry=x.fromExtent(h.geometry).toJSON(),n.featureSet.features.push(g)),[2]}})},v=this,b=0,T.label=1;case 1:return b<d?[5,m(b)]:[3,4];case 2:T.sent(),T.label=3;case 3:return b++,[3,1];case 4:return(_=[n,a,l,o,u].filter(function(e){return e.featureSet.features.length>0})).forEach(function(e){var t=e.featureSet.features.every(function(e){return e.symbol});!t&&!h||r&&r.forceFeatureAttributes||e.featureSet.features.forEach(function(e){delete e.attributes}),t&&delete e.layerDefinition.drawingInfo,e.layerDefinition.drawingInfo&&e.layerDefinition.drawingInfo.renderer&&S._convertSvgRenderer(e.layerDefinition.drawingInfo.renderer)}),[2,_.length?{featureCollection:{layers:_}}:null]}})})},t.prototype._createFeatureLayerJSON=function(e,t){return i(this,void 0,void 0,function(){var r,i,n,a,o,l,u,h,c,p;return s(this,function(s){switch(s.label){case 0:return this._legendLayers&&this._legendLayers.push({id:e.id}),(i=e.renderer)&&"dot-density"===i.type?[2,this._createScreenshotJSON(e,t)]:(n=t.layerView,a=t.printTemplate,o=t.view,l=i&&("valueExpression"in i&&i.valueExpression||"hasVisualVariables"in i&&i.hasVisualVariables()),u=e.source&&"feature-layer"!==e.source.type,!this._is11xService&&l||e.featureReduction||u||!i||"field"in i&&null!=i.field&&("string"!=typeof i.field||!e.getField(i.field))?[3,1]:(r={},this._setURLandToken(r,e),e.write(r,{origin:"web-map"}),delete r.layerType,delete r.popupInfo,delete r.visibility,r.showLabels=a.showLabels&&e.labelsVisible,r.layerDefinition&&r.layerDefinition.drawingInfo&&r.layerDefinition.drawingInfo.renderer&&(this._convertSvgRenderer(r.layerDefinition.drawingInfo.renderer),"visualVariables"in i&&i.visualVariables&&i.visualVariables[0]&&("size"===(h=i.visualVariables[0]).type&&h.maxSize&&"number"!=typeof h.maxSize&&h.minSize&&"number"!=typeof h.minSize&&(c=m.getSizeRangeAtScale(h,o.scale),r.layerDefinition.drawingInfo.renderer.visualVariables[0].minSize=c.minSize,r.layerDefinition.drawingInfo.renderer.visualVariables[0].maxSize=c.maxSize))),[3,4]));case 1:return[4,this._getGraphics(n)];case 2:return p=s.sent(),[4,this._createFeatureCollectionJSON(e,p,a)];case 3:r=s.sent(),s.label=4;case 4:return[2,r]}})})},t.prototype._createGraphicsLayerJSON=function(e,t){var r=t.printTemplate;return i(this,void 0,void 0,function(){return s(this,function(t){return[2,this._createFeatureCollectionJSON(e,null,r)]})})},t.prototype._createImageryLayerJSON=function(e,t){this._legendLayers&&this._legendLayers.push({id:e.id});var r={bandIds:e.bandIds,compressionQuality:e.compressionQuality,format:e.format,interpolation:e.interpolation};return e.mosaicRule&&(r.mosaicRule=e.mosaicRule.toJSON()),e.renderingRule&&(r.renderingRule=e.renderingRule.toJSON()),this._setURLandToken(r,e),r},t.prototype._createKMLLayerJSON=function(e,t){return i(this,void 0,void 0,function(){var i,n,a,o,l,u,h;return s(this,function(s){switch(s.label){case 0:return i=t.printTemplate,this._is11xService?(n={type:"kml"},e.write(n,{origin:"web-map"}),delete n.layerType,n.url=d.normalize(e.url),[2,n]):(a=[],(o=t.layerView).allVisibleMapImages.forEach(function(t,r){var i={id:e.id+"_image"+r,type:"image",title:e.id,minScale:e.minScale||0,maxScale:e.maxScale||0,opacity:e.opacity,extent:t.extent};"data:image/png;base64,"===t.href.substr(0,22)?i.imageData=t.href.substr(22):i.url=t.href,a.push(i)}),l=o.allVisiblePoints.items.concat(o.allVisiblePolylines.items,o.allVisiblePolygons.items),h=[{id:e.id}],[4,this._createFeatureCollectionJSON(null,l,i)]);case 1:return u=r.apply(void 0,h.concat([s.sent()])),a.push(u),[2,a]}})})},t.prototype._createMapImageLayerJSON=function(e,t){var r,i=t.view,n={id:e.id,subLayerIds:[]},a=[],s=i.scale,o=function(e){var t=0===s,r=0===e.minScale||s<=e.minScale,i=0===e.maxScale||s>=e.maxScale;if(e.visible&&(t||r&&i))if(e.sublayers)e.sublayers.forEach(o);else{var l=e.toExportImageJSON().drawingInfo,u=e.toJSON();u.layerDefinition.drawingInfo=l,a.unshift(u),n.subLayerIds.push(e.id)}};return e.sublayers&&e.sublayers.forEach(o),a.length&&(r={layers:a=a.map(function(e){return{id:e.id,name:e.name,layerDefinition:e.layerDefinition}}),visibleLayers:n.subLayerIds},this._setURLandToken(r,e),this._legendLayers.push(n)),r},t.prototype._createMapNotesLayerJSON=function(e,t){var r=t.layerView,n=t.printTemplate;return i(this,void 0,void 0,function(){var e,t,i,a,o;return s(this,function(s){switch(s.label){case 0:e=[],t=0,i=r.graphicsViews,s.label=1;case 1:return t<i.length?(a=i[t],[4,this._createFeatureCollectionJSON(a,a.graphics,n)]):[3,4];case 2:(o=s.sent())&&e.push.apply(e,o.featureCollection.layers),s.label=3;case 3:return t++,[3,1];case 4:return[2,{featureCollection:{layers:e}}]}})})},t.prototype._createOpenStreetMapLayerJSON=function(e,t){return{type:"OpenStreetMap"}},t.prototype._createScreenshotJSON=function(e,t){var r=t.printTemplate,n=t.view;return i(this,void 0,void 0,function(){var t,i,a,o,l,u,h,c,p,y;return s(this,function(s){switch(s.label){case 0:return t={type:"image"},i={format:"png",ignoreBackground:!0,layers:[e],rotation:0},a=this._ssExtent||n.extent.clone(),o=96,l=!0,u=!0,r.exportOptions&&((h=r.exportOptions).dpi>0&&(o=h.dpi),h.width>0&&(l=h.width%2==n.width%2),h.height>0&&(u=h.height%2==n.height%2)),"map-only"!==r.layout||!r.preserveScale||r.outScale&&r.outScale!==n.scale||96!==o||l&&u||(i.area={x:0,y:0,width:n.width,height:n.height},l||(i.area.width-=1),u||(i.area.height-=1),this._ssExtent||(c=n.toMap(f.createScreenPoint(i.area.width,i.area.height)),a.ymin=c.y,a.xmax=c.x,this._ssExtent=a)),t.extent=a.clone()._normalize(!0).toJSON(),[4,n.takeScreenshot(i)];case 1:return p=s.sent(),y=d.dataComponents(p.dataUrl),t.imageData=y.data,[2,t]}})})},t.prototype._createStreamLayerJSON=function(e,t){var r=t.layerView,n=t.printTemplate;return i(this,void 0,void 0,function(){var t;return s(this,function(i){switch(i.label){case 0:return this._legendLayers&&this._legendLayers.push({id:e.id}),[4,this._getGraphics(r)];case 1:return t=i.sent(),[2,this._createFeatureCollectionJSON(e,t,n)]}})})},t.prototype._createTileLayerJSON=function(e,t){var r={};return this._setURLandToken(r,e),r},t.prototype._createVectorTileLayerJSON=function(e,t){return i(this,void 0,void 0,function(){var r,i,n;return s(this,function(a){return this._is11xService&&e.serviceUrl&&e.styleUrl&&(r=l.id&&l.id.findCredential(e.styleUrl),i=l.id&&l.id.findCredential(e.serviceUrl),!r&&!i||"2.1.0"!==this._cimVersion)?((n={type:"VectorTileLayer"}).styleUrl=d.normalize(e.styleUrl),r&&(n.token=r.token),i&&i.token!==n.token&&(n.additionalTokens=[{url:e.serviceUrl,token:i.token}]),[2,n]):[2,this._createScreenshotJSON(e,t)]})})},t.prototype._createWebTileLayerJSON=function(e,t){var r={type:"WebTiledLayer",urlTemplate:e.urlTemplate.replace(/\${/g,"{"),credits:e.copyright};return e.subDomains&&e.subDomains.length>0&&(r.subDomains=e.subDomains),r},t.prototype._createWMSLayerJSON=function(e,t){var r,i=[],n=function(e){e.visible&&(e.sublayers?e.sublayers.forEach(n):e.name&&i.unshift(e.name))};return e.sublayers&&e.sublayers.forEach(n),i.length&&(r={type:"wms",transparentBackground:e.imageTransparency,visibleLayers:i,url:d.normalize(e.url),version:e.version}),r},t.prototype._createWMTSLayerJSON=function(e,t){var r=e.activeLayer;return{type:"wmts",format:r.imageFormat,layer:r.id,style:r.styleId,tileMatrixSet:r.tileMatrixSetId,url:d.normalize(e.url)}},t.prototype._setURLandToken=function(e,t){if(t.url){e.url=d.normalize(t.url);var r=l.id&&l.id.findCredential(t.url);r&&(e.token=r.token)}},t.prototype._convertSvgToPictureMarkerSymbolJson=function(e){var t;this._canvasParent?(this._canvasSurface.clear(),this._canvasSurface.setDimensions(1024,1024)):(this._canvasParent=document.createElement("div"),this._canvasSurface=o.createSurface(this._canvasParent,1024,1024)),t="image/svg+xml"===e.contentType?this._canvasSurface.createObject(o.Image,{src:"data:image/svg+xml;base64,"+e.imageData,width:f.pt2px(e.width),height:f.pt2px(e.height),x:0,y:0}):this._canvasSurface.createObject(o.Path,e.path).setFill(e.color).setStroke(e.outline),"pendingRender"in this._canvasSurface&&this._canvasSurface._render(!0);var r=this._canvasSurface.rawNode.getContext("2d"),i=t.getBoundingBox(),n=Math.ceil(i.width+i.x),a=Math.ceil(i.height+i.y),s=r.getImageData(i.x,i.y,n,a);return r.canvas.width=n,r.canvas.height=a,r.putImageData(s,0,0),{type:"esriPMS",imageData:r.canvas.toDataURL("image/png").substr(22),angle:e.angle,contentType:"image/png",height:e.size?e.size:a-i.y,width:e.size?e.size:n-i.x,xoffset:e.xoffset,yoffset:e.yoffset}},t.prototype._convertSvgRenderer=function(e){var t=this,r=e.type;if("simple"===r&&M(e.symbol))e.symbol=this._convertSvgToPictureMarkerSymbolJson(e.symbol);else if("unique-value"===r||"class-breaks"===r){M(e.defaultSymbol)&&(e.defaultSymbol=this._convertSvgToPictureMarkerSymbolJson(e.defaultSymbol));var i=e["unique-value"===r?"uniqueValueInfos":"classBreakInfos"];i&&i.forEach(function(e){M(e.symbol)&&(e.symbol=t._convertSvgToPictureMarkerSymbolJson(e.symbol))})}},t.prototype._getGraphics=function(e){return e.queryFeatures(R).then(function(e){return e.features})},t.prototype._getPrintDefinition=function(e,t){return i(this,void 0,void 0,function(){var r,i,n,a,o;return s(this,function(s){switch(s.label){case 0:return r=e.view,i=r.spatialReference,a={},[4,this._createOperationalLayers(r,t)];case 1:return a.operationalLayers=s.sent(),n=a,o=this._ssExtent||e.extent||r.extent,i&&i.isWrappable&&(o=o.clone()._normalize(!0),i=o.spatialReference),n.mapOptions={extent:o&&o.toJSON(),spatialReference:i&&i.toJSON(),showAttribution:t.attributionVisible},this._ssExtent=null,r.rotation&&(n.mapOptions.rotation=-r.rotation),t.preserveScale&&(n.mapOptions.scale=t.outScale||r.scale),[2,n]}})})},t.prototype._getGpPrintParams=function(e){return i(this,void 0,void 0,function(){var t,r,i,n,a,o,l,u,h,c,y,f,d,g,x,m,v,b,w,P=this;return s(this,function(s){switch(s.label){case 0:return null==(t=e.template||new T).showLabels&&(t.showLabels=!0),r=t.exportOptions,n=S.toJSON(t.layout),r&&(a=r.dpi,i={dpi:a},"map_only"!==n.toLowerCase()&&""!==n||(o=r.width,l=r.height,i.outputSize=[o,l])),(u=t.layoutOptions)&&(c=void 0,y=void 0,"Miles"===u.scalebarUnit||"Kilometers"===u.scalebarUnit?(c="Kilometers",y="Miles"):"Meters"!==u.scalebarUnit&&"Feet"!==u.scalebarUnit||(c="Meters",y="Feet"),h={titleText:u.titleText,authorText:u.authorText,copyrightText:u.copyrightText,customTextElements:u.customTextElements,scaleBarOptions:{metricUnit:k.toJSON(c),metricLabel:L[c],nonMetricUnit:k.toJSON(y),nonMetricLabel:L[y]}}),f=null,u&&u.legendLayers&&(f=u.legendLayers.map(function(e){P._legendLayerNameMap[e.layerId]=e.title;var t={id:e.layerId};return e.subLayerIds&&(t.subLayerIds=e.subLayerIds),t})),[4,this._getPrintDefinition(e,t)];case 1:return(d=s.sent()).operationalLayers&&(x=new RegExp("[\\u4E00-\\u9FFF\\u0E00-\\u0E7F\\u0900-\\u097F\\u3040-\\u309F\\u30A0-\\u30FF\\u31F0-\\u31FF]"),m=/[\u0600-\u06FF]/,v=function(e){var t=e.text,r=e.font,i=r&&r.family&&r.family.toLowerCase();t&&r&&("arial"===i||"arial unicode ms"===i)&&(r.family=x.test(t)?"Arial Unicode MS":"Arial","normal"!==r.style&&m.test(t)&&(r.family="Arial Unicode MS"))},d.operationalLayers.forEach(function(e){e.featureCollection&&e.featureCollection.layers&&e.featureCollection.layers.forEach(function(e){e.layerDefinition&&e.layerDefinition.drawingInfo&&e.layerDefinition.drawingInfo.renderer&&e.layerDefinition.drawingInfo.renderer.symbol&&("esriTS"===(g=e.layerDefinition.drawingInfo.renderer).symbol.type&&v(g.symbol)),e.featureSet&&e.featureSet.features&&e.featureSet.features.forEach(function(e){e.symbol&&"esriTS"===e.symbol.type&&v(e.symbol)})})})),e.outSpatialReference&&(d.mapOptions.spatialReference=e.outSpatialReference.toJSON()),p.mixin(d,{exportOptions:i,layoutOptions:h}),p.mixin(d.layoutOptions,{legendOptions:{operationalLayers:null!=f?f:this._legendLayers.slice()}}),this._legendLayers.length=0,b=JSON.stringify(d),w={Web_Map_as_JSON:b,Format:_.toJSON(t.format),Layout_Template:n},e.extraParameters&&p.mixin(w,e.extraParameters),[2,w]}})})},a([g.property({dependsOn:["url"]})],t.prototype,"_geoprocessor",null),a([g.property()],t.prototype,"_gpMetadata",void 0),a([g.property({dependsOn:["_gpMetadata"],readOnly:!0})],t.prototype,"mode",null),a([g.property()],t.prototype,"updateDelay",void 0),a([g.subclass("esri.tasks.PrintTask")],t)}(g.declared(b))}.apply(null,i))||(e.exports=n)},1635:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(10),r(11),r(98),r(14),r(6),r(9),r(7),r(91),r(104),r(40),r(90),r(63),r(1636),r(1637)],void 0===(n=function(e,t,r,i,n,a,s,o,l,u,h,c,p,y,f,d){function g(e){return"polygon"===e.type}function x(e){return"polygon"===e[0].type}function m(e){return"polyline"===e[0].type}function v(e){return g(e)?e.rings:e.paths}function b(e,t){return Math.ceil((e-t)/(2*t))}function _(e,t){for(var r=0,i=v(e);r<i.length;r++)for(var n=0,a=i[r];n<a.length;n++){a[n][0]+=t}return e}function S(e){for(var t=[],r=0,i=0,n=0;n<e.length;n++){for(var a=e[n],s=null,o=0;o<a.length;o++)s=a[o],t.push(s),0===o?i=r=s[0]:(r=Math.min(r,s[0]),i=Math.max(i,s[0]));s&&t.push([(r+i)/2,0])}return t}function w(e,t){if(!(e instanceof h||e instanceof u)){var r="straightLineDensify: the input geometry is neither polyline nor polygon";throw L.error(r),new a(r)}for(var i=[],n=0,s=v(e);n<s.length;n++){var o=s[n],l=[];i.push(l),l.push([o[0][0],o[0][1]]);for(var c=0;c<o.length-1;c++){var p=o[c][0],y=o[c][1],f=o[c+1][0],d=o[c+1][1],x=Math.sqrt((f-p)*(f-p)+(d-y)*(d-y)),m=(d-y)/x,b=(f-p)/x,_=x/t;if(_>1){for(var S=1;S<=_-1;S++){var w=S*t,T=b*w+p,P=m*w+y;l.push([T,P])}var M=(x+Math.floor(_-1)*t)/2,k=b*M+p,C=m*M+y;l.push([k,C])}l.push([f,d])}}return g(e)?new u({rings:i,spatialReference:e.spatialReference}):new h({paths:i,spatialReference:e.spatialReference})}function T(e,t,r){if(t){var i=w(e,1e6);e=y.webMercatorToGeographic(i,!0)}return r&&(e=_(e,r)),e}function P(e,t,r){var i;if(Array.isArray(e)){if((i=e[0])>t){var n=b(i,t);e[0]=i+n*(-2*t)}else if(i<r){n=b(i,r);e[0]=i+n*(-2*r)}}else if((i=e.x)>t){n=b(i,t);e=e.clone().offset(n*(-2*t),0)}else if(i<r){n=b(i,r);e=e.clone().offset(n*(-2*r),0)}return e}function M(e,t){for(var r=-1,i=0;i<t.cutIndexes.length;i++)!function(i){for(var n=t.cutIndexes[i],a=t.geometries[i],s=v(a),o=0;o<s.length;o++)!function(e){var t=s[e];t.some(function(r){if(r[0]<180)return!0;for(var i=0,n=0;n<t.length;n++){var s=t[n][0];i=s>i?s:i}for(var o=-360*b(i=Number(i.toFixed(9)),180),l=0;l<t.length;l++){var u=a.getPoint(e,l);a.setPoint(e,l,u.clone().offset(o,0))}return!0})}(o);if(n===r){if(x(e))for(var l=0,u=v(a);l<u.length;l++){var h=u[l];e[n]=e[n].addRing(h)}else if(m(e))for(var c=0,p=v(a);c<p.length;c++){var y=p[c];e[n]=e[n].addPath(y)}}else r=n,e[n]=a}(i);return e}Object.defineProperty(t,"__esModule",{value:!0});var L=s.getLogger("esri.geometry.support.normalizeUtils"),k={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:new h({paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:c.WebMercator}),minus180Line:new h({paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:c.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new h({paths:[[[180,-180],[180,180]]],spatialReference:c.WGS84}),minus180Line:new h({paths:[[[-180,-180],[-180,180]]],spatialReference:c.WGS84})}};t.straightLineDensify=w,t.normalizeCentralMeridian=function e(t,a,s){return i(this,void 0,void 0,function(){var i,c,g,x,m,v,S,w,L,C,R,O,N,D,F,J,j,I,G,B,A,z,V,E,q,U,W,X,Y,Q,H,Z,K,$,ee,te,re;return r(this,function(r){switch(r.label){case 0:if(!Array.isArray(t))return[2,e([t],a)];for(i=a?a.url:n.geometryServiceUrl,C=0,R=[],O=[],N=0,D=t;N<D.length;N++)F=D[N],o.isNone(F)?O.push(F):(c||(c=F.spatialReference,g=p.getInfo(c),x=c.isWebMercator,m=k[S=x?102100:4326].maxX,v=k[S].minX,w=k[S].plus180Line,L=k[S].minus180Line),g?"mesh"===F.type?O.push(F):"point"===F.type?O.push(P(F.clone(),m,v)):"multipoint"===F.type?((J=F.clone()).points=J.points.map(function(e){return P(e,m,v)}),O.push(J)):"extent"===F.type?(I=F.clone(),j=I._normalize(!1,!1,g),O.push(j.rings?new u(j):j)):F.extent?(I=F.extent,G=b(I.xmin,v),A=0==(B=G*(2*m))?F.clone():_(F.clone(),B),I.offset(B,0),I.intersects(w)&&I.xmax!==m?(C=I.xmax>C?I.xmax:C,A=T(A,x),R.push(A),O.push("cut")):I.intersects(L)&&I.xmin!==v?(C=I.xmax*(2*m)>C?I.xmax*(2*m):C,A=T(A,x,360),R.push(A),O.push("cut")):O.push(A)):O.push(F.clone()):O.push(F));for(z=b(C,m),V=-90,E=z,q=new h;z>0;)U=360*z-180,q.addPath([[U,V],[U,-1*V]]),V*=-1,z--;return R.length>0&&E>0?[4,f.cut(i,R,q,s)]:[3,3];case 1:for(W=r.sent(),X=M(R,W),Y=[],Q=[],ee=0;ee<O.length;ee++)"cut"!==(te=O[ee])?Q.push(te):(re=X.shift(),H=t[ee],o.isSome(H)&&"polygon"===H.type&&H.rings&&H.rings.length>1&&re.rings.length>=H.rings.length?(Y.push(re),Q.push("simplify")):Q.push(x?y.geographicToWebMercator(re):re));return Y.length?[4,d.simplify(i,Y,s)]:[2,Q];case 2:for(Z=r.sent(),K=[],ee=0;ee<Q.length;ee++)"simplify"!==(te=Q[ee])?K.push(te):K.push(x?y.geographicToWebMercator(Z.shift()):Z.shift());return[2,K];case 3:for($=[],ee=0;ee<O.length;ee++)"cut"!==(te=O[ee])?$.push(te):(re=R.shift(),$.push(!0===x?y.geographicToWebMercator(re):re));return[2,l.resolve($)]}})})},t.getDenormalizedExtent=function(e){var t;if(!e)return null;var r=e.extent;if(!r)return null;var i=e.spatialReference&&p.getInfo(e.spatialReference);if(!i)return r;var n,a=i.valid,s=a[0],o=a[1],l=2*o,u=r.width,h=r.xmin,c=r.xmax;if(h=(t=[c,h])[0],c=t[1],"extent"===e.type||0===u||u<=o||u>l||h<s||c>o)return r;switch(e.type){case"polygon":if(!(e.rings.length>1))return r;n=S(e.rings);break;case"polyline":if(!(e.paths.length>1))return r;n=S(e.paths);break;case"multipoint":n=e.points}for(var y=r.clone(),f=0;f<n.length;f++){var d=n[f][0];d<0?(d+=o,c=Math.max(d,c)):(d-=o,h=Math.min(d,h))}return y.xmin=h,y.xmax=c,y.width<u?(y.xmin-=o,y.xmax-=o,y):r},t.normalizeMapX=function(e,t){var r=p.getInfo(t);if(r){var i=r.valid,n=i[0],a=i[1],s=a-n;if(e<n)for(;e<n;)e+=s;if(e>a)for(;e>a;)e-=s}return e}}.apply(null,i))||(e.exports=n)},1636:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(4),r(11),r(10),r(36),r(44),r(31),r(57)],void 0===(n=function(e,t,r,i,n,a,s,o,l){Object.defineProperty(t,"__esModule",{value:!0}),t.cut=function(e,t,u,h){return i(this,void 0,void 0,function(){var i,c,p,y,f,d,g;return n(this,function(n){switch(n.label){case 0:return i="string"==typeof e?o.urlToObject(e):e,c=t[0].spatialReference,p=r({},h,{query:r({},i.query,{f:"json",sr:JSON.stringify(c),target:JSON.stringify({geometryType:l.getJsonType(t[0]),geometries:t}),cutter:JSON.stringify(u)})}),[4,s(i.path+"/cut",p)];case 1:return y=n.sent(),f=y.data,d=f.cutIndexes,g=f.geometries,[2,{cutIndexes:d,geometries:(void 0===g?[]:g).map(function(e){return a.fromJSON(e).set(c)})}]}})})}}.apply(null,i))||(e.exports=n)},1637:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(4),r(11),r(10),r(44),r(31),r(57)],void 0===(n=function(e,t,r,i,n,a,s,o){Object.defineProperty(t,"__esModule",{value:!0}),t.simplify=function(e,t,l){return i(this,void 0,void 0,function(){var i,u,h,c;return n(this,function(n){switch(n.label){case 0:return i="string"==typeof e?s.urlToObject(e):e,u=t[0].spatialReference,h=o.getJsonType(t[0]),c=r({},l,{query:r({},i.query,{f:"json",sr:u.wkid?u.wkid:JSON.stringify(u),geometries:JSON.stringify(function(e){return{geometryType:o.getJsonType(e[0]),geometries:e.map(function(e){return e.toJSON()})}}(t))})}),[4,a(i.path+"/simplify",c)];case 1:return[2,function(e,t,r){var i=o.getGeometryType(t);return e.map(function(e){var t=i.fromJSON(e);return t.spatialReference=r,t})}(n.sent().data,h,u)]}})})}}.apply(null,i))||(e.exports=n)},1683:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(2),r(1),r(27),r(12),r(0)],void 0===(n=function(e,t,r,i,n,a,s){var o=new n.default({esriJobMessageTypeInformative:"informative",esriJobMessageTypeProcessDefinition:"process-definition",esriJobMessageTypeProcessStart:"process-start",esriJobMessageTypeProcessStop:"process-stop",esriJobMessageTypeWarning:"warning",esriJobMessageTypeError:"error",esriJobMessageTypeEmpty:"empty",esriJobMessageTypeAbort:"abort"});return function(e){function t(t){var r=e.call(this)||this;return r.description=null,r.type=null,r}return r(t,e),i([s.property({type:String,json:{write:!0}})],t.prototype,"description",void 0),i([s.property({type:String,json:{read:o.read,write:o.write}})],t.prototype,"type",void 0),i([s.subclass("esri.tasks.support.GPMessage")],t)}(s.declared(a.JSONSupport))}.apply(null,i))||(e.exports=n)},1691:function(e,t,r){var i,n;i=[r(59),r(51),r(1782),r(662),r(406),r(127),r(403),r(1658),r(1654)],void 0===(n=function(e,t,r,i,n,a,s,o,l){var u=t.getObject("dojox.gfx",!0),h=u._base={};u._hasClass=function(e,t){var r=e.getAttribute("className");return r&&(" "+r+" ").indexOf(" "+t+" ")>=0},u._addClass=function(e,t){var r=e.getAttribute("className")||"";(!r||(" "+r+" ").indexOf(" "+t+" ")<0)&&e.setAttribute("className",r+(r?" ":"")+t)},u._removeClass=function(e,t){var r=e.getAttribute("className");r&&e.setAttribute("className",r.replace(new RegExp("(^|\\s+)"+t+"(\\s+|$)"),"$1$2"))},h._getFontMeasurements=function(){var e,t,r={"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,small:0,medium:0,large:0,"x-large":0,"xx-large":0};i("ie")&&((t=n.doc.documentElement.style.fontSize||"")||(n.doc.documentElement.style.fontSize="100%"));var a=o.create("div",{style:{position:"absolute",left:"0",top:"-100px",width:"30px",height:"1000em",borderWidth:"0",margin:"0",padding:"0",outline:"none",lineHeight:"1",overflow:"hidden"}},n.body());for(e in r)a.style.fontSize=e,r[e]=16*Math.round(12*a.offsetHeight/16)/12/1e3;return i("ie")&&(n.doc.documentElement.style.fontSize=t),n.body().removeChild(a),r};var c=null;h._getCachedFontMeasurements=function(e){return!e&&c||(c=h._getFontMeasurements()),c};var p=null,y={};h._getTextBox=function(e,t,r){var i,a,s,u,h=arguments.length;if(p||(p=o.create("div",{style:{position:"absolute",top:"-10000px",left:"0",visibility:"hidden"}},n.body())),(i=p).className="",(a=i.style).borderWidth="0",a.margin="0",a.padding="0",a.outline="0",h>1&&t)for(s in t)s in y||(a[s]=t[s]);if(h>2&&r&&(i.className=r),i.innerHTML=e,i.getBoundingClientRect){var c=i.getBoundingClientRect();u={l:c.left,t:c.top,w:c.width||c.right-c.left,h:c.height||c.bottom-c.top}}else u=l.getMarginBox(i);return i.innerHTML="",u},h._computeTextLocation=function(e,t,r,i){var n={};switch(e.align){case"end":n.x=e.x-t;break;case"middle":n.x=e.x-t/2;break;default:n.x=e.x}var a=i?.75:1;return n.y=e.y-r*a,n},h._computeTextBoundingBox=function(e){if(!u._base._isRendered(e))return{x:0,y:0,width:0,height:0};var t,r=e.getShape(),i=e.getFont()||u.defaultFont,n=e.getTextWidth(),a=u.normalizedLength(i.size);return{x:(t=h._computeTextLocation(r,n,a,!0)).x,y:t.y,width:n,height:a}},h._isRendered=function(e){for(var t=e.parent;t&&t.getParent;)t=t.parent;return null!==t};var f=0;h._getUniqueId=function(){var t;do{t=e._scopeName+"xUnique"+ ++f}while(s.byId(t));return t};var d=i("pointer-events")?"touchAction":null;return h._fixMsTouchAction=d?function(e){e.rawNode.style[d]="none"}:function(){},t.mixin(u,{defaultPath:{type:"path",path:""},defaultPolyline:{type:"polyline",points:[]},defaultRect:{type:"rect",x:0,y:0,width:100,height:100,r:0},defaultEllipse:{type:"ellipse",cx:0,cy:0,rx:200,ry:100},defaultCircle:{type:"circle",cx:0,cy:0,r:100},defaultLine:{type:"line",x1:0,y1:0,x2:100,y2:100},defaultImage:{type:"image",x:0,y:0,width:0,height:0,src:""},defaultText:{type:"text",x:0,y:0,text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultTextPath:{type:"textpath",text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultStroke:{type:"stroke",color:"black",style:"solid",width:1,cap:"butt",join:4},defaultLinearGradient:{type:"linear",x1:0,y1:0,x2:100,y2:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultRadialGradient:{type:"radial",cx:0,cy:0,r:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultPattern:{type:"pattern",x:0,y:0,width:0,height:0,src:""},defaultFont:{type:"font",style:"normal",variant:"normal",weight:"normal",size:"10pt",family:"serif"},getDefault:function(){var e={};return function(t){var r=e[t];return r?new r:((r=e[t]=new Function).prototype=u["default"+t],new r)}}(),normalizeColor:function(e){return e instanceof r?e:new r(e)},normalizeParameters:function(e,t){var r;if(t){var i={};for(r in e)r in t&&!(r in i)&&(e[r]=t[r])}return e},makeParameters:function(e,r){var i=null;if(!r)return t.delegate(e);var n={};for(i in e)i in n||(n[i]=t.clone(i in r?r[i]:e[i]));return n},formatNumber:function(e,t){var r=e.toString();if(r.indexOf("e")>=0)r=e.toFixed(4);else{var i=r.indexOf(".");i>=0&&r.length-i>5&&(r=e.toFixed(4))}return e<0?r:t?" "+r:r},makeFontString:function(e){return e.style+" "+e.variant+" "+e.weight+" "+e.size+" "+e.family},splitFontString:function(e){var t=u.getDefault("Font"),r=e.split(/\s+/);do{if(r.length<5)break;t.style=r[0],t.variant=r[1],t.weight=r[2];var i=r[3].indexOf("/");t.size=i<0?r[3]:r[3].substring(0,i);var n=4;i<0&&("/"==r[4]?n=6:"/"==r[4].charAt(0)&&(n=5)),n<r.length&&(t.family=r.slice(n).join(" "))}while(0);return t},cm_in_pt:72/2.54,mm_in_pt:7.2/2.54,px_in_pt:function(){return u._base._getCachedFontMeasurements()["12pt"]/12},pt2px:function(e){return e*u.px_in_pt()},px2pt:function(e){return e/u.px_in_pt()},normalizedLength:function(e){if(0===e.length)return 0;if(e.length>2){var t=u.px_in_pt(),r=parseFloat(e);switch(e.slice(-2)){case"px":return r;case"pt":return r*t;case"in":return 72*r*t;case"pc":return 12*r*t;case"mm":return r*u.mm_in_pt*t;case"cm":return r*u.cm_in_pt*t}}return parseFloat(e)},pathVmlRegExp:/([A-Za-z]+)|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,pathSvgRegExp:/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g,equalSources:function(e,t){return e&&t&&e===t},switchTo:function(e){var t="string"==typeof e?u[e]:e;t&&(a.forEach(["Group","Rect","Ellipse","Circle","Line","Polyline","Image","Text","Path","TextPath","Surface","createSurface","fixTarget"],function(e){u[e]=t[e]}),"string"==typeof e?u.renderer=e:a.some(["svg","vml","canvas","canvasWithEvents","silverlight"],function(e){return u.renderer=u[e]&&u[e].Surface===u.Surface?e:null}))}}),u}.apply(null,i))||(e.exports=n)},1712:function(e,t,r){var i,n;i=[r(1691),r(51)],void 0===(n=function(e,t){var r=e.matrix={},i={};return r._degToRad=function(e){return i[e]||(i[e]=Math.PI*e/180)},r._radToDeg=function(e){return e/Math.PI*180},r.Matrix2D=function(e){if(e)if("number"==typeof e)this.xx=this.yy=e;else if(e instanceof Array){if(e.length>0){for(var i=r.normalize(e[0]),n=1;n<e.length;++n){var a=i,s=r.normalize(e[n]);(i=new r.Matrix2D).xx=a.xx*s.xx+a.xy*s.yx,i.xy=a.xx*s.xy+a.xy*s.yy,i.yx=a.yx*s.xx+a.yy*s.yx,i.yy=a.yx*s.xy+a.yy*s.yy,i.dx=a.xx*s.dx+a.xy*s.dy+a.dx,i.dy=a.yx*s.dx+a.yy*s.dy+a.dy}t.mixin(this,i)}}else t.mixin(this,e)},t.extend(r.Matrix2D,{xx:1,xy:0,yx:0,yy:1,dx:0,dy:0}),t.mixin(r,{identity:new r.Matrix2D,flipX:new r.Matrix2D({xx:-1}),flipY:new r.Matrix2D({yy:-1}),flipXY:new r.Matrix2D({xx:-1,yy:-1}),translate:function(e,t){return arguments.length>1?new r.Matrix2D({dx:e,dy:t}):new r.Matrix2D({dx:e.x,dy:e.y})},scale:function(e,t){return arguments.length>1?new r.Matrix2D({xx:e,yy:t}):"number"==typeof e?new r.Matrix2D({xx:e,yy:e}):new r.Matrix2D({xx:e.x,yy:e.y})},rotate:function(e){var t=Math.cos(e),i=Math.sin(e);return new r.Matrix2D({xx:t,xy:-i,yx:i,yy:t})},rotateg:function(e){return r.rotate(r._degToRad(e))},skewX:function(e){return new r.Matrix2D({xy:Math.tan(e)})},skewXg:function(e){return r.skewX(r._degToRad(e))},skewY:function(e){return new r.Matrix2D({yx:Math.tan(e)})},skewYg:function(e){return r.skewY(r._degToRad(e))},reflect:function(e,t){1==arguments.length&&(t=e.y,e=e.x);var i=e*e,n=t*t,a=i+n,s=2*e*t/a;return new r.Matrix2D({xx:2*i/a-1,xy:s,yx:s,yy:2*n/a-1})},project:function(e,t){1==arguments.length&&(t=e.y,e=e.x);var i=e*e,n=t*t,a=i+n,s=e*t/a;return new r.Matrix2D({xx:i/a,xy:s,yx:s,yy:n/a})},normalize:function(e){return e instanceof r.Matrix2D?e:new r.Matrix2D(e)},isIdentity:function(e){return 1==e.xx&&0==e.xy&&0==e.yx&&1==e.yy&&0==e.dx&&0==e.dy},clone:function(e){var t=new r.Matrix2D;for(var i in e)"number"==typeof e[i]&&"number"==typeof t[i]&&t[i]!=e[i]&&(t[i]=e[i]);return t},invert:function(e){var t=r.normalize(e),i=t.xx*t.yy-t.xy*t.yx;return t=new r.Matrix2D({xx:t.yy/i,xy:-t.xy/i,yx:-t.yx/i,yy:t.xx/i,dx:(t.xy*t.dy-t.yy*t.dx)/i,dy:(t.yx*t.dx-t.xx*t.dy)/i})},_multiplyPoint:function(e,t,r){return{x:e.xx*t+e.xy*r+e.dx,y:e.yx*t+e.yy*r+e.dy}},multiplyPoint:function(e,t,i){var n=r.normalize(e);return"number"==typeof t&&"number"==typeof i?r._multiplyPoint(n,t,i):r._multiplyPoint(n,t.x,t.y)},multiplyRectangle:function(e,t){var i=r.normalize(e);if(t=t||{x:0,y:0,width:0,height:0},r.isIdentity(i))return{x:t.x,y:t.y,width:t.width,height:t.height};var n=r.multiplyPoint(i,t.x,t.y),a=r.multiplyPoint(i,t.x,t.y+t.height),s=r.multiplyPoint(i,t.x+t.width,t.y),o=r.multiplyPoint(i,t.x+t.width,t.y+t.height),l=Math.min(n.x,a.x,s.x,o.x),u=Math.min(n.y,a.y,s.y,o.y);return{x:l,y:u,width:Math.max(n.x,a.x,s.x,o.x)-l,height:Math.max(n.y,a.y,s.y,o.y)-u}},multiply:function(e){for(var t=r.normalize(e),i=1;i<arguments.length;++i){var n=t,a=r.normalize(arguments[i]);(t=new r.Matrix2D).xx=n.xx*a.xx+n.xy*a.yx,t.xy=n.xx*a.xy+n.xy*a.yy,t.yx=n.yx*a.xx+n.yy*a.yx,t.yy=n.yx*a.xy+n.yy*a.yy,t.dx=n.xx*a.dx+n.xy*a.dy+n.dx,t.dy=n.yx*a.dx+n.yy*a.dy+n.dy}return t},_sandwich:function(e,t,i){return r.multiply(r.translate(t,i),e,r.translate(-t,-i))},scaleAt:function(e,t,i,n){switch(arguments.length){case 4:return r._sandwich(r.scale(e,t),i,n);case 3:return"number"==typeof i?r._sandwich(r.scale(e),t,i):r._sandwich(r.scale(e,t),i.x,i.y)}return r._sandwich(r.scale(e),t.x,t.y)},rotateAt:function(e,t,i){return arguments.length>2?r._sandwich(r.rotate(e),t,i):r._sandwich(r.rotate(e),t.x,t.y)},rotategAt:function(e,t,i){return arguments.length>2?r._sandwich(r.rotateg(e),t,i):r._sandwich(r.rotateg(e),t.x,t.y)},skewXAt:function(e,t,i){return arguments.length>2?r._sandwich(r.skewX(e),t,i):r._sandwich(r.skewX(e),t.x,t.y)},skewXgAt:function(e,t,i){return arguments.length>2?r._sandwich(r.skewXg(e),t,i):r._sandwich(r.skewXg(e),t.x,t.y)},skewYAt:function(e,t,i){return arguments.length>2?r._sandwich(r.skewY(e),t,i):r._sandwich(r.skewY(e),t.x,t.y)},skewYgAt:function(e,t,i){return arguments.length>2?r._sandwich(r.skewYg(e),t,i):r._sandwich(r.skewYg(e),t.x,t.y)}}),e.Matrix2D=r.Matrix2D,r}.apply(null,i))||(e.exports=n)},1864:function(e,t,r){var i,n;i=[r(1691),r(51),r(281),r(59),r(662),r(283),r(127),r(1658),r(1782),r(1712)],void 0===(n=function(e,t,r,i,n,a,s,o,l,u){function h(e,t){for(var r=e.length-1;t<r;)e[t]=e[++t];e.length=r}var c=e.shape={};return c.Shape=r("dojox.gfx.shape.Shape",null,{constructor:function(){if(this.rawNode=null,this.shape=null,this.matrix=null,this.fillStyle=null,this.strokeStyle=null,this.bbox=null,this.parent=null,this.parentMatrix=null,n("gfxRegistry")){var e=c.register(this);this.getUID=function(){return e}}},destroy:function(){n("gfxRegistry")&&c.dispose(this),this.rawNode&&"__gfxObject__"in this.rawNode&&(this.rawNode.__gfxObject__=null),this.rawNode=null},getNode:function(){return this.rawNode},getShape:function(){return this.shape},getTransform:function(){return this.matrix},getFill:function(){return this.fillStyle},getStroke:function(){return this.strokeStyle},getParent:function(){return this.parent},getBoundingBox:function(){return this.bbox},getTransformedBoundingBox:function(){var e=this.getBoundingBox();if(!e)return null;var t=this._getRealMatrix(),r=u;return[r.multiplyPoint(t,e.x,e.y),r.multiplyPoint(t,e.x+e.width,e.y),r.multiplyPoint(t,e.x+e.width,e.y+e.height),r.multiplyPoint(t,e.x,e.y+e.height)]},getEventSource:function(){return this.rawNode},setClip:function(e){this.clip=e},getClip:function(){return this.clip},setShape:function(t){return this.shape=e.makeParameters(this.shape,t),this.bbox=null,this},setFill:function(t){if(!t)return this.fillStyle=null,this;var r=null;if("object"==typeof t&&"type"in t)switch(t.type){case"linear":r=e.makeParameters(e.defaultLinearGradient,t);break;case"radial":r=e.makeParameters(e.defaultRadialGradient,t);break;case"pattern":r=e.makeParameters(e.defaultPattern,t)}else r=e.normalizeColor(t);return this.fillStyle=r,this},setStroke:function(r){if(!r)return this.strokeStyle=null,this;("string"==typeof r||t.isArray(r)||r instanceof l)&&(r={color:r});var i=this.strokeStyle=e.makeParameters(e.defaultStroke,r);return i.color=e.normalizeColor(i.color),this},setTransform:function(e){return this.matrix=u.clone(e?u.normalize(e):u.identity),this._applyTransform()},_applyTransform:function(){return this},moveToFront:function(){var e=this.getParent();return e&&(e._moveChildToFront(this),this._moveToFront()),this},moveToBack:function(){var e=this.getParent();return e&&(e._moveChildToBack(this),this._moveToBack()),this},_moveToFront:function(){},_moveToBack:function(){},applyRightTransform:function(e){return e?this.setTransform([this.matrix,e]):this},applyLeftTransform:function(e){return e?this.setTransform([e,this.matrix]):this},applyTransform:function(e){return e?this.setTransform([this.matrix,e]):this},removeShape:function(e){return this.parent&&this.parent.remove(this,e),this},_setParent:function(e,t){return this.parent=e,this._updateParentMatrix(t)},_updateParentMatrix:function(e){return this.parentMatrix=e?u.clone(e):null,this._applyTransform()},_getRealMatrix:function(){for(var e=this.matrix,t=this.parent;t;)t.matrix&&(e=u.multiply(t.matrix,e)),t=t.parent;return e}}),c._eventsProcessing={on:function(t,r){return a(this.getEventSource(),t,c.fixCallback(this,e.fixTarget,r))},connect:function(e,r,i){return"on"==e.substring(0,2)&&(e=e.substring(2)),this.on(e,i?t.hitch(r,i):r)},disconnect:function(e){return e.remove()}},c.fixCallback=function(e,r,n,a){if(a||(a=n,n=null),t.isString(a)){if(!(n=n||i.global)[a])throw['dojox.gfx.shape.fixCallback: scope["',a,'"] is null (scope="',n,'")'].join("");return function(t){return r(t,e)?n[a].apply(n,arguments||[]):void 0}}return n?function(t){return r(t,e)?a.apply(n,arguments||[]):void 0}:function(t){return r(t,e)?a.apply(n,arguments):void 0}},t.extend(c.Shape,c._eventsProcessing),c.Container={_init:function(){this.children=[],this._batch=0},openBatch:function(){return this},closeBatch:function(){return this},add:function(e){var t=e.getParent();return t&&t.remove(e,!0),this.children.push(e),e._setParent(this,this._getRealMatrix())},remove:function(e,t){for(var r=0;r<this.children.length;++r)if(this.children[r]==e){t||(e.parent=null,e.parentMatrix=null),h(this.children,r);break}return this},clear:function(e){for(var t,r=0;r<this.children.length;++r)(t=this.children[r]).parent=null,t.parentMatrix=null,e&&t.destroy();return this.children=[],this},getBoundingBox:function(){if(this.children){var e=null;return s.forEach(this.children,function(t){var r=t.getBoundingBox();if(r){var i=t.getTransform();i&&(r=u.multiplyRectangle(i,r)),e?(e.x=Math.min(e.x,r.x),e.y=Math.min(e.y,r.y),e.endX=Math.max(e.endX,r.x+r.width),e.endY=Math.max(e.endY,r.y+r.height)):e={x:r.x,y:r.y,endX:r.x+r.width,endY:r.y+r.height}}}),e&&(e.width=e.endX-e.x,e.height=e.endY-e.y),e}return null},_moveChildToFront:function(e){for(var t=0;t<this.children.length;++t)if(this.children[t]==e){h(this.children,t),this.children.push(e);break}return this},_moveChildToBack:function(e){for(var t=0;t<this.children.length;++t)if(this.children[t]==e){h(this.children,t),this.children.unshift(e);break}return this}},c.Surface=r("dojox.gfx.shape.Surface",null,{constructor:function(){this.rawNode=null,this._parent=null,this._nodes=[],this._events=[]},destroy:function(){if(s.forEach(this._nodes,o.destroy),this._nodes=[],s.forEach(this._events,function(e){e&&e.remove()}),this._events=[],this.rawNode=null,n("ie"))for(;this._parent.lastChild;)o.destroy(this._parent.lastChild);else this._parent.innerHTML="";this._parent=null},getEventSource:function(){return this.rawNode},_getRealMatrix:function(){return null},isLoaded:!0,onLoad:function(e){},whenLoaded:function(e,r){var i=t.hitch(e,r);this.isLoaded?i(this):a.once(this,"load",function(e){i(e)})}}),t.extend(c.Surface,c._eventsProcessing),c.Rect=r("dojox.gfx.shape.Rect",c.Shape,{constructor:function(t){this.shape=e.getDefault("Rect"),this.rawNode=t},getBoundingBox:function(){return this.shape}}),c.Ellipse=r("dojox.gfx.shape.Ellipse",c.Shape,{constructor:function(t){this.shape=e.getDefault("Ellipse"),this.rawNode=t},getBoundingBox:function(){if(!this.bbox){var e=this.shape;this.bbox={x:e.cx-e.rx,y:e.cy-e.ry,width:2*e.rx,height:2*e.ry}}return this.bbox}}),c.Circle=r("dojox.gfx.shape.Circle",c.Shape,{constructor:function(t){this.shape=e.getDefault("Circle"),this.rawNode=t},getBoundingBox:function(){if(!this.bbox){var e=this.shape;this.bbox={x:e.cx-e.r,y:e.cy-e.r,width:2*e.r,height:2*e.r}}return this.bbox}}),c.Line=r("dojox.gfx.shape.Line",c.Shape,{constructor:function(t){this.shape=e.getDefault("Line"),this.rawNode=t},getBoundingBox:function(){if(!this.bbox){var e=this.shape;this.bbox={x:Math.min(e.x1,e.x2),y:Math.min(e.y1,e.y2),width:Math.abs(e.x2-e.x1),height:Math.abs(e.y2-e.y1)}}return this.bbox}}),c.Polyline=r("dojox.gfx.shape.Polyline",c.Shape,{constructor:function(t){this.shape=e.getDefault("Polyline"),this.rawNode=t},setShape:function(e,t){return e&&e instanceof Array?(this.inherited(arguments,[{points:e}]),t&&this.shape.points.length&&this.shape.points.push(this.shape.points[0])):this.inherited(arguments,[e]),this},_normalizePoints:function(){var e=this.shape.points,t=e&&e.length;if(t&&"number"==typeof e[0]){for(var r=[],i=0;i<t;i+=2)r.push({x:e[i],y:e[i+1]});this.shape.points=r}},getBoundingBox:function(){if(!this.bbox&&this.shape.points.length){for(var e=this.shape.points,t=e.length,r=e[0],i={l:r.x,t:r.y,r:r.x,b:r.y},n=1;n<t;++n)r=e[n],i.l>r.x&&(i.l=r.x),i.r<r.x&&(i.r=r.x),i.t>r.y&&(i.t=r.y),i.b<r.y&&(i.b=r.y);this.bbox={x:i.l,y:i.t,width:i.r-i.l,height:i.b-i.t}}return this.bbox}}),c.Image=r("dojox.gfx.shape.Image",c.Shape,{constructor:function(t){this.shape=e.getDefault("Image"),this.rawNode=t},getBoundingBox:function(){return this.shape},setStroke:function(){return this},setFill:function(){return this}}),c.Text=r(c.Shape,{constructor:function(t){this.fontStyle=null,this.shape=e.getDefault("Text"),this.rawNode=t},getFont:function(){return this.fontStyle},setFont:function(t){return this.fontStyle="string"==typeof t?e.splitFontString(t):e.makeParameters(e.defaultFont,t),this._setFont(),this},getBoundingBox:function(){var t=null;return this.getShape().text&&(t=e._base._computeTextBoundingBox(this)),t}}),c.Creator={createShape:function(t){switch(t.type){case e.defaultPath.type:return this.createPath(t);case e.defaultRect.type:return this.createRect(t);case e.defaultCircle.type:return this.createCircle(t);case e.defaultEllipse.type:return this.createEllipse(t);case e.defaultLine.type:return this.createLine(t);case e.defaultPolyline.type:return this.createPolyline(t);case e.defaultImage.type:return this.createImage(t);case e.defaultText.type:return this.createText(t);case e.defaultTextPath.type:return this.createTextPath(t)}return null},createGroup:function(){return this.createObject(e.Group)},createRect:function(t){return this.createObject(e.Rect,t)},createEllipse:function(t){return this.createObject(e.Ellipse,t)},createCircle:function(t){return this.createObject(e.Circle,t)},createLine:function(t){return this.createObject(e.Line,t)},createPolyline:function(t){return this.createObject(e.Polyline,t)},createImage:function(t){return this.createObject(e.Image,t)},createText:function(t){return this.createObject(e.Text,t)},createPath:function(t){return this.createObject(e.Path,t)},createTextPath:function(t){return this.createObject(e.TextPath,{}).setText(t)},createObject:function(e,t){return null}},c}.apply(null,i))||(e.exports=n)},2304:function(e,t,r){var n,a;n=[r(1691),r(51),r(127),r(281),r(406),r(1654),r(403),r(1864),r(2305),r(2306),r(1712),r(2307),r(2308)],void 0===(a=function(e,t,r,n,a,s,o,l,u,h,c,y,f){var d=e.canvas={},g=null,x=c.multiplyPoint,m=Math.PI,v=2*m,b=m/2,_=t.extend;if(a.global.CanvasRenderingContext2D)var S=a.doc.createElement("canvas").getContext("2d"),w="function"==typeof S.setLineDash,T="function"==typeof S.fillText;var P={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]};function M(e,t,r,i,n,a,s,o,l,u){var h,c,p=t.length,y=0;for(u?(c=u.l/n,y=u.i):c=t[0]/n;a<s;)a+c>s&&(h={l:(a+c-s)*n,i:y},c=s-a),y%2||(e.beginPath(),e.arc(r,i,n,a,a+c,o),l&&e.stroke()),a+=c,c=t[++y%p]/n;return h}function L(e,t,r,i){var n,a=0,s=0,o=0;for(i?(n=i.l,o=i.i):n=t[0];s<1;){if(1==(s=f.tAtLength(e,n)))a={l:n-f.computeLength(e),i:o};var l=f.splitBezierAtT(e,s);o%2||r.push(l[0]),e=l[1],n=t[++o%t.length]}return a}function k(e,t,r,i){for(var n=[t.last.x,t.last.y].concat(r),a=4===r.length,s=!(e instanceof Array),o=a?"quadraticCurveTo":"bezierCurveTo",l=[],u=L(n,t.canvasDash,l,i),h=0;h<l.length;++h){var c=l[h];s?(e.moveTo(c[0],c[1]),e[o].apply(e,c.slice(2))):(e.push("moveTo",[c[0],c[1]]),e.push(o,c.slice(2)))}return u}function C(e,t,r,i,n,a,s){var o,l,u=0,h=0,c=0,p=f.distance(r,i,n,a),y=0,d=t.canvasDash,g=r,x=i,m=!(e instanceof Array);for(s?(c=s.l,y=s.i):c+=d[0];Math.abs(1-h)>.01;)c>p&&(u={l:c-p,i:y},c=p),o=r+(n-r)*(h=c/p),l=i+(a-i)*h,y++%2||(m?(e.moveTo(g,x),e.lineTo(o,l)):(e.push("moveTo",[g,x]),e.push("lineTo",[o,l]))),g=o,x=l,c+=d[y%d.length];return u}d.Shape=n("dojox.gfx.canvas.Shape",l.Shape,{_render:function(e){e.save(),this._renderTransform(e),this._renderClip(e),this._renderShape(e),this._renderFill(e,!0),this._renderStroke(e,!0),e.restore()},_renderClip:function(e){this.canvasClip&&(this.canvasClip.render(e),e.clip())},_renderTransform:function(e){if("canvasTransform"in this){var t=this.canvasTransform;e.translate(t.dx,t.dy),e.rotate(t.angle2),e.scale(t.sx,t.sy),e.rotate(t.angle1)}},_renderShape:function(e){},_renderFill:function(e,t){if("canvasFill"in this){var r=this.fillStyle;if("canvasFillImage"in this){var i=r.width,n=r.height,a=this.canvasFillImage.width,s=this.canvasFillImage.height,o=i==a?1:i/a,l=n==s?1:n/s,u=Math.min(o,l),h=(i-u*a)/2,c=(n-u*s)/2;g.width=i,g.height=n;var p=g.getContext("2d");p.clearRect(0,0,i,n),p.drawImage(this.canvasFillImage,0,0,a,s,h,c,u*a,u*s),this.canvasFill=e.createPattern(g,"repeat"),delete this.canvasFillImage}e.fillStyle=this.canvasFill,t&&("pattern"!==r.type||0===r.x&&0===r.y||e.translate(r.x,r.y),e.fill())}else e.fillStyle="rgba(0,0,0,0.0)"},_renderStroke:function(e,t){var r=this.strokeStyle;r?(e.strokeStyle=r.color.toString(),e.lineWidth=r.width,e.lineCap=r.cap,"number"==typeof r.join?(e.lineJoin="miter",e.miterLimit=r.join):e.lineJoin=r.join,this.canvasDash?w?(e.setLineDash(this.canvasDash),t&&e.stroke()):this._renderDashedStroke(e,t):t&&e.stroke()):t||(e.strokeStyle="rgba(0,0,0,0.0)")},_renderDashedStroke:function(e,t){},getEventSource:function(){return null},on:function(){},connect:function(){},disconnect:function(){},canvasClip:null,setClip:function(e){this.inherited(arguments);var t=e?"width"in e?"rect":"cx"in e?"ellipse":"points"in e?"polyline":"d"in e?"path":null:null;return e&&!t?this:(this.canvasClip=e?R(t,e):null,this.parent&&this.parent._makeDirty(),this)}});var R=function(e,r){switch(e){case"ellipse":return{canvasEllipse:F({shape:r}),render:function(e){return d.Ellipse.prototype._renderShape.call(this,e)}};case"rect":return{shape:t.delegate(r,{r:0}),render:function(e){return d.Rect.prototype._renderShape.call(this,e)}};case"path":return{canvasPath:O(r),render:function(e){this.canvasPath._renderShape(e)}};case"polyline":return{canvasPolyline:r.points,render:function(e){return d.Polyline.prototype._renderShape.call(this,e)}}}return null},O=function(e){var t=new dojox.gfx.canvas.Path;return t.canvasPath=[],t._setPath(e.d),t},N=function(e,t,r){var i=e.prototype[t];e.prototype[t]=r?function(){return this.parent&&this.parent._makeDirty(),i.apply(this,arguments),r.call(this),this}:function(){return this.parent&&this.parent._makeDirty(),i.apply(this,arguments)}};N(d.Shape,"setTransform",function(){this.matrix?this.canvasTransform=e.decompose(this.matrix):delete this.canvasTransform}),N(d.Shape,"setFill",function(){var t,i=this.fillStyle;if(i){if("object"==typeof i&&"type"in i){var n=this.surface.rawNode.getContext("2d");switch(i.type){case"linear":case"radial":t="linear"==i.type?n.createLinearGradient(i.x1,i.y1,i.x2,i.y2):n.createRadialGradient(i.cx,i.cy,0,i.cx,i.cy,i.r),r.forEach(i.colors,function(r){t.addColorStop(r.offset,e.normalizeColor(r.color).toString())});break;case"pattern":g||(g=document.createElement("canvas"));var a=new Image;this.surface.downloadImage(a,i.src),this.canvasFillImage=a}}else t=i.toString();this.canvasFill=t}else delete this.canvasFill}),N(d.Shape,"setStroke",function(){var e=this.strokeStyle;if(e){var t=this.strokeStyle.style.toLowerCase();if(t in P&&(t=P[t]),t instanceof Array){var r;for(t=t.slice(),this.canvasDash=t,r=0;r<t.length;++r)t[r]*=e.width;if("butt"!=e.cap){for(r=0;r<t.length;r+=2)t[r]-=e.width,t[r]<1&&(t[r]=1);for(r=1;r<t.length;r+=2)t[r]+=e.width}}else delete this.canvasDash}else delete this.canvasDash;this._needsDash=!w&&!!this.canvasDash}),N(d.Shape,"setShape"),d.Group=n("dojox.gfx.canvas.Group",d.Shape,{constructor:function(){l.Container._init.call(this)},_render:function(e){e.save(),this._renderTransform(e),this._renderClip(e);for(var t=0;t<this.children.length;++t)this.children[t]._render(e);e.restore()},destroy:function(){l.Container.clear.call(this,!0),d.Shape.prototype.destroy.apply(this,arguments)}}),d.Rect=n("dojox.gfx.canvas.Rect",[d.Shape,l.Rect],{_renderShape:function(e){var t=this.shape,r=Math.min(t.r,t.height/2,t.width/2),i=t.x,n=i+t.width,a=t.y,s=a+t.height,o=i+r,l=n-r,u=a+r,h=s-r;e.beginPath(),e.moveTo(o,a),r?(e.arc(l,u,r,-b,0,!1),e.arc(l,h,r,0,b,!1),e.arc(o,h,r,b,m,!1),e.arc(o,u,r,m,m+b,!1)):(e.lineTo(l,a),e.lineTo(n,h),e.lineTo(o,s),e.lineTo(i,u)),e.closePath()},_renderDashedStroke:function(e,t){var r,i=this.shape,n=Math.min(i.r,i.height/2,i.width/2),a=i.x,s=a+i.width,o=i.y,l=o+i.height,u=a+n,h=s-n,c=o+n,p=l-n;n?(e.beginPath(),r=C(e,this,u,o,h,o),t&&e.stroke(),r=M(e,this.canvasDash,h,c,n,-b,0,!1,t,r),e.beginPath(),r=C(e,this,s,c,s,p,r),t&&e.stroke(),r=M(e,this.canvasDash,h,p,n,0,b,!1,t,r),e.beginPath(),r=C(e,this,h,l,u,l,r),t&&e.stroke(),r=M(e,this.canvasDash,u,p,n,b,m,!1,t,r),e.beginPath(),r=C(e,this,a,p,a,c,r),t&&e.stroke(),M(e,this.canvasDash,u,c,n,m,m+b,!1,t,r)):(e.beginPath(),C(e,this,u,l,a,c,r=C(e,this,s,p,u,l,r=C(e,this,h,o,s,p,r=C(e,this,u,o,h,o)))),t&&e.stroke())}});var D=[];!function(){var e=h.curvePI4;D.push(e.s,e.c1,e.c2,e.e);for(var t=45;t<360;t+=45){var r=c.rotateg(t);D.push(x(r,e.c1),x(r,e.c2),x(r,e.e))}}();var F=function(e){var t,r,i,n=[],a=e.shape,s=c.normalize([c.translate(a.cx,a.cy),c.scale(a.rx,a.ry)]);t=x(s,D[0]),n.push([t.x,t.y]);for(var o=1;o<D.length;o+=3)r=x(s,D[o]),i=x(s,D[o+1]),t=x(s,D[o+2]),n.push([r.x,r.y,i.x,i.y,t.x,t.y]);if(e._needsDash){var l=[],u=n[0];for(o=1;o<n.length;++o){var h=[];L(u.concat(n[o]),e.canvasDash,h),u=[n[o][4],n[o][5]],l.push(h)}e._dashedPoints=l}return n};d.Ellipse=n("dojox.gfx.canvas.Ellipse",[d.Shape,l.Ellipse],{setShape:function(){return this.inherited(arguments),this.canvasEllipse=F(this),this},setStroke:function(){return this.inherited(arguments),w||(this.canvasEllipse=F(this)),this},_renderShape:function(e){var t,r=this.canvasEllipse;for(e.beginPath(),e.moveTo.apply(e,r[0]),t=1;t<r.length;++t)e.bezierCurveTo.apply(e,r[t]);e.closePath()},_renderDashedStroke:function(e,t){var r=this._dashedPoints;e.beginPath();for(var i=0;i<r.length;++i)for(var n=r[i],a=0;a<n.length;++a){var s=n[a];e.moveTo(s[0],s[1]),e.bezierCurveTo(s[2],s[3],s[4],s[5],s[6],s[7])}t&&e.stroke()}}),d.Circle=n("dojox.gfx.canvas.Circle",[d.Shape,l.Circle],{_renderShape:function(e){var t=this.shape;e.beginPath(),e.arc(t.cx,t.cy,t.r,0,v,1)},_renderDashedStroke:function(e,t){var r,n=this.shape,a=0,s=this.canvasDash.length;for(i=0;a<v;)r=this.canvasDash[i%s]/n.r,i%2||(e.beginPath(),e.arc(n.cx,n.cy,n.r,a,a+r,0),t&&e.stroke()),a+=r,++i}}),d.Line=n("dojox.gfx.canvas.Line",[d.Shape,l.Line],{_renderShape:function(e){var t=this.shape;e.beginPath(),e.moveTo(t.x1,t.y1),e.lineTo(t.x2,t.y2)},_renderDashedStroke:function(e,t){var r=this.shape;e.beginPath(),C(e,this,r.x1,r.y1,r.x2,r.y2),t&&e.stroke()}}),d.Polyline=n("dojox.gfx.canvas.Polyline",[d.Shape,l.Polyline],{setShape:function(){this.inherited(arguments);var e,t,r,i=this.shape.points,n=i[0];if(this.bbox=null,this._normalizePoints(),i.length)if("number"==typeof n)e=i;else for(e=[],r=0;r<i.length;++r)t=i[r],e.push(t.x,t.y);else e=[];return this.canvasPolyline=e,this},_renderShape:function(e){var t=this.canvasPolyline;if(t.length){e.beginPath(),e.moveTo(t[0],t[1]);for(var r=2;r<t.length;r+=2)e.lineTo(t[r],t[r+1])}},_renderDashedStroke:function(e,t){var r=this.canvasPolyline,i=0;e.beginPath();for(var n=0;n<r.length;n+=2)i=C(e,this,r[n],r[n+1],r[n+2],r[n+3],i);t&&e.stroke()}}),d.Image=n("dojox.gfx.canvas.Image",[d.Shape,l.Image],{setShape:function(){this.inherited(arguments);var e=new Image;return this.surface.downloadImage(e,this.shape.src),this.canvasImage=e,this},_renderShape:function(e){var t=this.shape;e.drawImage(this.canvasImage,t.x,t.y,t.width,t.height)}}),d.Text=n("dojox.gfx.canvas.Text",[d.Shape,l.Text],{_setFont:function(){this.fontStyle?this.canvasFont=e.makeFontString(this.fontStyle):delete this.canvasFont},getTextWidth:function(){var e,t=this.shape,r=0;return t.text&&((e=this.surface.rawNode.getContext("2d")).save(),this._renderTransform(e),this._renderFill(e,!1),this._renderStroke(e,!1),this.canvasFont&&(e.font=this.canvasFont),r=e.measureText(t.text).width,e.restore()),r},_render:function(e){e.save(),this._renderTransform(e),this._renderFill(e,!1),this._renderStroke(e,!1),this._renderShape(e),e.restore()},_renderShape:function(e){var t,r=this.shape;r.text&&(t="middle"===r.align?"center":r.align,e.textAlign=t,this.canvasFont&&(e.font=this.canvasFont),this.canvasFill&&e.fillText(r.text,r.x,r.y),this.strokeStyle&&(e.beginPath(),e.strokeText(r.text,r.x,r.y),e.closePath()))}}),N(d.Text,"setFont"),T||d.Text.extend({getTextWidth:function(){return 0},getBoundingBox:function(){return null},_renderShape:function(){}});var J={M:"_moveToA",m:"_moveToR",L:"_lineToA",l:"_lineToR",H:"_hLineToA",h:"_hLineToR",V:"_vLineToA",v:"_vLineToR",C:"_curveToA",c:"_curveToR",S:"_smoothCurveToA",s:"_smoothCurveToR",Q:"_qCurveToA",q:"_qCurveToR",T:"_qSmoothCurveToA",t:"_qSmoothCurveToR",A:"_arcTo",a:"_arcTo",Z:"_closePath",z:"_closePath"};d.Path=n("dojox.gfx.canvas.Path",[d.Shape,u.Path],{constructor:function(){this.lastControl={}},setShape:function(){return this.canvasPath=[],this._dashedPath=[],this.inherited(arguments)},setStroke:function(){return this.inherited(arguments),w||(this.segmented=!1,this._confirmSegmented()),this},_setPath:function(){this._dashResidue=null,this.inherited(arguments)},_updateWithSegment:function(e){var r=t.clone(this.last);this[J[e.action]](this.canvasPath,e.action,e.args,this._needsDash?this._dashedPath:null),this.last=r,this.inherited(arguments)},_renderShape:function(e){var t=this.canvasPath;e.beginPath();for(var r=0;r<t.length;r+=2)e[t[r]].apply(e,t[r+1])},_renderDashedStroke:w?function(){}:function(e,t){var r=this._dashedPath;e.beginPath();for(var i=0;i<r.length;i+=2)e[r[i]].apply(e,r[i+1]);t&&e.stroke()},_moveToA:function(e,t,r,i){e.push("moveTo",[r[0],r[1]]),i&&i.push("moveTo",[r[0],r[1]]);for(var n=2;n<r.length;n+=2)e.push("lineTo",[r[n],r[n+1]]),i&&(this._dashResidue=C(i,this,r[n-2],r[n-1],r[n],r[n+1],this._dashResidue));this.last.x=r[r.length-2],this.last.y=r[r.length-1],this.lastControl={}},_moveToR:function(e,t,r,i){var n;"x"in this.last?(n=[this.last.x+=r[0],this.last.y+=r[1]],e.push("moveTo",n),i&&i.push("moveTo",n)):(n=[this.last.x=r[0],this.last.y=r[1]],e.push("moveTo",n),i&&i.push("moveTo",n));for(var a=2;a<r.length;a+=2)e.push("lineTo",[this.last.x+=r[a],this.last.y+=r[a+1]]),i&&(this._dashResidue=C(i,this,i[i.length-1][0],i[i.length-1][1],this.last.x,this.last.y,this._dashResidue));this.lastControl={}},_lineToA:function(e,t,r,i){for(var n=0;n<r.length;n+=2)i&&(this._dashResidue=C(i,this,this.last.x,this.last.y,r[n],r[n+1],this._dashResidue)),e.push("lineTo",[r[n],r[n+1]]);this.last.x=r[r.length-2],this.last.y=r[r.length-1],this.lastControl={}},_lineToR:function(e,t,r,i){for(var n=0;n<r.length;n+=2)e.push("lineTo",[this.last.x+=r[n],this.last.y+=r[n+1]]),i&&(this._dashResidue=C(i,this,i[i.length-1][0],i[i.length-1][1],this.last.x,this.last.y,this._dashResidue));this.lastControl={}},_hLineToA:function(e,t,r,i){for(var n=0;n<r.length;++n)e.push("lineTo",[r[n],this.last.y]),i&&(this._dashResidue=C(i,this,i[i.length-1][0],i[i.length-1][1],r[n],this.last.y,this._dashResidue));this.last.x=r[r.length-1],this.lastControl={}},_hLineToR:function(e,t,r,i){for(var n=0;n<r.length;++n)e.push("lineTo",[this.last.x+=r[n],this.last.y]),i&&(this._dashResidue=C(i,this,i[i.length-1][0],i[i.length-1][1],this.last.x,this.last.y,this._dashResidue));this.lastControl={}},_vLineToA:function(e,t,r,i){for(var n=0;n<r.length;++n)e.push("lineTo",[this.last.x,r[n]]),i&&(this._dashResidue=C(i,this,i[i.length-1][0],i[i.length-1][1],this.last.x,r[n],this._dashResidue));this.last.y=r[r.length-1],this.lastControl={}},_vLineToR:function(e,t,r,i){for(var n=0;n<r.length;++n)e.push("lineTo",[this.last.x,this.last.y+=r[n]]),i&&(this._dashResidue=C(i,this,i[i.length-1][0],i[i.length-1][1],this.last.x,this.last.y,this._dashResidue));this.lastControl={}},_curveToA:function(e,t,r,i){for(var n=0;n<r.length;n+=6)e.push("bezierCurveTo",r.slice(n,n+6)),i&&(this._dashResidue=k(i,this,e[e.length-1],this._dashResidue));this.last.x=r[r.length-2],this.last.y=r[r.length-1],this.lastControl.x=r[r.length-4],this.lastControl.y=r[r.length-3],this.lastControl.type="C"},_curveToR:function(e,t,r,i){for(var n=0;n<r.length;n+=6)e.push("bezierCurveTo",[this.last.x+r[n],this.last.y+r[n+1],this.lastControl.x=this.last.x+r[n+2],this.lastControl.y=this.last.y+r[n+3],this.last.x+r[n+4],this.last.y+r[n+5]]),i&&(this._dashResidue=k(i,this,e[e.length-1],this._dashResidue)),this.last.x+=r[n+4],this.last.y+=r[n+5];this.lastControl.type="C"},_smoothCurveToA:function(e,t,r,i){for(var n=0;n<r.length;n+=4){var a="C"==this.lastControl.type;e.push("bezierCurveTo",[a?2*this.last.x-this.lastControl.x:this.last.x,a?2*this.last.y-this.lastControl.y:this.last.y,r[n],r[n+1],r[n+2],r[n+3]]),i&&(this._dashResidue=k(i,this,e[e.length-1],this._dashResidue)),this.lastControl.x=r[n],this.lastControl.y=r[n+1],this.lastControl.type="C"}this.last.x=r[r.length-2],this.last.y=r[r.length-1]},_smoothCurveToR:function(e,t,r,i){for(var n=0;n<r.length;n+=4){var a="C"==this.lastControl.type;e.push("bezierCurveTo",[a?2*this.last.x-this.lastControl.x:this.last.x,a?2*this.last.y-this.lastControl.y:this.last.y,this.last.x+r[n],this.last.y+r[n+1],this.last.x+r[n+2],this.last.y+r[n+3]]),i&&(this._dashResidue=k(i,this,e[e.length-1],this._dashResidue)),this.lastControl.x=this.last.x+r[n],this.lastControl.y=this.last.y+r[n+1],this.lastControl.type="C",this.last.x+=r[n+2],this.last.y+=r[n+3]}},_qCurveToA:function(e,t,r,i){for(var n=0;n<r.length;n+=4)e.push("quadraticCurveTo",r.slice(n,n+4));i&&(this._dashResidue=k(i,this,e[e.length-1],this._dashResidue)),this.last.x=r[r.length-2],this.last.y=r[r.length-1],this.lastControl.x=r[r.length-4],this.lastControl.y=r[r.length-3],this.lastControl.type="Q"},_qCurveToR:function(e,t,r,i){for(var n=0;n<r.length;n+=4)e.push("quadraticCurveTo",[this.lastControl.x=this.last.x+r[n],this.lastControl.y=this.last.y+r[n+1],this.last.x+r[n+2],this.last.y+r[n+3]]),i&&(this._dashResidue=k(i,this,e[e.length-1],this._dashResidue)),this.last.x+=r[n+2],this.last.y+=r[n+3];this.lastControl.type="Q"},_qSmoothCurveToA:function(e,t,r,i){for(var n=0;n<r.length;n+=2){var a="Q"==this.lastControl.type;e.push("quadraticCurveTo",[this.lastControl.x=a?2*this.last.x-this.lastControl.x:this.last.x,this.lastControl.y=a?2*this.last.y-this.lastControl.y:this.last.y,r[n],r[n+1]]),i&&(this._dashResidue=k(i,this,e[e.length-1],this._dashResidue)),this.lastControl.type="Q"}this.last.x=r[r.length-2],this.last.y=r[r.length-1]},_qSmoothCurveToR:function(e,t,r,i){for(var n=0;n<r.length;n+=2){var a="Q"==this.lastControl.type;e.push("quadraticCurveTo",[this.lastControl.x=a?2*this.last.x-this.lastControl.x:this.last.x,this.lastControl.y=a?2*this.last.y-this.lastControl.y:this.last.y,this.last.x+r[n],this.last.y+r[n+1]]),i&&(this._dashResidue=k(i,this,e[e.length-1],this._dashResidue)),this.lastControl.type="Q",this.last.x+=r[n],this.last.y+=r[n+1]}},_arcTo:function(e,t,i,n){for(var a="a"==t,s=0;s<i.length;s+=7){var o=i[s+5],l=i[s+6];a&&(o+=this.last.x,l+=this.last.y);var u=h.arcAsBezier(this.last,i[s],i[s+1],i[s+2],i[s+3]?1:0,i[s+4]?1:0,o,l);r.forEach(u,function(t){e.push("bezierCurveTo",t)}),n&&(this._dashResidue=k(n,this,p,this._dashResidue)),this.last.x=o,this.last.y=l}this.lastControl={}},_closePath:function(e,t,r,i){e.push("closePath",[]),i&&(this._dashResidue=C(i,this,this.last.x,this.last.y,i[1][0],i[1][1],this._dashResidue)),this.lastControl={}}}),r.forEach(["moveTo","lineTo","hLineTo","vLineTo","curveTo","smoothCurveTo","qCurveTo","qSmoothCurveTo","arcTo","closePath"],function(e){N(d.Path,e)}),d.TextPath=n("dojox.gfx.canvas.TextPath",[d.Shape,u.TextPath],{_renderShape:function(e){this.shape},_setText:function(){},_setFont:function(){}}),d.Surface=n("dojox.gfx.canvas.Surface",l.Surface,{constructor:function(){l.Container._init.call(this),this.pendingImageCount=0,this.makeDirty()},destroy:function(){l.Container.clear.call(this,!0),this.inherited(arguments)},setDimensions:function(t,r){if(this.width=e.normalizedLength(t),this.height=e.normalizedLength(r),!this.rawNode)return this;var i=!1;return this.rawNode.width!=this.width&&(this.rawNode.width=this.width,i=!0),this.rawNode.height!=this.height&&(this.rawNode.height=this.height,i=!0),i&&this.makeDirty(),this},getDimensions:function(){return this.rawNode?{width:this.rawNode.width,height:this.rawNode.height}:null},_render:function(e){if(this.rawNode&&(e||!this.pendingImageCount)){var t=this.rawNode.getContext("2d");t.clearRect(0,0,this.rawNode.width,this.rawNode.height),this.render(t),"pendingRender"in this&&(clearTimeout(this.pendingRender),delete this.pendingRender)}},render:function(e){e.save();for(var t=0;t<this.children.length;++t)this.children[t]._render(e);e.restore()},makeDirty:function(){this.pendingImagesCount||"pendingRender"in this||this._batch||(this.pendingRender=setTimeout(t.hitch(this,this._render),0))},downloadImage:function(e,r){var i=t.hitch(this,this.onImageLoad);!this.pendingImageCount++&&"pendingRender"in this&&(clearTimeout(this.pendingRender),delete this.pendingRender),e.onload=i,e.onerror=i,e.onabort=i,e.src=r},onImageLoad:function(){--this.pendingImageCount||(this.onImagesLoaded(),this._render())},onImagesLoaded:function(){},getEventSource:function(){return null},connect:function(){},disconnect:function(){},on:function(){}}),d.createSurface=function(t,r,i){if(!r&&!i){var n=s.position(t);r=r||n.w,i=i||n.h}"number"==typeof r&&(r+="px"),"number"==typeof i&&(i+="px");var a=new d.Surface,l=o.byId(t),u=l.ownerDocument.createElement("canvas");return u.width=e.normalizedLength(r),u.height=e.normalizedLength(i),l.appendChild(u),a.rawNode=u,a._parent=l,a.surface=a,a};var j=l.Container,I={openBatch:function(){return++this._batch,this},closeBatch:function(){return this._batch=this._batch>0?--this._batch:0,this._makeDirty(),this},_makeDirty:function(){this._batch||this.surface.makeDirty()},add:function(e){return this._makeDirty(),j.add.apply(this,arguments)},remove:function(e,t){return this._makeDirty(),j.remove.apply(this,arguments)},clear:function(){return this._makeDirty(),j.clear.apply(this,arguments)},getBoundingBox:j.getBoundingBox,_moveChildToFront:function(e){return this._makeDirty(),j._moveChildToFront.apply(this,arguments)},_moveChildToBack:function(e){return this._makeDirty(),j._moveChildToBack.apply(this,arguments)}},G={createObject:function(e,t){var r=new e;return r.surface=this.surface,r.setShape(t),this.add(r),r}};return _(d.Group,I),_(d.Group,l.Creator),_(d.Group,G),_(d.Surface,I),_(d.Surface,l.Creator),_(d.Surface,G),d.fixTarget=function(e,t){return!0},d}.apply(null,n))||(e.exports=a)},2305:function(e,t,r){var i,n;i=[r(1691),r(51),r(281),r(1712),r(1864)],void 0===(n=function(e,t,r,i,n){var a=r("dojox.gfx.path.Path",n.Shape,{constructor:function(r){this.shape=t.clone(e.defaultPath),this.segments=[],this.tbbox=null,this.absolute=!0,this.last={},this.rawNode=r,this.segmented=!1},setAbsoluteMode:function(e){return this._confirmSegmented(),this.absolute="string"==typeof e?"absolute"==e:e,this},getAbsoluteMode:function(){return this._confirmSegmented(),this.absolute},getBoundingBox:function(){return this._confirmSegmented(),this.bbox&&"l"in this.bbox?{x:this.bbox.l,y:this.bbox.t,width:this.bbox.r-this.bbox.l,height:this.bbox.b-this.bbox.t}:null},_getRealBBox:function(){if(this._confirmSegmented(),this.tbbox)return this.tbbox;var e=this.bbox,t=this._getRealMatrix();this.bbox=null;for(var r=0,i=this.segments.length;r<i;++r)this._updateWithSegment(this.segments[r],t);var n=this.bbox;return this.bbox=e,this.tbbox=n?[{x:n.l,y:n.t},{x:n.r,y:n.t},{x:n.r,y:n.b},{x:n.l,y:n.b}]:null,this.tbbox},getLastPosition:function(){return this._confirmSegmented(),"x"in this.last?this.last:null},_applyTransform:function(){return this.tbbox=null,this.inherited(arguments)},_updateBBox:function(e,t,r){if(r){var n=i.multiplyPoint(r,e,t);e=n.x,t=n.y}this.bbox&&"l"in this.bbox?(this.bbox.l>e&&(this.bbox.l=e),this.bbox.r<e&&(this.bbox.r=e),this.bbox.t>t&&(this.bbox.t=t),this.bbox.b<t&&(this.bbox.b=t)):this.bbox={l:e,b:t,r:e,t:t}},_updateWithSegment:function(t,r){var i,n=t.args,a=n.length;switch(t.action){case"M":case"L":case"C":case"S":case"Q":case"T":for(i=0;i<a;i+=2)this._updateBBox(n[i],n[i+1],r);this.last.x=n[a-2],this.last.y=n[a-1],this.absolute=!0;break;case"H":for(i=0;i<a;++i)this._updateBBox(n[i],this.last.y,r);this.last.x=n[a-1],this.absolute=!0;break;case"V":for(i=0;i<a;++i)this._updateBBox(this.last.x,n[i],r);this.last.y=n[a-1],this.absolute=!0;break;case"m":var s=0;"x"in this.last||(this._updateBBox(this.last.x=n[0],this.last.y=n[1],r),s=2);for(i=s;i<a;i+=2)this._updateBBox(this.last.x+=n[i],this.last.y+=n[i+1],r);this.absolute=!1;break;case"l":case"t":for(i=0;i<a;i+=2)this._updateBBox(this.last.x+=n[i],this.last.y+=n[i+1],r);this.absolute=!1;break;case"h":for(i=0;i<a;++i)this._updateBBox(this.last.x+=n[i],this.last.y,r);this.absolute=!1;break;case"v":for(i=0;i<a;++i)this._updateBBox(this.last.x,this.last.y+=n[i],r);this.absolute=!1;break;case"c":for(i=0;i<a;i+=6)this._updateBBox(this.last.x+n[i],this.last.y+n[i+1],r),this._updateBBox(this.last.x+n[i+2],this.last.y+n[i+3],r),this._updateBBox(this.last.x+=n[i+4],this.last.y+=n[i+5],r);this.absolute=!1;break;case"s":case"q":for(i=0;i<a;i+=4)this._updateBBox(this.last.x+n[i],this.last.y+n[i+1],r),this._updateBBox(this.last.x+=n[i+2],this.last.y+=n[i+3],r);this.absolute=!1;break;case"A":for(i=0;i<a;i+=7)this._updateBBox(n[i+5],n[i+6],r);this.last.x=n[a-2],this.last.y=n[a-1],this.absolute=!0;break;case"a":for(i=0;i<a;i+=7)this._updateBBox(this.last.x+=n[i+5],this.last.y+=n[i+6],r);this.absolute=!1}var o=[t.action];for(i=0;i<a;++i)o.push(e.formatNumber(n[i],!0));if("string"==typeof this.shape.path)this.shape.path+=o.join("");else for(i=0,a=o.length;i<a;++i)this.shape.path.push(o[i])},_validSegments:{m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},_pushSegment:function(e,t){this.tbbox=null;var r,i=this._validSegments[e.toLowerCase()];"number"==typeof i&&(i?t.length>=i&&(r={action:e,args:t.slice(0,t.length-t.length%i)},this.segments.push(r),this._updateWithSegment(r)):(r={action:e,args:[]},this.segments.push(r),this._updateWithSegment(r)))},_collectArgs:function(e,t){for(var r=0;r<t.length;++r){var i=t[r];"boolean"==typeof i?e.push(i?1:0):"number"==typeof i?e.push(i):i instanceof Array?this._collectArgs(e,i):"x"in i&&"y"in i&&e.push(i.x,i.y)}},moveTo:function(){this._confirmSegmented();var e=[];return this._collectArgs(e,arguments),this._pushSegment(this.absolute?"M":"m",e),this},lineTo:function(){this._confirmSegmented();var e=[];return this._collectArgs(e,arguments),this._pushSegment(this.absolute?"L":"l",e),this},hLineTo:function(){this._confirmSegmented();var e=[];return this._collectArgs(e,arguments),this._pushSegment(this.absolute?"H":"h",e),this},vLineTo:function(){this._confirmSegmented();var e=[];return this._collectArgs(e,arguments),this._pushSegment(this.absolute?"V":"v",e),this},curveTo:function(){this._confirmSegmented();var e=[];return this._collectArgs(e,arguments),this._pushSegment(this.absolute?"C":"c",e),this},smoothCurveTo:function(){this._confirmSegmented();var e=[];return this._collectArgs(e,arguments),this._pushSegment(this.absolute?"S":"s",e),this},qCurveTo:function(){this._confirmSegmented();var e=[];return this._collectArgs(e,arguments),this._pushSegment(this.absolute?"Q":"q",e),this},qSmoothCurveTo:function(){this._confirmSegmented();var e=[];return this._collectArgs(e,arguments),this._pushSegment(this.absolute?"T":"t",e),this},arcTo:function(){this._confirmSegmented();var e=[];return this._collectArgs(e,arguments),this._pushSegment(this.absolute?"A":"a",e),this},closePath:function(){return this._confirmSegmented(),this._pushSegment("Z",[]),this},_confirmSegmented:function(){if(!this.segmented){var e=this.shape.path;this.shape.path=[],this._setPath(e),this.shape.path=this.shape.path.join(""),this.segmented=!0}},_setPath:function(r){var i=t.isArray(r)?r:r.match(e.pathSvgRegExp);if(this.segments=[],this.absolute=!0,this.bbox={},this.last={},i){for(var n="",a=[],s=i.length,o=0;o<s;++o){var l=i[o],u=parseFloat(l);isNaN(u)?(n&&this._pushSegment(n,a),a=[],n=l):a.push(u)}this._pushSegment(n,a)}},setShape:function(t){return this.inherited(arguments,["string"==typeof t?{path:t}:t]),this.segmented=!1,this.segments=[],e.lazyPathSegmentation||this._confirmSegmented(),this},_2PI:2*Math.PI}),s=r("dojox.gfx.path.TextPath",a,{constructor:function(r){"text"in this||(this.text=t.clone(e.defaultTextPath)),"fontStyle"in this||(this.fontStyle=t.clone(e.defaultFont))},getText:function(){return this.text},setText:function(t){return this.text=e.makeParameters(this.text,"string"==typeof t?{text:t}:t),this._setText(),this},getFont:function(){return this.fontStyle},setFont:function(t){return this.fontStyle="string"==typeof t?e.splitFontString(t):e.makeParameters(e.defaultFont,t),this._setFont(),this}});return e.path={Path:a,TextPath:s}}.apply(null,i))||(e.exports=n)},2306:function(e,t,r){var i,n;i=[r(1691),r(51),r(1712)],void 0===(n=function(e,t,r){var i=2*Math.PI,n=Math.PI/4,a=Math.PI/8,s=n+a,o=l(a);function l(e){var t=Math.cos(e),r=Math.sin(e),i={x:t+4/3*(1-t),y:r-4/3*t*(1-t)/r};return{s:{x:t,y:-r},c1:{x:i.x,y:-i.y},c2:i,e:{x:t,y:r}}}return e.arc={unitArcAsBezier:l,curvePI4:o,arcAsBezier:function(e,t,u,h,c,p,y,f){c=Boolean(c),p=Boolean(p);var d=r._degToRad(h),g=t*t,x=u*u,m=r.multiplyPoint(r.rotate(-d),{x:(e.x-y)/2,y:(e.y-f)/2}),v=m.x*m.x,b=m.y*m.y,_=Math.sqrt((g*x-g*b-x*v)/(g*b+x*v));isNaN(_)&&(_=0);var S={x:_*t*m.y/u,y:-_*u*m.x/t};c==p&&(S={x:-S.x,y:-S.y});var w=r.multiplyPoint([r.translate((e.x+y)/2,(e.y+f)/2),r.rotate(d)],S),T=r.normalize([r.translate(w.x,w.y),r.rotate(d),r.scale(t,u)]),P=r.invert(T),M=r.multiplyPoint(P,e),L=r.multiplyPoint(P,y,f),k=Math.atan2(M.y,M.x),C=k-Math.atan2(L.y,L.x);p&&(C=-C),C<0?C+=i:C>i&&(C-=i);for(var R=a,O=o,N=p?R:-R,D=[],F=C;F>0;F-=n){F<s&&(O=l(R=F/2),N=p?R:-R,F=0);var J,j,I=r.normalize([T,r.rotate(k+N)]);p?(_=r.multiplyPoint(I,O.c1),J=r.multiplyPoint(I,O.c2),j=r.multiplyPoint(I,O.e)):(_=r.multiplyPoint(I,O.c2),J=r.multiplyPoint(I,O.c1),j=r.multiplyPoint(I,O.s)),D.push([_.x,_.y,J.x,J.y,j.x,j.y]),k+=2*N}return D}}}.apply(null,i))||(e.exports=n)},2307:function(e,t,r){var i,n;i=[r(1691),r(51),r(1712)],void 0===(n=function(e,t,r){function i(e,t){return Math.abs(e-t)<=1e-6*(Math.abs(e)+Math.abs(t))}function n(e,t,r,i){return isFinite(e)?isFinite(r)?((t=Math.abs(t))*e+(i=Math.abs(i))*r)/(t+i):e:r}function a(e){return e.xx*e.yy<0||e.xy*e.yx>0?-1:1}function s(e){var t=r.normalize(e),n=-t.xx-t.yy,a=t.xx*t.yy-t.xy*t.yx,s=Math.sqrt(n*n-4*a),o=-(n+(n<0?-s:s))/2,l=a/o,u=t.xy/(o-t.xx),h=1,c=t.xy/(l-t.xx),p=1;i(o,l)&&(u=1,h=0,c=0,p=1),isFinite(u)||(u=1,h=(o-t.xx)/t.xy,isFinite(h)||(u=(o-t.yy)/t.yx,h=1,isFinite(u)||(u=1,h=t.yx/(o-t.yy)))),isFinite(c)||(c=1,p=(l-t.xx)/t.xy,isFinite(p)||(c=(l-t.yy)/t.yx,p=1,isFinite(c)||(c=1,p=t.yx/(l-t.yy))));var y=Math.sqrt(u*u+h*h),f=Math.sqrt(c*c+p*p);return isFinite(u/=y)||(u=0),isFinite(h/=y)||(h=0),isFinite(c/=f)||(c=0),isFinite(p/=f)||(p=0),{value1:o,value2:l,vector1:{x:u,y:h},vector2:{x:c,y:p}}}function o(e,t){var r=a(e),i=t.angle1=(Math.atan2(e.yx,e.yy)+Math.atan2(-r*e.xy,r*e.xx))/2,s=Math.cos(i),o=Math.sin(i);return t.sx=n(e.xx/s,s,-e.xy/o,o),t.sy=n(e.yy/s,s,e.yx/o,o),t}function l(e,t){var r=a(e),i=t.angle2=(Math.atan2(r*e.yx,r*e.xx)+Math.atan2(-e.xy,e.yy))/2,s=Math.cos(i),o=Math.sin(i);return t.sx=n(e.xx/s,s,e.yx/o,o),t.sy=n(e.yy/s,s,-e.xy/o,o),t}return e.decompose=function(e){var n=r.normalize(e),a={dx:n.dx,dy:n.dy,sx:1,sy:1,angle1:0,angle2:0};if(i(n.xy,0)&&i(n.yx,0))return t.mixin(a,{sx:n.xx,sy:n.yy});if(i(n.xx*n.yx,-n.xy*n.yy))return o(n,a);if(i(n.xx*n.xy,-n.yx*n.yy))return l(n,a);var u=function(e){var i=new r.Matrix2D(e);return t.mixin(i,{dx:0,dy:0,xy:i.yx,yx:i.xy})}(n),h=s([n,u]),c=s([u,n]),p=new r.Matrix2D({xx:h.vector1.x,xy:h.vector2.x,yx:h.vector1.y,yy:h.vector2.y}),y=new r.Matrix2D({xx:c.vector1.x,xy:c.vector1.y,yx:c.vector2.x,yy:c.vector2.y}),f=new r.Matrix2D([r.invert(p),n,r.invert(y)]);return o(y,a),f.xx*=a.sx,f.yy*=a.sy,l(p,a),f.xx*=a.sx,f.yy*=a.sy,t.mixin(a,{sx:f.xx,sy:f.yy})}}.apply(null,i))||(e.exports=n)},2308:function(e,t,r){var i,n;i=[r(1691)],void 0===(n=function(e){var t=e.bezierutils={},r=(t.tAtLength=function(e,t){var r=0,a=6==e.length,o=0,l=0,u=a?n:s,h=function(n,s){for(var c=0,p=0;p<n.length-2;p+=2)c+=i(n[p],n[p+1],n[p+2],n[p+3]);if(c-(a?i(e[0],e[1],e[4],e[5]):i(e[0],e[1],e[6],e[7]))>s||o+c>t+s){++l;var y=u(n,.5);if(h(y[0],s),Math.abs(o-t)<=s)return;h(y[1],s)}else o+=c,r+=1/(1<<l)};return t&&h(e,.5),r},t.computeLength=function(e){for(var t=6==e.length,s=0,o=0;o<e.length-2;o+=2)s+=i(e[o],e[o+1],e[o+2],e[o+3]);if(s-(t?i(e[0],e[1],e[4],e[5]):i(e[0],e[1],e[6],e[7]))>.1){var l=t?n(e,.5):a(e,.5),u=r(l[0],t);return u+=r(l[1],t)}return s}),i=t.distance=function(e,t,r,i){return Math.sqrt((r-e)*(r-e)+(i-t)*(i-t))},n=function(e,t){var r=1-t,i=r*r,n=t*t,a=e[0],s=e[1],o=e[2],l=e[3],u=e[4],h=e[5],c=i*a+2*r*t*o+n*u,p=i*s+2*r*t*l+n*h;return[[a,s,r*a+t*o,r*s+t*l,c,p],[c,p,r*o+t*u,r*l+t*h,u,h]]},a=function(e,t){var r=1-t,i=r*r,n=i*r,a=t*t,s=a*t,o=e[0],l=e[1],u=e[2],h=e[3],c=e[4],p=e[5],y=e[6],f=e[7],d=n*o+3*i*t*u+3*r*a*c+s*y,g=n*l+3*i*t*h+3*r*a*p+s*f;return[[o,l,r*o+t*u,r*l+t*h,i*o+2*r*t*u+a*c,i*l+2*r*t*h+a*p,d,g],[d,g,i*u+2*r*t*c+a*y,i*h+2*r*t*p+a*f,r*c+t*y,r*p+t*f,y,f]]},s=t.splitBezierAtT=function(e,t){return 6==e.length?n(e,t):a(e,t)};return t}.apply(null,i))||(e.exports=n)},2309:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(4),r(2),r(1),r(10),r(11),r(44),r(58),r(24),r(7),r(31),r(0),r(37),r(40),r(1635),r(633),r(2310),r(636),r(2311),r(1575),r(1683),r(2312),r(2313),r(2314),r(2315)],void 0===(n=function(e,t,i,n,a,s,o,l,u,h,c,p,y,f,d,g,x,m,v,b,_,S,w,T,P,M){return function(e){function t(t){var r=e.call(this)||this;return r._timers=new Map,r.outSpatialReference=null,r.processExtent=null,r.processSpatialReference=null,r.returnFeatureCollection=!1,r.returnM=!1,r.returnZ=!1,r.url=null,r}return n(t,e),t.prototype.destroy=function(){this._timers.forEach(function(e){clearInterval(e)})},t.prototype.cancelJob=function(e,t){var r=this.parsedUrl,n=r.path,a=r.query,s=i({},this.requestOptions,t,{query:i({},a,{f:"json"})});return this._clearTimer(e),l(n+"/jobs/"+e+"/cancel",s).then(function(e){return w.fromJSON(e.data)})},t.prototype.checkJobStatus=function(e,t){var r=this.parsedUrl,n=r.path,a=r.query,s=i({},this.requestOptions,t,{query:i({},a,{f:"json"})});return l(n+"/jobs/"+e,s).then(function(e){return w.fromJSON(e.data)})},t.prototype.execute=function(e,t){var r=this;return this._constructRequest("execute",e,t).then(function(e){var t=e.data.results||[],i=e.data.messages||[];return{results:t.map(r._decode),messages:i.map(function(e){return S.fromJSON(e)})}})},t.prototype.getResultData=function(e,t,r){var n=this,a=this.parsedUrl,s=a.path,o=a.query,u=i({},this.requestOptions,r,{query:i({},o,{returnType:"data",f:"json"})});return l(s+"/jobs/"+e+"/results/"+t,u).then(function(e){return n._decode(e.data)})},t.prototype.getResultImage=function(e,t,r,n){var a=this,s=this.parsedUrl,o=i({},s.query,r.toJSON(),{f:"json"}),u=this._gpEncode(o),h=i({},this.requestOptions,n,{query:u}),c=s.path+"/jobs/"+e+"/results/"+t;return l(c,h).then(function(e){return a._decode(e.data)})},t.prototype.getResultMapImageLayer=function(e){return o(this,void 0,void 0,function(){var t,i,n,a,o,l,u;return s(this,function(s){switch(s.label){case 0:return t=this.parsedUrl,i=t.path,n=t.query,a=i.indexOf("/GPServer/"),o=i.substring(0,a),l=n?"?"+p.objectToQuery(n):"",u=o+"/MapServer/jobs/"+e+l,[4,c.create(function(e){return r.e(13).then(function(){var t=[r(1579)];e.apply(null,t)}.bind(this)).catch(r.oe)})];case 1:return[2,new(s.sent())({url:u})]}})})},t.prototype.submitJob=function(e,t){return this._constructRequest("submitJob",e,t).then(function(e){return w.fromJSON(e.data)})},t.prototype.waitForJobCompletion=function(e,t){var r=this;void 0===t&&(t={});var i=t.interval,n=void 0===i?1e3:i,a=t.signal,s=t.statusCallback;return c.create(function(t,i){c.onAbort(a,function(){r._clearTimer(e),i(c.createAbortError())}),r._clearTimer(e);var o=setInterval(function(){r._timers.has(e)||i(c.createAbortError()),r._getJobStatus(e,r.requestOptions).then(function(n){var a=n.jobStatus;switch(a){case"job-succeeded":r._clearTimer(e),t(n);break;case"job-submitted":case"job-executing":case"job-waiting":case"job-new":s&&s(n);break;case"job-cancelled":case"job-cancelling":case"job-deleted":case"job-deleting":case"job-timed-out":case"job-failed":r._clearTimer(e),i(n);break;default:h.neverReached(a)}})},n);r._timers.set(e,o)})},t.prototype._clearTimer=function(e){this._timers.has(e)&&(clearInterval(this._timers.get(e)),this._timers.delete(e))},t.prototype._constructRequest=function(e,t,r){var n=this,a={},s={},o=[];return this._collectGeometries(t,o,a),u.safeCast(g.normalizeCentralMeridian(o)).then(function(o){var u=n,h=u.outSpatialReference,c=u.parsedUrl,p=u.processExtent,y=u.processSpatialReference,f=u.returnFeatureCollection,d=u.returnM,g=u.returnZ;for(var x in a){var m=a[x];s[x]=o.slice(m[0],m[1])}var v=h?h.wkid||h:null,b=y?y.wkid||y:null,_=p?{context:{extent:p,outSR:v,processSR:b}}:{"env:outSR":v,"env:processSR":b},S=i({},c.query,_,t,{returnFeatureCollection:f,returnM:d,returnZ:g,f:"json"}),w=n._gpEncode(S,null,s),T=i({},n.requestOptions,r,{query:w}),P=c.path+"/"+e;return l(P,T)})},t.prototype._collectGeometries=function(e,t,r){for(var i in e){var n=e[i];if(n&&"object"==typeof n&&n instanceof _){var a=n.features;r[i]=[t.length,t.length+a.length],a.forEach(function(e){t.push(e.geometry)})}}},t.prototype._decode=function(e){var t=e.dataType,r=P.fromJSON(e);switch(t){case"GPBoolean":case"GPDouble":case"GPLong":case"GPString":return r;case"GPDate":r.value=new Date(r.value);break;case"GPDataFile":r.value=b.fromJSON(r.value);break;case"GPLinearUnit":r.value=T.fromJSON(r.value);break;case"GPFeatureRecordSetLayer":case"GPRecordSet":var i=e.value.url;r.value=i?b.fromJSON(r.value):_.fromJSON(r.value);break;case"GPRasterData":case"GPRasterDataLayer":var n=e.value.mapImage;r.value=n?m.fromJSON(n):M.fromJSON(r.value);break;case"GPField":r.value=x.fromJSON(r.value);break;case"GPMultiValue:GPBoolean":case"GPMultiValue:GPDouble":case"GPMultiValue:GPLong":case"GPMultiValue:GPString":return r;case"GPMultiValue:GPDate":var a=r.value;r.value=a.map(function(e){return new Date(e)});break;case"GPMultiValue:GPDataFile":r.value=r.value.map(function(e){return b.fromJSON(e)});break;case"GPMultiValue:GPLinearUnit":r.value=r.value.map(function(e){return T.fromJSON(e)});break;case"GPMultiValue:GPFeatureRecordSetLayer":case"GPMultiValue:GPRecordSet":r.value=r.value.map(function(e){return _.fromJSON(e)});break;case"GPMultiValue:GPRasterData":case"GPMultiValue:GPRasterDataLayer":r.value=r.value.map(function(e){return e?m.fromJSON(e):M.fromJSON(r.value)});break;case"GPMultiValue:GPField":r.value=r.value.map(function(e){return x.fromJSON(e)});break;default:h.neverReached(t)}return r},t.prototype._gpEncode=function(e,t,r){var i=this;for(var n in e){var a=e[n];Array.isArray(a)?e[n]=JSON.stringify(a.map(function(e){return i._gpEncode({item:e},!0).item},this)):a instanceof Date&&(e[n]=a.getTime())}return this._encode(e,t,r)},t.prototype._getJobStatus=function(e,t){var r=this.parsedUrl,n=r.path,a=r.query,s=n+"/jobs/"+e,o=i({},this.requestOptions,t,{query:i({},a,{f:"json"})});return l(s,o).then(function(e){return w.fromJSON(e.data)})},a([y.property({type:d})],t.prototype,"outSpatialReference",void 0),a([y.property({type:f})],t.prototype,"processExtent",void 0),a([y.property({type:d})],t.prototype,"processSpatialReference",void 0),a([y.property()],t.prototype,"returnFeatureCollection",void 0),a([y.property()],t.prototype,"returnM",void 0),a([y.property()],t.prototype,"returnZ",void 0),a([y.property()],t.prototype,"url",void 0),a([y.subclass("esri/tasks/Geoprocessor")],t)}(y.declared(v))}.apply(null,i))||(e.exports=n)},2310:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(2),r(1),r(144),r(12),r(0),r(37)],void 0===(n=function(e,t,r,i,n,a,s,o){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.extent=null,t.height=null,t.href=null,t.opacity=1,t.rotation=0,t.scale=null,t.visible=!0,t.width=null,t}return r(t,e),i([s.property({type:o})],t.prototype,"extent",void 0),i([s.property()],t.prototype,"height",void 0),i([s.property()],t.prototype,"href",void 0),i([s.property()],t.prototype,"opacity",void 0),i([s.property()],t.prototype,"rotation",void 0),i([s.property()],t.prototype,"scale",void 0),i([s.property()],t.prototype,"visible",void 0),i([s.property()],t.prototype,"width",void 0),i([s.subclass("esri.layer.support.MapImage")],t)}(s.declared(a.JSONSupport))}.apply(null,i))||(e.exports=n)},2311:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(2),r(1),r(12),r(0)],void 0===(n=function(e,t,r,i,n,a){return function(e){function t(t){var r=e.call(this)||this;return r.itemId=null,r.url=null,r}return r(t,e),i([a.property({type:String,json:{read:{source:"itemID"},write:{target:"itemID"}}})],t.prototype,"itemId",void 0),i([a.property({type:String,json:{write:!0}})],t.prototype,"url",void 0),i([a.subclass("esri.tasks.support.DataFile")],t)}(a.declared(n.JSONSupport))}.apply(null,i))||(e.exports=n)},2312:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(2),r(1),r(27),r(12),r(0),r(1683)],void 0===(n=function(e,t,r,i,n,a,s,o){var l=new n.default({esriJobCancelled:"job-cancelled",esriJobCancelling:"job-cancelling",esriJobDeleted:"job-deleted",esriJobDeleting:"job-deleting",esriJobTimedOut:"job-timed-out",esriJobExecuting:"job-executing",esriJobFailed:"job-failed",esriJobNew:"job-new",esriJobSubmitted:"job-submitted",esriJobSucceeded:"job-succeeded",esriJobWaiting:"job-waiting"});return function(e){function t(t){var r=e.call(this)||this;return r.jobId=null,r.jobStatus=null,r.messages=null,r}return r(t,e),i([s.property()],t.prototype,"jobId",void 0),i([s.property({json:{read:l.read}})],t.prototype,"jobStatus",void 0),i([s.property({type:[o]})],t.prototype,"messages",void 0),i([s.subclass("esri.tasks.support.JobInfo")],t)}(s.declared(a.JSONSupport))}.apply(null,i))||(e.exports=n)},2313:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(2),r(1),r(27),r(12),r(0)],void 0===(n=function(e,t,r,i,n,a,s){var o=new n.default({esriMeters:"meters",esriFeet:"feet",esriKilometers:"kilometers",esriMiles:"miles",esriNauticalMiles:"nautical-miles",esriYards:"yards"},{ignoreUnknown:!1});return function(e){function t(t){var r=e.call(this,t)||this;return r.distance=0,r.units=null,r}return r(t,e),i([s.property({json:{write:!0}})],t.prototype,"distance",void 0),i([s.property({json:{read:o.read,write:o.write}})],t.prototype,"units",void 0),i([s.subclass("esri/tasks/support/LinearUnit")],t)}(s.declared(a.JSONSupport))}.apply(null,i))||(e.exports=n)},2314:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(2),r(1),r(27),r(12),r(0)],void 0===(n=function(e,t,r,i,n,a,s){var o=new n.default({GPBoolean:"boolean",GPDataFile:"data-file",GPDate:"date",GPDouble:"double",GPFeatureRecordSetLayer:"feature-record-set-layer",GPField:"field",GPLinearUnit:"linear-unit",GPLong:"long",GPRasterData:"raster-data",GPRasterDataLayer:"raster-data-layer",GPRecordSet:"record-set",GPString:"string","GPMultiValue:GPBoolean":"multi-value","GPMultiValue:GPDataFile":"multi-value","GPMultiValue:GPDate":"multi-value","GPMultiValue:GPDouble":"multi-value","GPMultiValue:GPFeatureRecordSetLayer":"multi-value","GPMultiValue:GPField":"multi-value","GPMultiValue:GPLinearUnit":"multi-value","GPMultiValue:GPLong":"multi-value","GPMultiValue:GPRasterData":"multi-value","GPMultiValue:GPRasterDataLayer":"multi-value","GPMultiValue:GPRecordSet":"multi-value","GPMultiValue:GPString":"multi-value"});return function(e){function t(t){var r=e.call(this)||this;return r.dataType=null,r.value=null,r}return r(t,e),i([s.property({json:{read:o.read,write:o.write}})],t.prototype,"dataType",void 0),i([s.property()],t.prototype,"value",void 0),i([s.subclass("esri.tasks.support.ParameterValue")],t)}(s.declared(a.JSONSupport))}.apply(null,i))||(e.exports=n)},2315:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(2),r(1),r(12),r(0)],void 0===(n=function(e,t,r,i,n,a){return function(e){function t(t){var r=e.call(this,t)||this;return r.format=null,r.itemId=null,r.url=null,r}return r(t,e),i([a.property()],t.prototype,"format",void 0),i([a.property({json:{read:{source:"itemID"},write:{target:"itemID"}}})],t.prototype,"itemId",void 0),i([a.property()],t.prototype,"url",void 0),i([a.subclass("esri/tasks/support/RasterData")],t)}(a.declared(n.JSONSupport))}.apply(null,i))||(e.exports=n)},2316:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(27)],void 0===(n=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var i=new r.default({PDF:"pdf",PNG32:"png32",PNG8:"png8",JPG:"jpg",GIF:"gif",EPS:"eps",SVG:"svg",SVGZ:"svgz"});t.fromJSON=i.fromJSON.bind(i),t.toJSON=i.toJSON.bind(i)}.apply(null,i))||(e.exports=n)},2317:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(27)],void 0===(n=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var i=new r.default({MAP_ONLY:"map-only","A3 Landscape":"a3-landscape","A3 Portrait":"a3-portrait","A4 Landscape":"a4-landscape","A4 Portrait":"a4-portrait","Letter ANSI A Landscape":"letter-ansi-a-landscape","Letter ANSI A Portrait":"letter-ansi-a-portrait","Tabloid ANSI B Landscape":"tabloid-ansi-b-landscape","Tabloid ANSI B Portrait":"tabloid-ansi-b-portrait"});t.fromJSON=i.fromJSON.bind(i),t.toJSON=i.toJSON.bind(i)}.apply(null,i))||(e.exports=n)},2318:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(229),r(23),r(17),r(655)],void 0===(n=function(e,t,r,i,n,a){function s(e){return e&&"esri.views.layers.GroupLayerView"===e.declaredClass}Object.defineProperty(t,"__esModule",{value:!0});var o="simple-marker",l="picture-marker",u="simple-line",h="simple-fill",c="shield-label-symbol",p="text";t.applyVisualVariables=function(e,t){var r=t.graphic,s=t.renderer,y=t.symbol,f=y.type;if(f!==p&&f!==c&&"visualVariables"in s&&s.visualVariables){var d=s.getVisualVariablesForType("size"),g=s.getVisualVariablesForType("color"),x=s.getVisualVariablesForType("opacity"),m=s.getVisualVariablesForType("rotation"),v=d&&d[0],b=g&&g[0],_=x&&x[0],S=m&&m[0];if(v){var w=f===o?y.style:null,T=a.getSize(v,r,{shape:w});null!=T&&(f===o?e.size=n.px2pt(T):f===l?(e.width=n.px2pt(T),e.height=n.px2pt(T)):f===u?e.width=n.px2pt(T):e.outline&&(e.outline.width=n.px2pt(T)))}if(b){var P=a.getColor(b,r);(P&&f===o||f===u||f===h)&&(e.color=i.toJSON(P))}if(_){var M=a.getOpacity(_,r);null!=M&&e.color&&(e.color[3]=Math.round(255*M))}S&&(e.angle=-a.getRotationAngle(s,r))}},t.createMultipointLayer=function(){return{layerDefinition:{name:"multipointLayer",geometryType:"esriGeometryMultipoint",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryMultipoint",features:[]}}},t.createPolygonLayer=function(){return{layerDefinition:{name:"polygonLayer",geometryType:"esriGeometryPolygon",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryPolygon",features:[]}}},t.createPointLayer=function(){return{layerDefinition:{name:"pointLayer",geometryType:"esriGeometryPoint",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryPoint",features:[]}}},t.createPolylineLayer=function(){return{layerDefinition:{name:"polylineLayer",geometryType:"esriGeometryPolyline",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryPolyline",features:[]}}},t.getVisibleLayerViews=function(e,t){var i,n=e.allLayerViews.items;if(t===e.scale)i=n.filter(function(e){return!e.suspended});else{i=[];for(var a=0,o=n;a<o.length;a++){var l=o[a];s(l.parent)&&!r.includes(i,l.parent)||!l.visible||t&&"isVisibleAtScale"in l&&!l.isVisibleAtScale(t)||i.push(l)}}return i},t.isBingMapsLayer=function(e){return e&&"bing-maps"===e.type},t.isCSVLayer=function(e){return e&&"csv"===e.type},t.isFeatureLayer=function(e){return e&&"feature"===e.type},t.isGraphicsLayer=function(e){return e&&"graphics"===e.type},t.isGroupLayer=function(e){return e&&"group"===e.type},t.isImageryLayer=function(e){return e&&"imagery"===e.type},t.isKMLLayer=function(e){return e&&"kml"===e.type},t.isMapImageLayer=function(e){return e&&"map-image"===e.type},t.isMapNotesLayer=function(e){return e&&"map-notes"===e.type},t.isOpenStreetMapLayer=function(e){return e&&"open-street-map"===e.type},t.isStreamLayer=function(e){return e&&"stream"===e.type},t.isTileLayer=function(e){return e&&"tile"===e.type},t.isVectorTileLayer=function(e){return e&&"vector-tile"===e.type},t.isWebTileLayer=function(e){return e&&"web-tile"===e.type},t.isWMSLayer=function(e){return e&&"wms"===e.type},t.isWMTSLayer=function(e){return e&&"wmts"===e.type}}.apply(null,i))||(e.exports=n)},2319:function(e,t,r){var i,n;i=[r(16)],void 0===(n=function(e){return e.createSubclass({declaredClass:"esri.tasks.support.PrintTemplate",properties:{attributionVisible:{value:!0,type:Boolean},exportOptions:{value:{width:800,height:1100,dpi:96},type:Object},forceFeatureAttributes:{value:!1,type:Boolean},format:{value:"png32",type:String},label:{value:null,type:String},layout:{value:"map-only",type:String},layoutOptions:{value:null,type:Object},outScale:{value:0,type:Number},preserveScale:{value:!0,type:Boolean},showLabels:{value:!0,type:Boolean}}})}.apply(null,i))||(e.exports=n)}}]);