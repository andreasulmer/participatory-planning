(function(){(this||window).webpackJsonp.registerAbsMids({"esri/tasks/operations/PBFWorker":1576,"esri/tasks/operations/query":1577,"esri/tasks/operations/pbfQueryUtils":1638,"esri/tasks/operations/urlUtils":1639,"esri/views/3d/layers/i3s/I3SUtil":1641,"esri/tasks/operations/pbfFeatureServiceParser":1642,"esri/tasks/operations/pbfDehydratedFeatureSet":1643,"esri/tasks/operations/pbfOptimizedFeatureSet":1644,"esri/views/3d/support/orientedBoundingBox":1655,"esri/tasks/operations/queryAttachments":1660,"esri/tasks/QueryTask":1665,"esri/tasks/operations/queryRelatedRecords":1666,"esri/views/3d/layers/i3s/I3SBinaryReader":1678,"esri/core/libs/gl-matrix-2/quatf32":1703,"esri/views/3d/layers/i3s/LEPCC":1734,"esri/core/libs/gl-matrix-2/factories/quatf32":1807,"esri/views/3d/support/dito":2443})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[3,81],{1576:function(e,t,r){var n,a;n=[r.dj.c(e.i),t,r(3),r(97),r(7),r(407),r(405),r(40),r(633),r(1638),r.dj.m(e)],void 0===(a=function(e,t,r,n,a,o,i,s,u,c,l){Object.defineProperty(t,"__esModule",{value:!0});var f=function(){function e(){}return e.prototype._parseFeatureQuery=function(e){var t=c.parsePBFFeatureQuery(e.buffer,e.options);if(e.options&&"dehydrated"===e.options.type){var r=t;if(t.spatialReference=r.spatialReference.toJSON(),r.fields)for(var n=0;n<r.fields.length;n++)r.fields[n]=r.fields[n].toJSON()}return a.resolve(t)},e}(),d=function(t){function f(){var r=t.call(this)||this;return r._thread=void 0,i.open(o.getAbsMid("./PBFWorker",e,l),{strategy:"dedicated"}).then(function(e){void 0===r._thread?r._thread=e:e.close()}),r}return r(f,t),f.prototype.destroy=function(){this._thread&&this._thread.close(),this._thread=null},f.prototype.parseFeatureQuery=function(e,t){return e&&0!==e.byteLength?this._thread?this._thread.invoke("_parseFeatureQuery",{buffer:e,options:t},{transferList:[e]}).then(function(e){if(t&&"dehydrated"===t.type){var r=e;if(r.spatialReference=s.fromJSON(r.spatialReference),r.fields)for(var a=0;a<r.fields.length;a++)r.fields[a]=u.fromJSON(r.fields[a]);for(var o=r.spatialReference,i=0,c=r.features;i<c.length;i++){var l=c[i];l.uid=n.generateUID(),l.geometry&&(l.geometry.spatialReference=o)}}return e}):a.resolve(c.parsePBFFeatureQuery(e,t)):a.resolve(null)},f}(f);t.PBFWorker=d,t.default=function(){return new f}}.apply(null,n))||(e.exports=a)},1577:function(e,t,r){var n,a;n=[r.dj.c(e.i),t,r(4),r(44),r(58),r(9),r(31),r(57),r(1635),r(1638),r(1576),r(1639),r(105)],void 0===(a=function(e,t,r,n,a,o,i,s,u,c,l,f){function d(e,t){var r=e.geometry,n=e.toJSON(),a=n;if(r&&(a.geometry=JSON.stringify(r),a.geometryType=s.getJsonType(r),a.inSR=r.spatialReference.wkid||JSON.stringify(r.spatialReference)),n.groupByFieldsForStatistics&&(a.groupByFieldsForStatistics=n.groupByFieldsForStatistics.join(",")),n.objectIds&&(a.objectIds=n.objectIds.join(",")),n.orderByFields&&(a.orderByFields=n.orderByFields.join(",")),!n.outFields||t&&(t.returnCountOnly||t.returnExtentOnly||t.returnIdsOnly)?delete a.outFields:-1!==n.outFields.indexOf("*")?a.outFields="*":a.outFields=n.outFields.join(","),n.outSR?a.outSR=n.outSR.wkid||JSON.stringify(n.outSR):r&&(n.returnGeometry||n.returnCentroid)&&(a.outSR=a.inSR),n.returnGeometry&&delete n.returnGeometry,n.outStatistics&&(a.outStatistics=JSON.stringify(n.outStatistics)),n.pixelSize&&(a.pixelSize=JSON.stringify(n.pixelSize)),n.quantizationParameters&&(a.quantizationParameters=JSON.stringify(n.quantizationParameters)),n.source&&(a.layer=JSON.stringify({source:n.source}),delete n.source),n.timeExtent){var o=n.timeExtent,i=o.start,u=o.end;null==i&&null==u||(a.time=i===u?i:(null==i?"null":i)+","+(null==u?"null":u)),delete n.timeExtent}return a}function p(e,t,s,c,l){void 0===c&&(c={});var p="string"==typeof e?i.urlToObject(e):e,h=t.geometry?[t.geometry]:[];return c.responseType="pbf"===s?"array-buffer":"json",a.safeCast(u.normalizeCentralMeridian(h,null,c)).then(function(e){var a=e&&e[0];o.isSome(a)&&((t=t.clone()).geometry=a);var i=f.mapParameters(r({},p.query,{f:s},l,d(t,l)));return n(p.path+"/query",r({},c,{query:i}))})}Object.defineProperty(t,"__esModule",{value:!0});var h,y="Layer does not support extent calculation.";t.queryToQueryStringParameters=d,t.executeQuery=function(e,t,r){return p(e,t,"json",r)},t.executeQueryPBF=function(e,t,r,n){return p(e,t,"pbf",n).then(function(e){var t=function(t){var r=e;return r.data=t,r};return r.useWorker?(null==h&&(h=new l.PBFWorker),h).parseFeatureQuery(e.data,r).then(function(e){return t(e)}):t(c.parsePBFFeatureQuery(e.data,r))})},t.executeQueryForIds=function(e,t,r){return p(e,t,"json",r,{returnIdsOnly:!0})},t.executeQueryForCount=function(e,t,r){return p(e,t,"json",r,{returnIdsOnly:!0,returnCountOnly:!0})},t.executeQueryForExtent=function(e,t,r){return p(e,t,"json",r,{returnExtentOnly:!0,returnCountOnly:!0}).then(function(e){var t=e.data;if(t.hasOwnProperty("extent"))return e;if(t.features)throw new Error(y);if(t.hasOwnProperty("count"))throw new Error(y);return e})}}.apply(null,n))||(e.exports=a)},1638:function(e,t,r){var n,a;n=[r.dj.c(e.i),t,r(1642)],void 0===(a=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.parsePBFFeatureQuery=function(e,t){var n=r.parseFeatureQuery(e,t).queryResult.featureResult;if(n&&n.features&&n.features.length&&n.objectIdFieldName)for(var a=n.objectIdFieldName,o=0,i=n.features;o<i.length;o++){var s=i[o];s.attributes&&(s.objectId=s.attributes[a])}return n}}.apply(null,n))||(e.exports=a)},1639:function(e,t,r){var n,a;n=[r.dj.c(e.i),t],void 0===(a=function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.mapParameters=function e(t){var r={};for(var n in t)if("declaredClass"!==n){var a=t[n];if(null!=a&&"function"!=typeof a)if(Array.isArray(a)){r[n]=[];for(var o=0;o<a.length;o++)r[n][o]=e(a[o])}else"object"==typeof a?a.toJSON&&(r[n]=JSON.stringify(a)):r[n]=a}return r}}.apply(null,n))||(e.exports=a)},1641:function(e,t,r){var n,a;n=[r.dj.c(e.i),t,r(44),r(43),r(14),r(9),r(7),r(121),r(21),r(19),r(414),r(1703),r(8),r(35),r(40),r(45),r(63),r(1665),r(402),r(1678),r(41),r(80)],void 0===(a=function(e,t,r,n,a,o,i,s,u,c,l,f,d,p,h,y,v,g,m,b,w,x){function S(e){return e&&parseInt(e.substring(e.lastIndexOf("/")+1,e.length),10)}function I(e,t){var r=t[0],n=t[1],a=t[2],o=t[3],i=e[0]-r,s=r-e[3],u=e[1]-n,c=n-e[4],l=e[2]-a,f=a-e[5],d=Math.max(i,s,0),p=Math.max(u,c,0),h=Math.max(l,f,0),y=d*d+p*p+h*h;return y>o*o?0:y>0?1:-Math.max(i,s,u,c,l,f)>o?3:2}function F(e,t,r){for(var n=[],a=r&&r.missingFields,o=r&&r.originalFields,i=0,s=e;i<s.length;i++){for(var u=s[i],c=u.toLowerCase(),l=!1,f=0,d=t;f<d.length;f++){var p=d[f];if(c===p.name.toLowerCase()){n.push(p.name),l=!0,o&&o.push(u);break}}!l&&a&&a.push(u)}return n}function C(e,t,r){if(null!=e.maxRecordCount&&t.length>e.maxRecordCount){var n=function(e,t){for(var r=e.length,n=Math.ceil(r/t),a=[],o=0;o<n;o++){var i=Math.floor(r*o/n),s=Math.floor(r*(o+1)/n);a.push(e.slice(i,s))}return a}(t,e.maxRecordCount);return i.all(n.map(function(t){return C(e,t,r)})).then(T)}var o=new m({objectIds:t,outFields:r,orderByFields:[e.objectIdField]});return new g(e.parsedUrl.path).execute(o).then(function(e){return e&&e.features&&e.features.length===t.length?e.features.map(function(e){return e.attributes}):i.reject(new a("scenelayer:feature-not-in-associated-layer","Feature not found in associated feature layer"))})}function P(e,t,n,o,s,u){for(var c=[],l=0,f=t;l<f.length;l++){var d=f[l];if(d&&-1!==s.indexOf(d.name)){var p=e+"/nodes/"+n.resources.attributes+"/attributes/"+d.key+"/0";c.push({url:p,storageInfo:d})}}return i.eachAlways(c.map(function(e){return r(e.url,{responseType:"array-buffer"}).then(function(t){return b.readBinaryAttribute(e.storageInfo,t.data)})})).then(function(e){var t=[];if(!u.ignoreUnavailableFields&&e.some(function(e){return null==e.value})){for(var r=[],n=0;n<e.length;n++)null==e[n].value&&r.push({name:c[n].storageInfo.name,error:e[n].error});return i.reject(new a("scenelayer:attribute-request-failed","Request for scene layer attributes failed",{failedAttributes:r}))}for(var s=0,l=o;s<l.length;s++){var f=l[s],d={};for(n=0;n<e.length;n++)null!=e[n].value&&(d[c[n].storageInfo.name]=M(e[n].value,f));t.push(d)}return t})}function M(e,t){if(!e)return null;var r=e[t];return s.isInt16Array(e)?r===B?null:r:s.isInt32Array(e)?r===z?null:r:r!=r?null:r}function T(e){for(var t=[],r=0,n=e;r<n.length;r++){var a=n[r];t=t.concat(a)}return t}function j(e){var t=new h(S(e.store.indexCRS||e.store.geographicCRS));return t.equals(e.spatialReference)?e.spatialReference:t}function k(e){var t=new h(S(e.store.vertexCRS||e.store.projectedCRS));return t.equals(e.spatialReference)?e.spatialReference:t}function A(e,t,r){if(!v.canProject(e,t))throw new a("layerview:spatial-reference-incompatible","The spatial reference of this scene layer is incompatible with the spatial reference of the view",{});if("local"===r&&e.isGeographic)throw new a("layerview:local-gcs-not-supported","Geographic coordinate systems are not supported in local scenes",{})}function O(e,t,r){var n=j(e),a=k(e);A(n,t,r),A(a,t,r)}function R(e){return"mesh-3d"===e.type}Object.defineProperty(t,"__esModule",{value:!0}),t.DDS_ENCODING_STRING="image/vnd-ms.dds",t.BROWSER_SUPPORTED_IMAGE_ENCODING_STRINGS=["image/jpeg","image/png"],t.extractWkid=S,t.selectEncoding=function(e,r){if(r)for(var n=0;n<e.length;n++)if(e[n].encoding===t.DDS_ENCODING_STRING)return e[n];for(n=0;n<e.length;n++)if(t.BROWSER_SUPPORTED_IMAGE_ENCODING_STRINGS.indexOf(e[n].encoding)>-1)return e[n];return null},t.findIntersectingNodes=function(e,t,r,n,a,o){a.traverse(r,function(r){var a=r.mbs;t!==n&&(a=U,w.mbsToMbs(r.mbs,n,a,t));var i=I(e,a);if(0!==i)return o(r,i),!0})},t.filterInPlace=function(e,t,r){for(var n=0,a=0,o=0;o<t.length&&n<e.length;o++)e[n]===t[o]&&(r(o)&&(e[a]=e[n],a++),n++);e.length=a};var q=y.create();t.getClipAABB=function(e,t){var r=u.mat4.copy(x.sm4d.get(),t.objectTransformation),n=t.geometryRecords[0].getShaderTransformation();if(u.mat4.multiply(r,r,n),0===r[1]&&0===r[2]&&0===r[3]&&0===r[4]&&0===r[6]&&0===r[7]&&0===r[8]&&0===r[9]&&0===r[11]&&1===r[15])return q[0]=(e[0]-r[12])/r[0],q[1]=(e[1]-r[13])/r[5],q[2]=(e[2]-r[14])/r[10],q[3]=(e[3]-r[12])/r[0],q[4]=(e[4]-r[13])/r[5],q[5]=(e[5]-r[14])/r[10],q};var U=p.vec4f64.create();t.intersectBoundingBoxWithMbs=I,t.findFieldsCaseInsensitive=F,t.whenGraphicAttributes=function(e,t,r,o,s,u){var c=!0===(u&&u.populateObjectId),l=u.ignoreUnavailableFields?void 0:[],f=1===o.length&&"*"===o[0];!f&&c&&(o=function(e,t){return e.filter(function(e){return e.toLowerCase()!==t.toLowerCase()}).concat([t])}(o,r));var d=f?o:F(o,e.fields,{missingFields:l});if(l&&0!==l.length)return i.reject(new a("scenelayer:unknown-fields","This scene layer does not have the requested fields",{unknownFields:l}));if(0===t.length)return i.resolve(t);var p=e.associatedLayer,h=e.attributeStorageInfo,y=f?e.fields.map(function(e){return e.name}):d;if(p)return function(e,t,r,n){t.sort(function(e,t){return e.attributes[r]-t.attributes[r]});var a=t.map(function(e){return e.attributes[r]}),o=[],i=F(n,e.fields,{originalFields:o});return C(e,a,i).then(function(e){for(var r=0;r<t.length;r++){var n=t[r],a=e[r],s={};for(var u in n.attributes)s[u]=n.attributes[u];for(var c=0;c<o.length;c++)s[o[c]]=a[i[c]];n.attributes=s}return t})}(p,t,r,y);var v=function(e,t){for(var r=[],n=0,a=e;n<a.length;n++){var o=a[n];o in t.attributes||r.push(o)}return r}(y,t[0]);if(0===v.length)return i.resolve(t);if(h){var g=s(t);if(!g)return i.reject(new a("scenelayer:features-not-loaded","Tried to query attributes for unloaded features"));var m=e.parsedUrl.path;return i.all(g.map(function(e){return P(m,h,e.node,e.indices,v,u).then(function(t){for(var r=0;r<e.graphics.length;r++){var n=e.graphics[r],a=t[r];for(var o in n.attributes)o in a||(a[o]=n.attributes[o]);n.attributes=a}return e.graphics})})).then(n.flatten)}return i.reject(new a("scenelayer:no-attribute-source","This scene layer does not have a source for attributes available"))};var B=-Math.pow(2,15),z=-Math.pow(2,31);t.getCachedAttributeValue=M,t.convertFlatRangesToOffsets=function(e,t,r){for(var n=null!=t?t:e.length/r,o=new Uint32Array(n+1),i=0;i<n;i++){var s=e[i*r],u=3*s;o[i]=u;var c=(i-1)*r+1;if(c>=0&&s-1!==e[c])throw new a("Face ranges are not continuous")}var l=3*(e[(n-1)*r+1]+1);return o[o.length-1]=l,o},t.getIndexCrs=j,t.getVertexCrs=k,t.getCacheKeySuffix=function(e,t){return t===w.SphericalECEFSpatialReference?"@ECEF":e.equals(t)?"":null!=t.wkid?"@"+t.wkid:null},t.checkSpatialReference=A,t.checkSpatialReferences=O,t.checkSceneLayerValid=function(e){if(null==e.store||null==e.store.defaultGeometrySchema||!function(e){return!(null!=e.geometryType&&"triangles"!==e.geometryType||null!=e.topology&&"PerAttributeArray"!==e.topology||null==e.vertexAttributes||null==e.vertexAttributes.position)}(e.store.defaultGeometrySchema))throw new a("scenelayer:unsupported-geometry-schema","The geometry schema of this scene layer is not supported.",{})},t.checkSceneLayerCompatibleWithView=function(e,t){O(e,t.spatialReference,t.viewingMode)},t.checkPointCloudLayerValid=function(e){if(null==e.store||null==e.store.defaultGeometrySchema||!function(e){return!(null==e.geometryType||"points"!==e.geometryType||null!=e.topology&&"PerAttributeArray"!==e.topology||null!=e.encoding&&""!==e.encoding&&"lepcc-xyz"!==e.encoding||null==e.vertexAttributes||null==e.vertexAttributes.position)}(e.store.defaultGeometrySchema))throw new a("pointcloud:unsupported-geometry-schema","The geometry schema of this point cloud scene layer is not supported.",{})},t.checkPointCloudLayerCompatibleWithView=function(e,t){A(e.spatialReference,t.spatialReference,t.viewingMode)},t.rendererNeedsTextures=function(e){if(null==e||!function(e){return"simple"===e.type||"class-breaks"===e.type||"unique-value"===e.type}(e))return!0;if(("unique-value"===e.type||"class-breaks"===e.type)&&null==e.defaultSymbol)return!0;var t=e.getSymbols();if(0===t.length)return!0;for(var r=0,n=t;r<n.length;r++){var a=n[r];if(!R(a)||0===a.symbolLayers.length)return!0;for(var i=0,s=a.symbolLayers.items;i<s.length;i++){var u=s[i];if("fill"!==u.type||o.isNone(u.material)||o.isNone(u.material.color)||"replace"!==u.material.colorMixMode)return!0}}return!1};var N=function(){return function(){this.edges=null,this.material=null,this.castShadows=!0}}();t.SymbolInfo=N,t.getSymbolInfo=function(e){for(var t=new N,r=!1,n=!1,a=0,i=e.symbolLayers.items;a<i.length;a++){var s=i[a];if("fill"===s.type&&s.enabled){var u=s.material,c=s.edges;if(o.isSome(u)&&!r){var l=u.color,f=u.colorMixMode;o.isSome(l)?t.material={color:[l.r/255,l.g/255,l.b/255],alpha:l.a,colorMixMode:f}:t.material={color:[1,1,1],alpha:1,colorMixMode:"multiply"},t.castShadows=s.castShadows,r=!0}o.isSome(c)&&!n&&(t.edges=c,n=!0)}}return t.material||(t.material={color:[1,1,1],alpha:1,colorMixMode:"multiply"}),t},t.addWraparound=function(e,t){return(0|e)+(0|t)|0},t.transformObb=function(e,t,r,n,a){if(void 0===a&&(a=0),d.vec3.set(r.center,e.center[0],e.center[1],e.center[2]+a),t.isGeographic||n!==w.SphericalECEFSpatialReference)l.quat.copy(r.quaternion,e.quaternion),d.vec3.copy(r.halfSize,e.halfSize);else{w.computeLinearTransformation(t,r.center,L,n);var o=2*Math.sqrt(1+L[0]+L[5]+L[10]);_[0]=(L[6]-L[9])/o,_[1]=(L[8]-L[2])/o,_[2]=(L[1]-L[4])/o,_[3]=.25*o,l.quat.multiply(r.quaternion,_,e.quaternion),d.vec3.copy(r.halfSize,e.halfSize)}w.bufferToBuffer(r.center,t,0,r.center,n,0,1)};var L=c.mat4f64.create(),_=f.quatf32.create()}.apply(null,n))||(e.exports=a)},1642:function(e,t,r){var n,a;n=[r.dj.c(e.i),t,r(14),r(6),r(639),r(1643),r(1644)],void 0===(a=function(e,t,r,n,a,o,i){function s(e){return e>=C.length?null:C[e]}function u(e){return e>=P.length?null:P[e]}function c(e){return e>=M.length?null:M[e]}function l(e,t){return t>=e.geometryTypes.length?null:e.geometryTypes[t]}function f(e,t,r){for(var n=t.createPointGeometry(r);e.next();)switch(e.tag()){case 3:for(var a=e.getUInt32(),o=e.pos()+a,i=0;e.pos()<o;)t.addCoordinatePoint(n,e.getSInt64(),0,i++);break;case 1:case 2:default:e.skip()}return n}function d(e,t,r){for(var n=t.createGeometry(r),a=2+(r.hasZ?1:0)+(r.hasM?1:0);e.next();)switch(e.tag()){case 2:for(var o=e.getUInt32(),i=e.pos()+o,s=0;e.pos()<i;)t.addLength(n,e.getUInt32(),s++);break;case 3:for(var u=e.getUInt32(),c=(i=e.pos()+u,0),l=0;e.pos()<i;)t.addCoordinate(n,e.getSInt64(),l,c),++c===a&&(l++,c=0);break;case 1:default:e.skip()}return n}function p(e){for(;e.next();)switch(e.tag()){case 1:return e.getString();case 2:return e.getFloat();case 3:return e.getDouble();case 4:return e.getSInt32();case 5:return e.getUInt32();case 6:return e.getInt64();case 7:return e.getUInt64();case 8:return e.getSInt64();case 9:return e.getBool();default:return e.skip(),null}return null}function h(e){for(var t={type:s(0)};e.next();)switch(e.tag()){case 1:t.name=e.getString();break;case 2:t.type=s(e.getEnum());break;case 3:t.alias=e.getString();break;case 4:t.sqlType=u(e.getEnum());break;case 5:case 6:default:e.skip()}return t}function y(e,t,r,n){for(var a=t.createFeature(r),o=0;e.next();)switch(e.tag()){case 1:var i=n[o++].name;a.attributes[i]=e.processMessage(p);break;case 2:a.geometry=e.processMessageWithArgs(d,t,r);break;case 4:a.centroid=e.processMessageWithArgs(f,t,r);break;default:e.skip()}return a}function v(e){for(var t=[0,0,0,0];e.next();)switch(e.tag()){case 1:t[0]=e.getDouble();break;case 2:t[1]=e.getDouble();break;case 4:t[2]=e.getDouble();break;case 3:t[3]=e.getDouble();break;default:e.skip()}return t}function g(e){for(var t=[0,0,0,0];e.next();)switch(e.tag()){case 1:t[0]=e.getDouble();break;case 2:t[1]=e.getDouble();break;case 4:t[2]=e.getDouble();break;case 3:t[3]=e.getDouble();break;default:e.skip()}return t}function m(e){for(var t={originPosition:c(0)};e.next();)switch(e.tag()){case 1:t.originPosition=c(e.getEnum());break;case 2:t.scale=e.processMessage(v);break;case 3:t.translate=e.processMessage(g);break;default:e.skip()}return t}function b(e){for(var t={};e.next();)switch(e.tag()){case 1:t.shapeAreaFieldName=e.getString();break;case 2:t.shapeLengthFieldName=e.getString();break;case 3:t.units=e.getString();break;default:e.skip()}return t}function w(e,t){for(var r=t.createSpatialReference();e.next();)switch(e.tag()){case 1:r.wkid=e.getUInt32();break;case 5:r.wkt=e.getString();break;case 2:case 3:case 4:default:e.skip()}return r}function x(e,t){var r=t.createFeatureResult();r.geometryType=l(t,0);for(var n=!1;e.next();)switch(e.tag()){case 1:r.objectIdFieldName=e.getString();break;case 3:r.globalIdFieldName=e.getString();break;case 4:r.geohashFieldName=e.getString();break;case 5:r.geometryProperties=e.processMessage(b);break;case 7:r.geometryType=l(t,e.getEnum());break;case 8:r.spatialReference=e.processMessageWithArgs(w,t);break;case 10:r.hasZ=e.getBool();break;case 11:r.hasM=e.getBool();break;case 12:r.transform=e.processMessage(m);break;case 9:var a=e.getBool();r.exceededTransferLimit=a;break;case 13:t.addField(r,e.processMessage(h));break;case 15:n||(t.prepareFeatures(r),n=!0),t.addFeature(r,e.processMessageWithArgs(y,t,r,r.fields));break;case 2:case 6:default:e.skip()}return t.finishFeatureResult(r),r}function S(e,t){for(var r={};e.next();)switch(e.tag()){case 1:r.featureResult=e.processMessageWithArgs(x,t);break;default:e.skip()}return r}function I(e){return e&&"dehydrated"===e.type?new o.Context(e):new i.Context(e)}Object.defineProperty(t,"__esModule",{value:!0});var F=n.getLogger("esri.tasks.operations.pbfFeatureServiceParser"),C=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGeometry","esriFieldTypeBlob","esriFieldTypeRaster","esriFieldTypeGUID","esriFieldTypeGlobalID","esriFieldTypeXML"],P=["sqlTypeBigInt","sqlTypeBinary","sqlTypeBit","sqlTypeChar","sqlTypeDate","sqlTypeDecimal","sqlTypeDouble","sqlTypeFloat","sqlTypeGeometry","sqlTypeGUID","sqlTypeInteger","sqlTypeLongNVarchar","sqlTypeLongVarbinary","sqlTypeLongVarchar","sqlTypeNChar","sqlTypeNVarchar","sqlTypeOther","sqlTypeReal","sqlTypeSmallInt","sqlTypeSqlXml","sqlTypeTime","sqlTypeTimestamp","sqlTypeTimestamp2","sqlTypeTinyInt","sqlTypeVarbinary","sqlTypeVarchar"],M=["upperLeft","lowerLeft"];t.parseFeatureQuery=function(e,t){var n=I(t);try{for(var o=new a(new Uint8Array(e),new DataView(e)),i={};o.next();)switch(o.tag()){case 2:i.queryResult=o.processMessageWithArgs(S,n);break;default:o.skip()}return i}catch(e){var s=new r("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:e});return F.error(s),{queryResult:{featureResult:n.createFeatureResult()}}}}}.apply(null,n))||(e.exports=a)},1643:function(e,t,r){var n,a;n=[r.dj.c(e.i),t,r(97),r(24),r(40),r(103),r(633)],void 0===(a=function(e,t,r,n,a,o,i){function s(e,t,r,n){return t}function u(e,t,r,n){switch(r){case 0:return d(e,t+n,0);case 1:return p(e,t+n,1)}}function c(e,t,r,n){switch(r){case 0:return d(e,t+n,0);case 1:return p(e,t+n,1);case 2:return d(e,t,2)}}function l(e,t,r,n){switch(r){case 0:return d(e,t+n,0);case 1:return p(e,t+n,1);case 2:return d(e,t,3)}}function f(e,t,r,n){switch(r){case 0:return d(e,t+n,0);case 1:return p(e,t+n,1);case 2:case 3:return d(e,t,3)}}function d(e,t,r){var n=e.translate,a=e.scale;return n[r]+t*a[r]}function p(e,t,r){var n=e.translate,a=e.scale;return n[r]-t*a[r]}Object.defineProperty(t,"__esModule",{value:!0});var h=function(){function e(e){this.options=e,this.geometryTypes=["point","multipoint","polyline","polygon"],this.previousCoordinate=[0,0],this.transform=null,this.applyTransform=s,this.lengths=[],this.currentLengthIndex=0,this.toAddInCurrentPath=0,this.vertexDimension=0,this.coordinateBuffer=null,this.coordinateBufferPtr=0,this.AttributesConstructor=function(){}}return e.prototype.createFeatureResult=function(){return new o.DehydratedFeatureSetClass},e.prototype.finishFeatureResult=function(e){this.options.applyTransform&&(e.transform=null),this.AttributesConstructor=function(){},this.coordinateBuffer=null,this.lengths.length=0},e.prototype.createSpatialReference=function(){return new a},e.prototype.addField=function(e,t){e.fields.push(i.fromJSON(t));var r=e.fields.map(function(e){return e.name});this.AttributesConstructor=function(){for(var e=0,t=r;e<t.length;e++)this[t[e]]=null}},e.prototype.addFeature=function(e,t){var r=this.options.maxStringAttributeLength?this.options.maxStringAttributeLength:0;if(r>0)for(var n in t.attributes){var a=t.attributes[n];"string"==typeof a&&a.length>r&&(t.attributes[n]="")}e.features.push(t)},e.prototype.prepareFeatures=function(e){switch(this.options.applyTransform&&e.transform&&(this.transform=e.transform,this.applyTransform=this.deriveApplyTransform(e)),this.vertexDimension=2,e.hasZ&&this.vertexDimension++,e.hasM&&this.vertexDimension++,e.geometryType){case"point":this.addCoordinate=this.addCoordinatePoint.bind(this),this.createGeometry=this.createPointGeometry.bind(this);break;case"polygon":this.addCoordinate=this.addCoordinatePolygon.bind(this),this.createGeometry=this.createPolygonGeometry.bind(this);break;case"polyline":this.addCoordinate=this.addCoordinatePolyline.bind(this),this.createGeometry=this.createPolylineGeometry.bind(this);break;case"multipoint":this.addCoordinate=this.addCoordinateMultipoint.bind(this),this.createGeometry=this.createMultipointGeometry.bind(this);break;default:n.neverReached(e.geometryType)}},e.prototype.createFeature=function(e){return this.lengths.length=0,this.currentLengthIndex=0,this.previousCoordinate[0]=0,this.previousCoordinate[1]=0,this.coordinateBuffer=null,this.coordinateBufferPtr=0,new o.DehydratedFeatureClass(r.generateUID(),null,new this.AttributesConstructor)},e.prototype.addLength=function(e,t,r){0===this.lengths.length&&(this.toAddInCurrentPath=t),this.lengths.push(t)},e.prototype.createPointGeometry=function(e){var t={type:"point",x:0,y:0,spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM};return t.hasZ&&(t.z=0),t.hasM&&(t.m=0),t},e.prototype.addCoordinatePoint=function(e,t,r,n){switch(t=this.applyTransform(this.transform,t,n,0),n){case 0:e.x=t;break;case 1:e.y=t;break;case 2:e.hasZ?e.z=t:e.m=t;break;case 3:e.m=t}},e.prototype.transformPathLikeValue=function(e,t){var r=0;return t<=1&&(r=this.previousCoordinate[t],this.previousCoordinate[t]+=e),this.applyTransform(this.transform,e,t,r)},e.prototype.addCoordinatePolyline=function(e,t,r,n){this.dehydratedAddPointsCoordinate(e.paths,t,r,n)},e.prototype.addCoordinatePolygon=function(e,t,r,n){this.dehydratedAddPointsCoordinate(e.rings,t,r,n)},e.prototype.addCoordinateMultipoint=function(e,t,r){0===r&&e.points.push([]);var n=this.transformPathLikeValue(t,r);e.points[e.points.length-1].push(n)},e.prototype.createPolygonGeometry=function(e){return{type:"polygon",rings:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}},e.prototype.createPolylineGeometry=function(e){return{type:"polyline",paths:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}},e.prototype.createMultipointGeometry=function(e){return{type:"multipoint",points:[],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}},e.prototype.dehydratedAddPointsCoordinate=function(e,t,r,n){if(null===this.coordinateBuffer){var a=this.lengths.reduce(function(e,t){return e+t},0);this.coordinateBuffer=new Float64Array(a*this.vertexDimension)}0===n&&0==this.toAddInCurrentPath--&&(e.push([]),this.toAddInCurrentPath=this.lengths[++this.currentLengthIndex]-1,this.previousCoordinate[0]=0,this.previousCoordinate[1]=0);var o=this.transformPathLikeValue(t,n),i=e[e.length-1];0===n&&i.push(new Float64Array(this.coordinateBuffer.buffer,this.coordinateBufferPtr*Float64Array.BYTES_PER_ELEMENT,this.vertexDimension)),this.coordinateBuffer[this.coordinateBufferPtr++]=o},e.prototype.deriveApplyTransform=function(e){var t=e.hasZ,r=e.hasM;return t&&r?f:t?c:r?l:u},e}();t.Context=h}.apply(null,n))||(e.exports=a)},1644:function(e,t,r){var n,a;n=[r.dj.c(e.i),t,r(634),r(641),r(404)],void 0===(a=function(e,t,r,n,a){Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e){this.geometryTypes=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"]}return e.prototype.createFeatureResult=function(){return new n.default},e.prototype.prepareFeatures=function(){},e.prototype.finishFeatureResult=function(){},e.prototype.addFeature=function(e,t){e.features.push(t)},e.prototype.createFeature=function(){return new r.default},e.prototype.createSpatialReference=function(){return{wkid:0}},e.prototype.createGeometry=function(){return new a.default},e.prototype.addField=function(e,t){e.fields.push(t)},e.prototype.addCoordinate=function(e,t){e.coords.push(t)},e.prototype.addCoordinatePoint=function(e,t){e.coords.push(t)},e.prototype.addLength=function(e,t){e.lengths.push(t)},e.prototype.createPointGeometry=function(){return new a.default},e}();t.Context=o}.apply(null,n))||(e.exports=a)},1655:function(e,t,r){var n,a;n=[r.dj.c(e.i),t,r(87),r(81),r(414),r(1703),r(316),r(8),r(288),r(5),r(60),r(35),r(45),r(2443),r(30)],void 0===(a=function(e,t,r,n,a,o,i,s,u,c,l,f,d,p,h){function y(e,t,r){return{center:c.vec3f64.clone(e),halfSize:u.vec3f32.clone(t),quaternion:o.quatf32.clone(r)}}function v(e,t){var r=h.plane.signedDistance(t,e.center),n=g(e,t);return r>n?1:r<-n?-1:0}function g(e,t){a.quat.conjugate(m,e.quaternion),s.vec3.transformQuat(b,t,m);var r=e.halfSize;return Math.abs(b[0]*r[0])+Math.abs(b[1]*r[1])+Math.abs(b[2]*r[2])}Object.defineProperty(t,"__esModule",{value:!0});var m=i.quatf64.create(),b=c.vec3f64.create(),w=c.vec3f64.create(),x=f.vec4f64.create(),S=n.mat3f64.create(),I=function(){return function(e){var t=56*e;this.buffer=new ArrayBuffer(t),this.obbs=new Array(e);for(var r=0;r<e;r++)this.obbs[r]={center:c.vec3f64.createView(this.buffer,56*r+0),halfSize:u.vec3f32.createView(this.buffer,56*r+24),quaternion:o.quatf32.createView(this.buffer,56*r+36)}}}();t.ObbArray=I,t.create=y,t.clone=function(e){return y(e.center,e.halfSize,e.quaternion)},t.set=function(e,t){s.vec3.copy(t.center,e.center),s.vec3.copy(t.halfSize,e.halfSize),a.quat.copy(t.quaternion,e.quaternion)},t.compute=function(e,t){return t||(t=y([0,0,0],[-1,-1,-1],[0,0,0,1])),p.computeOBB(e,t),t},t.intersectPlane=v,t.toAaBoundingBox=function(e,t){t||(t=d.create());var n=r.mat3.fromQuat(S,e.quaternion),a=e.halfSize[0]*Math.abs(n[0])+e.halfSize[1]*Math.abs(n[3])+e.halfSize[2]*Math.abs(n[6]),o=e.halfSize[0]*Math.abs(n[1])+e.halfSize[1]*Math.abs(n[4])+e.halfSize[2]*Math.abs(n[7]),i=e.halfSize[0]*Math.abs(n[2])+e.halfSize[1]*Math.abs(n[5])+e.halfSize[2]*Math.abs(n[8]);return t[0]=e.center[0]-a,t[1]=e.center[1]-o,t[2]=e.center[2]-i,t[3]=e.center[0]+a,t[4]=e.center[1]+o,t[5]=e.center[2]+i,t},t.minimumDistancePlane=function(e,t){return h.plane.signedDistance(t,e.center)-g(e,t)},t.maximumDistancePlane=function(e,t){return h.plane.signedDistance(t,e.center)+g(e,t)},t.isVisible=function(e,t){return v(e,t.planes[0])<=0&&v(e,t.planes[1])<=0&&v(e,t.planes[2])<=0&&v(e,t.planes[3])<=0&&v(e,t.planes[4])<=0&&v(e,t.planes[5])<=0},t.intersectLine=function(e,t,r,n){void 0===n&&(n=0),a.quat.conjugate(m,e.quaternion),s.vec3.subtract(b,t,e.center);for(var o=s.vec3.transformQuat(b,b,m),i=s.vec3.transformQuat(w,r,m),u=-1/0,c=1/0,l=0;l<3;l++)if(Math.abs(i[l])>1e-6){var f=(n+e.halfSize[l]-o[l])/i[l],d=(-n-e.halfSize[l]-o[l])/i[l];u=Math.max(u,Math.min(f,d)),c=Math.min(c,Math.max(f,d))}else if(o[l]>e.halfSize[l]+n||o[l]<-e.halfSize[l]-n)return!1;return u<=c},t.projectedArea=function(e,t,n,o,i){a.quat.conjugate(m,e.quaternion),s.vec3.sub(b,t,e.center),s.vec3.transformQuat(b,b,m);var u=b[0]<-e.halfSize[0]?-1:b[0]>e.halfSize[0]?1:0,c=b[1]<-e.halfSize[1]?-1:b[1]>e.halfSize[1]?1:0,f=b[2]<-e.halfSize[2]?-1:b[2]>e.halfSize[2]?1:0,d=Math.abs(u)+Math.abs(c)+Math.abs(f);if(0===d)return 1/0;var p=1===d?4:6,h=6*(u+3*c+9*f+13);r.mat3.fromQuat(S,e.quaternion),r.mat3.scale(S,S,e.halfSize);for(var y=0;y<p;y++){var v=C[h+y];s.vec3.set(b,((1&v)<<1)-1,(2&v)-1,((4&v)>>1)-1),s.vec3.transformMat3(b,b,S),s.vec3.add(x,e.center,b),x[3]=1,l.vec4.transformMat4(x,x,n);var g=1/Math.max(1e-6,x[3]);F[2*y]=x[0]*g,F[2*y+1]=x[1]*g}var w=2*p-2,I=F[0]*(F[3]-F[w+1])+F[w]*(F[1]-F[w-1]);for(y=2;y<w;y+=2)I+=F[y]*(F[y+3]-F[y-1]);return Math.abs(I)*o*i*.125};var F=[.1,.2,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.2],C=function(){var e=new Int8Array(162),t=0,r=function(r){for(var n=0;n<r.length;n++)e[t+n]=r[n];t+=6};return r([6,2,3,1,5,4]),r([0,2,3,1,5,4]),r([0,2,3,7,5,4]),r([0,1,3,2,6,4]),r([0,1,3,2,0,0]),r([0,1,5,7,3,2]),r([0,1,3,7,6,4]),r([0,1,3,7,6,2]),r([0,1,5,7,6,2]),r([0,1,5,4,6,2]),r([0,1,5,4,0,0]),r([0,1,3,7,5,4]),r([0,2,6,4,0,0]),r([0,0,0,0,0,0]),r([1,3,7,5,0,0]),r([2,3,7,6,4,0]),r([2,3,7,6,0,0]),r([2,3,1,5,7,6]),r([0,1,5,7,6,2]),r([0,1,5,7,6,4]),r([0,1,3,7,6,4]),r([4,5,7,6,2,0]),r([4,5,7,6,0,0]),r([4,5,1,3,7,6]),r([0,2,3,7,5,4]),r([6,2,3,7,5,4]),r([6,2,3,1,5,4]),e}()}.apply(null,n))||(e.exports=a)},1660:function(e,t,r){var n,a;n=[r.dj.c(e.i),t,r(4),r(44),r(31),r(648),r(1639)],void 0===(a=function(e,t,r,n,a,o,i){Object.defineProperty(t,"__esModule",{value:!0}),t.processAttachmentQueryResult=function(e,t){for(var r={},n=0,i=e;n<i.length;n++)for(var s=i[n],u=s.parentObjectId,c=0,l=s.attachmentInfos;c<l.length;c++){var f=l[c],d=f.id,p=a.addProxy(a.addTokenParameter(t+"/"+u+"/attachments/"+d)),h=o.fromJSON(f);h.set({url:p,parentObjectId:u}),r[u]?r[u].push(h):r[u]=[h]}return r},t.executeAttachmentQuery=function(e,t,a){var o={query:i.mapParameters(r({},e.query,{f:"json"},function(e){var t=e.toJSON();return t.attachmentTypes&&(t.attachmentTypes=t.attachmentTypes.join(",")),t.globalIds&&(t.globalIds=t.globalIds.join(",")),t.objectIds&&(t.objectIds=t.objectIds.join(",")),t.size&&(t.size=t.size.join(",")),t}(t)))};return a&&(o=r({},a,o)),n(e.path+"/queryAttachments",o)}}.apply(null,n))||(e.exports=a)},1665:function(e,t,r){var n,a;n=[r.dj.c(e.i),t,r(2),r(1),r(144),r(4),r(36),r(0),r(636),r(1577),r(1660),r(1666),r(1651),r(1575),r(402),r(1652)],void 0===(a=function(e,t,r,n,a,o,i,s,u,c,l,f,d,p,h,y){return function(e){function t(t){var r=e.call(this,t)||this;return r.gdbVersion=null,r.source=null,r}return r(t,e),t.prototype.execute=function(e,t){return this.executeJSON(e,t).then(function(e){return p.fromJSON(e)})},t.prototype.executeJSON=function(e,t){return c.executeQuery(this.parsedUrl,this._normalizeQuery(e),o({},this.requestOptions,t)).then(function(e){return e.data})},t.prototype.executeForCount=function(e,t){return c.executeQueryForCount(this.parsedUrl,this._normalizeQuery(e),o({},this.requestOptions,t)).then(function(e){return e.data.count})},t.prototype.executeForExtent=function(e,t){return c.executeQueryForExtent(this.parsedUrl,this._normalizeQuery(e),o({},this.requestOptions,t)).then(function(e){return{count:e.data.count,extent:i.Extent.fromJSON(e.data.extent)}})},t.prototype.executeForIds=function(e,t){return c.executeQueryForIds(this.parsedUrl,this._normalizeQuery(e),o({},this.requestOptions,t)).then(function(e){return e.data.objectIds})},t.prototype.executeRelationshipQuery=function(e,t){return e=y.from(e),(this.gdbVersion||this.source)&&(e=e.clone().set({gdbVersion:this.gdbVersion||e.gdbVersion,source:this.source||e.source})),f.executeRelationshipQuery(this.parsedUrl,e,o({},this.requestOptions,t)).then(function(e){var t=e.data,r={};return Object.keys(t).forEach(function(e){return r[e]=p.fromJSON(t[e])}),r})},t.prototype.executeAttachmentQuery=function(e,t){var r=this;return l.executeAttachmentQuery(this.parsedUrl,d.from(e),o({},this.requestOptions,t)).then(function(e){return l.processAttachmentQueryResult(e.data.attachmentGroups,r.parsedUrl.path)})},t.prototype._normalizeQuery=function(e){var t=h.from(e);return this.gdbVersion||this.source?(t===e?t.clone():t).set({gdbVersion:this.gdbVersion||e.gdbVersion,source:this.source||e.source}):t},n([s.property()],t.prototype,"gdbVersion",void 0),n([s.property()],t.prototype,"source",void 0),n([s.subclass("esri.tasks.QueryTask")],t)}(s.declared(u))}.apply(null,n))||(e.exports=a)},1666:function(e,t,r){var n,a;n=[r.dj.c(e.i),t,r(4),r(44),r(1639)],void 0===(a=function(e,t,r,n,a){function o(e){var t=e.toJSON();return t.objectIds&&(t.objectIds=t.objectIds.join(",")),t.outFields&&(t.outFields=t.outFields.join(",")),t.outSpatialReference&&(t.outSR=t.outSR.wkid||JSON.stringify(t.outSR.toJSON()),delete t.outSpatialReference),t.source&&(t.layer=JSON.stringify({source:t.source}),delete t.source),t}Object.defineProperty(t,"__esModule",{value:!0}),t.toQueryStringParameters=o,t.executeRelationshipQuery=function(e,t,i){var s={query:a.mapParameters(r({},e.query,{f:"json"},o(t)))};return i&&(s=r({},i,s)),n(e.path+"/queryRelatedRecords",s).then(function(e){for(var t=e.data,r=t.geometryType,n=t.spatialReference,a={},o=0,i=t.relatedRecordGroups;o<i.length;o++){var s=i[o],u={fields:void 0,objectIdFieldName:void 0,geometryType:r,spatialReference:n,features:s.relatedRecords};if(null!=s.objectId)a[s.objectId]=u;else for(var c in s)s.hasOwnProperty(c)&&"relatedRecords"!==c&&(a[s[c]]=u)}return e.data=a,e})}}.apply(null,n))||(e.exports=a)},1678:function(e,t,r){var n,a;n=[r.dj.c(e.i),t,r(14),r(15),r(6),r(1734)],void 0===(a=function(e,t,r,n,a,o){function i(e,t,n){for(var a="",o=0;o<n;){var i=e[t+o];if(i<128)a+=String.fromCharCode(i),o++;else if(i>=192&&i<224){if(o+1>=n)throw new r("utf8-decode-error","UTF-8 Decode failed. Two byte character was truncated.");var s=(31&i)<<6|63&e[t+o+1];a+=String.fromCharCode(s),o+=2}else if(i>=224&&i<240){if(o+2>=n)throw new r("utf8-decode-error","UTF-8 Decode failed. Multi byte character was truncated.");s=(15&i)<<12|(63&e[t+o+1])<<6|63&e[t+o+2];a+=String.fromCharCode(s),o+=3}else{if(!(i>=240&&i<248))throw new r("utf8-decode-error","UTF-8 Decode failed. Invalid multi byte sequence.");if(o+3>=n)throw new r("utf8-decode-error","UTF-8 Decode failed. Multi byte character was truncated.");if((s=(7&i)<<18|(63&e[t+o+1])<<12|(63&e[t+o+2])<<6|63&e[t+o+3])>=65536){var u=55296+(s-65536>>10),c=56320+(1023&s);a+=String.fromCharCode(u,c)}else a+=String.fromCharCode(s);o+=4}}return a}function s(e,r){for(var n={byteOffset:0,byteCount:0,fields:Object.create(null)},a=0,o=0;o<r.length;o++){var i=r[o],s=i.valueType||i.type,u=t.valueType2ArrayBufferReader[s];n.fields[i.property]=u(e,a),a+=t.valueType2TypedArrayClassMap[s].BYTES_PER_ELEMENT}return n.byteCount=a,n}function u(e,t,n){var a,o,s=[],u=0;for(o=0;o<e;o+=1){if((a=t[o])>0){if(s.push(i(n,u,a-1)),0!==n[u+a-1])throw new r("string-array-error","Invalid string array: missing null termination.")}else s.push(null);u+=a}return s}function c(e,r){return new(0,t.valueType2TypedArrayClassMap[r.valueType])(e,r.byteOffset,r.count*r.valuesPerElement)}function l(e,t){return new Uint8Array(e,t.byteOffset,t.byteCount)}function f(e,t,a){for(var o=null!=t.header?s(e,t.header):{byteOffset:0,byteCount:0,fields:{count:a}},i={header:o,byteOffset:o.byteCount,byteCount:0,entries:Object.create(null)},u=o.byteCount,c=0;c<t.ordering.length;c++){var l=t.ordering[c],f=n.clone(t[l]);if(f.count=o.fields.count,"String"===f.valueType){if(f.byteOffset=u,f.byteCount=o.fields[l+"ByteCount"],"UTF-8"!==f.encoding)throw new r("unsupported-encoding","Unsupported String encoding.",{encoding:f.encoding})}else{if(!p(f.valueType))throw new r("unsupported-value-type","Unsupported binary valueType",{valueType:f.valueType});var d=h(f.valueType);u+=u%d!=0?d-u%d:0,f.byteOffset=u,f.byteCount=d*f.valuesPerElement*f.count}u+=f.byteCount,i.entries[l]=f}return i.byteCount=u-i.byteOffset,i}function d(e,t,n){if(t!==e&&y.error("Invalid "+n+" buffer size\n expected: "+e+", actual: "+t+")"),t<e)throw new r("buffer-too-small","Binary buffer is too small",{expectedSize:e,actualSize:t})}function p(e){return t.valueType2TypedArrayClassMap.hasOwnProperty(e)}function h(e){return p(e)?t.valueType2TypedArrayClassMap[e].BYTES_PER_ELEMENT:0}Object.defineProperty(t,"__esModule",{value:!0});var y=a.getLogger("esri.views.3d.layers.i3s.I3SBinaryReader");t.readHeader=s,t.readStringArray=u,t.createTypedView=c,t.createRawView=l,t.createAttributeDataIndex=f,t.createGeometryIndexFromDefinition=function(e,t,r){for(var n={header:{byteOffset:0,byteCount:e.offset,fields:{}},byteOffset:e.offset,byteCount:0,vertexAttributes:{},featureAttributes:{}},a=e.offset,o=function(e,t,r,n){var o="UInt64"===t.type?8:h(t.type),i={byteOffset:a,byteCount:o*t.component*r,count:r,valueType:t.type,valuesPerElement:t.component};a+=i.byteCount,n[e]=i},i=0,s=v;i<s.length;i++){var u=s[i];e[u[0]]&&o(u[1],e[u[0]],t,n.vertexAttributes)}for(var c=0,l=g;c<l.length;c++){var f=l[c];e[f[0]]&&o(f[1],e[f[0]],r,n.featureAttributes)}return n};var v=[["position","position"],["normal","normal"],["uv0","uv0"],["uv1","uv1"],["color","color"],["uvRegion","region"]],g=[["featureId","id"],["faceRange","faceRange"]];t.createGeometryIndexFromSchema=function(e,t){for(var r=s(e,t&&t.header),a=r.byteCount,o={header:r,byteOffset:r.byteCount,byteCount:0,vertexAttributes:n.clone(t.vertexAttributes)},i=o.vertexAttributes,u=r.fields,c=null!=u.vertexCount?u.vertexCount:u.count,l=0;l<t.ordering.length;l++){var f=t.ordering[l];null!=i[f]&&(i[f].byteOffset=a,i[f].count=c,a+=h(i[f].valueType)*i[f].valuesPerElement*c)}var p=u.faceCount;if(t.faces&&p){o.faces=n.clone(t.faces);var y=o.faces;for(l=0;l<t.ordering.length;l++){var v=t.ordering[l];null!=y[v]&&(y[v].byteOffset=a,y[v].count=p,a+=h(y[v].valueType)*y[v].valuesPerElement*p)}}var g=u.featureCount;if(t.featureAttributes&&t.featureAttributeOrder&&g){o.featureAttributes=n.clone(t.featureAttributes);var m=o.featureAttributes;for(l=0;l<t.featureAttributeOrder.length;l++){var b=t.featureAttributeOrder[l];m[b].byteOffset=a,m[b].count=g;var w=h(m[b].valueType);"UInt64"===m[b].valueType&&(w=8),a+=w*m[b].valuesPerElement*g}}return d(a,e.byteLength,"geometry"),o.byteCount=a-o.byteOffset,o},t.readBinaryAttribute=function(e,t,n){if("lepcc-rgb"===e.encoding)return o.decodeRGB(t);if("lepcc-intensity"===e.encoding)return o.decodeIntensity(t);if(null!=e.encoding&&""!==e.encoding)throw new r("unknown-attribute-storage-info-encoding","Unknown Attribute Storage Info Encoding");e["attributeByteCounts "]&&!e.attributeByteCounts&&(y.warn("Warning: Trailing space in 'attributeByteCounts '."),e.attributeByteCounts=e["attributeByteCounts "]),"ObjectIds"===e.ordering[0]&&e.hasOwnProperty("objectIds")&&(y.warn("Warning: Case error in objectIds"),e.ordering[0]="objectIds");var a=f(t,e,n);d(a.byteOffset+a.byteCount,t.byteLength,"attribute");var i=a.entries.attributeValues||a.entries.objectIds;if(i){if("String"===i.valueType){var s=a.entries.attributeByteCounts,p=c(t,s),h=l(t,i);return u(s.count,p,h)}return c(t,i)}throw new r("bad-attribute-storage-info","Bad attributeStorageInfo specification.")},t.valueType2TypedArrayClassMap={Float32:Float32Array,Float64:Float64Array,UInt8:Uint8Array,Int8:Int8Array,UInt16:Uint16Array,Int16:Int16Array,UInt32:Uint32Array,Int32:Int32Array},t.valueType2ArrayBufferReader={Float32:function(e,t){return new DataView(e,0).getFloat32(t,!0)},Float64:function(e,t){return new DataView(e,0).getFloat64(t,!0)},UInt8:function(e,t){return new DataView(e,0).getUint8(t)},Int8:function(e,t){return new DataView(e,0).getInt8(t)},UInt16:function(e,t){return new DataView(e,0).getUint16(t,!0)},Int16:function(e,t){return new DataView(e,0).getInt16(t,!0)},UInt32:function(e,t){return new DataView(e,0).getUint32(t,!0)},Int32:function(e,t){return new DataView(e,0).getInt32(t,!0)}},t.isValueType=p,t.getBytesPerValue=h}.apply(null,n))||(e.exports=a)},1703:function(e,t,r){var n,a;n=[r.dj.c(e.i),t,r(1807)],void 0===(a=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.quatf32=r}.apply(null,n))||(e.exports=a)},1734:function(e,t,r){var n,a;n=[r.dj.c(e.i),t,r(14)],void 0===(a=function(e,t,r){function n(e,t,r){return{identifier:String.fromCharCode.apply(null,new Uint8Array(e,r+l.identifierOffset,l.identifierLength)),version:t.getUint16(r+l.versionOffset,c),checksum:t.getUint32(r+l.checksumOffset,c)}}function a(e,t){return{sizeLo:e.getUint32(t+f.sizeLo,c),sizeHi:e.getUint32(t+f.sizeHi,c),minX:e.getFloat64(t+f.minX,c),minY:e.getFloat64(t+f.minY,c),minZ:e.getFloat64(t+f.minZ,c),maxX:e.getFloat64(t+f.maxX,c),maxY:e.getFloat64(t+f.maxY,c),maxZ:e.getFloat64(t+f.maxZ,c),errorX:e.getFloat64(t+f.errorX,c),errorY:e.getFloat64(t+f.errorY,c),errorZ:e.getFloat64(t+f.errorZ,c),count:e.getUint32(t+f.count,c),reserved:e.getUint32(t+f.reserved,c)}}function o(e,t,r){var n=[];t=i(e,t,n);for(var a=[],o=0;o<n.length;o++){a.length=0,t=i(e,t,a);for(var s=0;s<a.length;s++)r.push(a[s]+n[o])}return t}function i(e,t,n){var a=new DataView(e,t),o=a.getUint8(0),i=31&o,s=!!(32&o),u=(192&o)>>6,l=0;if(0===u)l=a.getUint32(1,c),t+=5;else if(1===u)l=a.getUint16(1,c),t+=3;else{if(2!==u)throw new r("lepcc-decode-error","Bad count type");l=a.getUint8(1),t+=2}if(s)throw new r("lepcc-decode-error","LUT not implemented");for(var f=Math.ceil(l*i/8),d=new Uint8Array(e,t,f),p=0,h=0,y=0,v=-1>>>32-i,g=0;g<l;g++){for(;h<i;)p|=d[y]<<h,h+=8,y+=1;n[g]=p&v,p>>>=i,(h-=i)+i>32&&(p|=d[y-1]>>8-h)}return t+y}function s(e,t){return{sizeLo:e.getUint32(t+d.sizeLo,c),sizeHi:e.getUint32(t+d.sizeHi,c),count:e.getUint32(t+d.count,c),colorMapCount:e.getUint16(t+d.colorMapCount,c),lookupMethod:e.getUint8(t+d.lookupMethod),compressionMethod:e.getUint8(t+d.compressionMethod)}}function u(e,t){return{sizeLo:e.getUint32(t+p.sizeLo,c),sizeHi:e.getUint32(t+p.sizeHi,c),count:e.getUint32(t+p.count,c),scaleFactor:e.getUint16(t+p.scaleFactor,c),bitsPerPoint:e.getUint8(t+p.bitsPerPoint),reserved:e.getUint8(t+p.reserved)}}Object.defineProperty(t,"__esModule",{value:!0});var c=!0,l={identifierOffset:0,identifierLength:10,versionOffset:10,checksumOffset:12,byteCount:16},f={sizeLo:0,sizeHi:4,minX:8,minY:16,minZ:24,maxX:32,maxY:40,maxZ:48,errorX:56,errorY:64,errorZ:72,count:80,reserved:84,byteCount:88};t.decodeXYZ=function(e){var t=new DataView(e,0),i=0,s=n(e,t,i),u=s.identifier,c=s.version;if(i+=l.byteCount,"LEPCC     "!==u)throw new r("lepcc-decode-error","Bad identifier");if(c>1)throw new r("lepcc-decode-error","Unknown version");var d=a(t,i);if(i+=f.byteCount,d.sizeHi*Math.pow(2,32)+d.sizeLo!==e.byteLength)throw new r("lepcc-decode-error","Bad size");var p=new Float64Array(3*d.count),h=[],y=[],v=[],g=[];if((i=o(e,i=o(e,i=o(e,i=o(e,i,h),y),v),g))!==e.byteLength)throw new r("lepcc-decode-error","Bad length");for(var m=0,b=0,w=0;w<h.length;w++){b+=h[w];for(var x=0,S=0;S<y[w];S++){x+=v[m];var I=g[m];p[3*m]=Math.min(d.maxX,d.minX+2*d.errorX*x),p[3*m+1]=Math.min(d.maxY,d.minY+2*d.errorY*b),p[3*m+2]=Math.min(d.maxZ,d.minZ+2*d.errorZ*I),m++}}return{errorX:d.errorX,errorY:d.errorY,errorZ:d.errorZ,result:p}};var d={sizeLo:0,sizeHi:4,count:8,colorMapCount:12,lookupMethod:14,compressionMethod:15,byteCount:16};t.decodeRGB=function(e){var t=new DataView(e,0),a=0,o=n(e,t,a),i=o.identifier,u=o.version;if(a+=l.byteCount,"ClusterRGB"!==i)throw new r("lepcc-decode-error","Bad identifier");if(u>1)throw new r("lepcc-decode-error","Unknown version");var c=s(t,a);if(a+=d.byteCount,c.sizeHi*Math.pow(2,32)+c.sizeLo!==e.byteLength)throw new r("lepcc-decode-error","Bad size");if((2===c.lookupMethod||1===c.lookupMethod)&&0===c.compressionMethod){if(3*c.colorMapCount+c.count+a!==e.byteLength||c.colorMapCount>256)throw new r("lepcc-decode-error","Bad count");for(var f=new Uint8Array(e,a,3*c.colorMapCount),p=new Uint8Array(e,a+3*c.colorMapCount,c.count),h=new Uint8Array(3*c.count),y=0;y<c.count;y++){var v=p[y];h[3*y]=f[3*v],h[3*y+1]=f[3*v+1],h[3*y+2]=f[3*v+2]}return h}if(0===c.lookupMethod&&0===c.compressionMethod){if(3*c.count+a!==e.byteLength||0!==c.colorMapCount)throw new r("lepcc-decode-error","Bad count");return new Uint8Array(e,a).slice()}if(c.lookupMethod<=2&&1===c.compressionMethod){if(a+3!==e.byteLength||1!==c.colorMapCount)throw new r("lepcc-decode-error","Bad count");var g=t.getUint8(a),m=t.getUint8(a+1),b=t.getUint8(a+2);for(h=new Uint8Array(3*c.count),y=0;y<c.count;y++)h[3*y]=g,h[3*y+1]=m,h[3*y+2]=b;return h}throw new r("lepcc-decode-error","Bad method "+c.lookupMethod+","+c.compressionMethod)};var p={sizeLo:0,sizeHi:4,count:8,scaleFactor:12,bitsPerPoint:14,reserved:15,byteCount:16};t.decodeIntensity=function(e){var t=new DataView(e,0),a=0,o=n(e,t,a),s=o.identifier,c=o.version;if(a+=l.byteCount,"Intensity "!==s)throw new r("lepcc-decode-error","Bad identifier");if(c>1)throw new r("lepcc-decode-error","Unknown version");var f=u(t,a);if(a+=p.byteCount,f.sizeHi*Math.pow(2,32)+f.sizeLo!==e.byteLength)throw new r("lepcc-decode-error","Bad size");var d=new Uint16Array(f.count);if(8===f.bitsPerPoint){if(f.count+a!==e.byteLength)throw new r("lepcc-decode-error","Bad size");for(var h=new Uint8Array(e,a,f.count),y=0;y<f.count;y++)d[y]=h[y]*f.scaleFactor}else if(16===f.bitsPerPoint){if(2*f.count+a!==e.byteLength)throw new r("lepcc-decode-error","Bad size");for(h=new Uint16Array(e,a,f.count),y=0;y<f.count;y++)d[y]=h[y]*f.scaleFactor}else{if(i(e,a,h=[])!==e.byteLength)throw new r("lepcc-decode-error","Bad size");for(y=0;y<f.count;y++)d[y]=h[y]*f.scaleFactor}return d}}.apply(null,n))||(e.exports=a)},1807:function(e,t,r){var n,a;n=[r.dj.c(e.i),t],void 0===(a=function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.create=function(){var e=new Float32Array(4);return e[3]=1,e},t.clone=function(e){var t=new Float32Array(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},t.fromValues=function(e,t,r,n){var a=new Float32Array(4);return a[0]=e,a[1]=t,a[2]=r,a[3]=n,a},t.createView=function(e,t){return new Float32Array(e,t,4)}}.apply(null,n))||(e.exports=a)},2443:function(e,t,r){var n,a;n=[r.dj.c(e.i),t],void 0===(a=function(e,t){function r(e,t,r,n,a,i,s,u,c,l,f){return function(e,t,r){for(var n=b(e.maxVert[0],e.minVert[0]),a=0,o=1;o<7;++o){var i=b(e.maxVert[o],e.minVert[o]);i>n&&(n=i,a=o)}y(t,e.minVert[a]),y(r,e.maxVert[a])}(e,n,a),b(n,a)<x?1:(p(s,n,a),g(s,s),function(e,t,r,n){for(var a=e.data,o=e.offsetIdx,i=e.strideIdx,s=Number.NEGATIVE_INFINITY,u=0,c=o;c<a.length;c+=i){O[0]=a[c]-t[0],O[1]=a[c+1]-t[1],O[2]=a[c+2]-t[2];var l=r[0]*O[0]+r[1]*O[1]+r[2]*O[2],f=r[0]*r[0]+r[1]*r[1]+r[2]*r[2],d=O[0]*O[0]+O[1]*O[1]+O[2]*O[2],p=d-l*l/f;p>s&&(s=p,u=c)}return y(n,a,u),s}(t,n,s,i)<x?2:(p(u,a,i),g(u,u),p(c,i,n),g(c,c),v(r,u,s),g(r,r),o(t,r,s,u,c,l),0))}function n(e,t,r,n,i,s,u,c,l,f){a(e,t,r,n,i,F,C),void 0!==F[0]&&(p(P,F,r),g(P,P),p(M,F,n),g(M,M),p(T,F,i),g(T,T),v(j,M,s),g(j,j),v(k,T,u),g(k,k),v(A,P,c),g(A,A),o(e,j,s,M,P,l),o(e,k,u,T,M,l),o(e,A,c,P,T,l)),void 0!==C[0]&&(p(P,C,r),g(P,P),p(M,C,n),g(M,M),p(T,C,i),g(T,T),v(j,M,s),g(j,j),v(k,T,u),g(k,k),v(A,P,c),g(A,A),o(e,j,s,M,P,l),o(e,k,u,T,M,l),o(e,A,c,P,T,l))}function a(e,t,r,n,a,o,i){!function(e,t,r,n,a){var o=e.data,i=e.offsetIdx,s=e.strideIdx;y(n,o,i),y(a,n),r[0]=w(_,t),r[1]=r[0];for(var u=i+s;u<o.length;u+=s){var c=o[u]*t[0]+o[u+1]*t[1]+o[u+2]*t[2];c<r[0]&&(r[0]=c,y(n,o,u)),c>r[1]&&(r[1]=c,y(a,o,u))}}(e,t,R,i,o);var s=w(r,t);R[1]-x<=s&&(o[0]=void 0),R[0]+x>=s&&(i[0]=void 0)}function o(e,t,r,n,a,o){if(!(m(t)<x)){v(q,r,t),v(U,n,t),v(B,a,t),i(e,t,R),N[1]=R[0],z[1]=R[1],L[1]=z[1]-N[1];for(var s=[r,n,a],u=[q,U,B],c=0;c<3;++c){i(e,s[c],R),N[0]=R[0],z[0]=R[1],i(e,u[c],R),N[2]=R[0],z[2]=R[1],L[0]=z[0]-N[0],L[2]=z[2]-N[2];var l=f(L);l<o.quality&&(y(o.b0,s[c]),y(o.b1,t),y(o.b2,u[c]),o.quality=l)}}}function i(e,t,r){var n=e.data,a=e.offsetIdx,o=e.strideIdx;r[0]=Number.POSITIVE_INFINITY,r[1]=Number.NEGATIVE_INFINITY;for(var i=a;i<n.length;i+=o){var s=n[i]*t[0]+n[i+1]*t[1]+n[i+2]*t[2];r[0]=Math.min(r[0],s),r[1]=Math.max(r[1],s)}}function s(e,t,r){y(r.center,e),h(r.halfSize,t,.5),r.quaternion[0]=0,r.quaternion[1]=0,r.quaternion[2]=0,r.quaternion[3]=1}function u(e,t,r){y(E,t),Math.abs(t[0])>Math.abs(t[1])&&Math.abs(t[0])>Math.abs(t[2])?E[0]=0:Math.abs(t[1])>Math.abs(t[2])?E[1]=0:E[2]=0,m(E)<x&&(E[0]=E[1]=E[2]=1),v(V,t,E),g(V,V),v(D,t,V),g(D,D),c(e,t,V,D,G,Q),p(J,Q,G),l(t,V,D,G,Q,J,r)}function c(e,t,r,n,a,o){i(e,t,R),a[0]=R[0],o[0]=R[1],i(e,r,R),a[1]=R[0],o[1]=R[1],i(e,n,R),a[2]=R[0],o[2]=R[1]}function l(e,t,r,n,a,o,i){Y[0]=e[0],Y[1]=e[1],Y[2]=e[2],Y[3]=t[0],Y[4]=t[1],Y[5]=t[2],Y[6]=r[0],Y[7]=r[1],Y[8]=r[2],function(e,t){var r=t[0]+t[4]+t[8];if(r>0){var n=Math.sqrt(r+1);e[3]=.5*n,n=.5/n,e[0]=(t[5]-t[7])*n,e[1]=(t[6]-t[2])*n,e[2]=(t[1]-t[3])*n}else{var a=0;t[4]>t[0]&&(a=1),t[8]>t[3*a+a]&&(a=2);var o=(a+1)%3,i=(a+2)%3,n=Math.sqrt(t[3*a+a]-t[3*o+o]-t[3*i+i]+1);e[a]=.5*n,n=.5/n,e[3]=(t[3*o+i]-t[3*i+o])*n,e[o]=(t[3*o+a]+t[3*a+o])*n,e[i]=(t[3*i+a]+t[3*a+i])*n}}(i.quaternion,Y),d(W,n,a),h(W,W,.5),h(i.center,e,W[0]),h(Z,t,W[1]),d(i.center,i.center,Z),h(Z,r,W[2]),d(i.center,i.center,Z),h(i.halfSize,o,.5)}function f(e){return e[0]*e[1]+e[0]*e[2]+e[1]*e[2]}function d(e,t,r){e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2]}function p(e,t,r){e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2]}function h(e,t,r){e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r}function y(e,t,r){void 0===r&&(r=0),e[0]=t[r+0],e[1]=t[r+1],e[2]=t[r+2]}function v(e,t,r){var n=t[0],a=t[1],o=t[2],i=r[0],s=r[1],u=r[2];e[0]=a*u-o*s,e[1]=o*i-n*u,e[2]=n*s-a*i}function g(e,t){var r=t[0]*t[0]+t[1]*t[1]+t[2]*t[2];if(r>0){var n=1/Math.sqrt(r);e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n}}function m(e){return e[0]*e[0]+e[1]*e[1]+e[2]*e[2]}function b(e,t){var r=t[0]-e[0],n=t[1]-e[1],a=t[2]-e[2];return r*r+n*n+a*a}function w(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}Object.defineProperty(t,"__esModule",{value:!0});var x=1e-6,S=[0,0,0],I=[0,0,0];t.computeOBB=function(e,t){var a=e.data,o=e.strideIdx,i=a.length/o;if(!(i<=0)){var y=new H(e);d(S,y.minProj,y.maxProj),h(S,S,.5),p(I,y.maxProj,y.minProj);var v=f(I),g=new K;g.quality=v,i<14&&(e={data:new Float64Array(y.buffer,112,42),size:3,offsetIdx:0,strideIdx:3});var m=[0,0,0],b=[0,0,0],w=[0,0,0],x=[0,0,0],F=[0,0,0],C=[0,0,0],P=[0,0,0];switch(r(y,e,P,m,b,w,x,F,C,g)){case 1:return void s(S,I,t);case 2:return void u(e,x,t)}n(e,P,m,b,w,x,F,C,g),c(e,g.b0,g.b1,g.b2,G,Q);var M=[0,0,0];p(M,Q,G),g.quality=f(M),g.quality<v?l(g.b0,g.b1,g.b2,G,Q,M,t):s(S,I,t)}};var F=[0,0,0],C=[0,0,0],P=[0,0,0],M=[0,0,0],T=[0,0,0],j=[0,0,0],k=[0,0,0],A=[0,0,0],O=[0,0,0],R=[0,0],q=[0,0,0],U=[0,0,0],B=[0,0,0],z=[0,0,0],N=[0,0,0],L=[0,0,0],_=[0,0,0],E=[0,0,0],V=[0,0,0],D=[0,0,0],G=[0,0,0],Q=[0,0,0],J=[0,0,0],Z=[0,0,0],Y=[1,0,0,0,1,0,0,0,1],W=[0,0,0],X=7,H=function(){return function(e){this.minVert=new Array(X),this.maxVert=new Array(X);var t=64*X;this.buffer=new ArrayBuffer(t);var r=0;this.minProj=new Float64Array(this.buffer,r,X),r+=8*X,this.maxProj=new Float64Array(this.buffer,r,X),r+=8*X;for(var n=0;n<X;++n)this.minVert[n]=new Float64Array(this.buffer,r,3),r+=24;for(n=0;n<X;++n)this.maxVert[n]=new Float64Array(this.buffer,r,3),r+=24;for(n=0;n<X;++n)this.minProj[n]=Number.POSITIVE_INFINITY,this.maxProj[n]=Number.NEGATIVE_INFINITY;var a=new Array(X),o=new Array(X),i=e.data,s=e.offsetIdx,u=e.strideIdx;for(n=s;n<i.length;n+=u){var c=i[n];c<this.minProj[0]&&(this.minProj[0]=c,a[0]=n),c>this.maxProj[0]&&(this.maxProj[0]=c,o[0]=n),(c=i[n+1])<this.minProj[1]&&(this.minProj[1]=c,a[1]=n),c>this.maxProj[1]&&(this.maxProj[1]=c,o[1]=n),(c=i[n+2])<this.minProj[2]&&(this.minProj[2]=c,a[2]=n),c>this.maxProj[2]&&(this.maxProj[2]=c,o[2]=n),(c=i[n]+i[n+1]+i[n+2])<this.minProj[3]&&(this.minProj[3]=c,a[3]=n),c>this.maxProj[3]&&(this.maxProj[3]=c,o[3]=n),(c=i[n]+i[n+1]-i[n+2])<this.minProj[4]&&(this.minProj[4]=c,a[4]=n),c>this.maxProj[4]&&(this.maxProj[4]=c,o[4]=n),(c=i[n]-i[n+1]+i[n+2])<this.minProj[5]&&(this.minProj[5]=c,a[5]=n),c>this.maxProj[5]&&(this.maxProj[5]=c,o[5]=n),(c=i[n]-i[n+1]-i[n+2])<this.minProj[6]&&(this.minProj[6]=c,a[6]=n),c>this.maxProj[6]&&(this.maxProj[6]=c,o[6]=n)}for(n=0;n<X;++n){var l=a[n];y(this.minVert[n],i,l),l=o[n],y(this.maxVert[n],i,l)}}}(),K=function(){return function(){this.b0=[1,0,0],this.b1=[0,1,0],this.b2=[0,0,1],this.quality=0}}()}.apply(null,n))||(e.exports=a)}}]);